var Module=typeof Module!=="undefined"?Module:{};if(!Module.expectedDataFileDownloads){Module.expectedDataFileDownloads=0;Module.finishedDataFileDownloads=0}Module.expectedDataFileDownloads++;(function(){var loadPackage=function(metadata){var PACKAGE_PATH;if(typeof window==="object"){PACKAGE_PATH=window["encodeURIComponent"](window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/")}else if(typeof location!=="undefined"){PACKAGE_PATH=encodeURIComponent(location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/")}else{throw"using preloaded data can only be done on a web page or in a web worker"}var PACKAGE_NAME="_out/PC_O2/App.data";var REMOTE_PACKAGE_BASE="App.data";if(typeof Module["locateFilePackage"]==="function"&&!Module["locateFile"]){Module["locateFile"]=Module["locateFilePackage"];err("warning: you defined Module.locateFilePackage, that has been renamed to Module.locateFile (using your locateFilePackage for now)")}var REMOTE_PACKAGE_NAME=Module["locateFile"]?Module["locateFile"](REMOTE_PACKAGE_BASE,""):REMOTE_PACKAGE_BASE;var REMOTE_PACKAGE_SIZE=metadata["remote_package_size"];var PACKAGE_UUID=metadata["package_uuid"];function fetchRemotePackage(packageName,packageSize,callback,errback){var xhr=new XMLHttpRequest;xhr.open("GET",packageName,true);xhr.responseType="arraybuffer";xhr.onprogress=function(event){var url=packageName;var size=packageSize;if(event.total)size=event.total;if(event.loaded){if(!xhr.addedTotal){xhr.addedTotal=true;if(!Module.dataFileDownloads)Module.dataFileDownloads={};Module.dataFileDownloads[url]={loaded:event.loaded,total:size}}else{Module.dataFileDownloads[url].loaded=event.loaded}var total=0;var loaded=0;var num=0;for(var download in Module.dataFileDownloads){var data=Module.dataFileDownloads[download];total+=data.total;loaded+=data.loaded;num++}total=Math.ceil(total*Module.expectedDataFileDownloads/num);if(Module["setStatus"])Module["setStatus"]("Downloading data... ("+loaded+"/"+total+")")}else if(!Module.dataFileDownloads){if(Module["setStatus"])Module["setStatus"]("Downloading data...")}};xhr.onerror=function(event){throw new Error("NetworkError for: "+packageName)};xhr.onload=function(event){if(xhr.status==200||xhr.status==304||xhr.status==206||xhr.status==0&&xhr.response){var packageData=xhr.response;callback(packageData)}else{throw new Error(xhr.statusText+" : "+xhr.responseURL)}};xhr.send(null)}function handleError(error){console.error("package error:",error)}var fetchedCallback=null;var fetched=Module["getPreloadedPackage"]?Module["getPreloadedPackage"](REMOTE_PACKAGE_NAME,REMOTE_PACKAGE_SIZE):null;if(!fetched)fetchRemotePackage(REMOTE_PACKAGE_NAME,REMOTE_PACKAGE_SIZE,function(data){if(fetchedCallback){fetchedCallback(data);fetchedCallback=null}else{fetched=data}},handleError);function runWithFS(){function assert(check,msg){if(!check)throw msg+(new Error).stack}Module["FS_createPath"]("/","Rc",true,true);function DataRequest(start,end,audio){this.start=start;this.end=end;this.audio=audio}DataRequest.prototype={requests:{},open:function(mode,name){this.name=name;this.requests[name]=this;Module["addRunDependency"]("fp "+this.name)},send:function(){},onload:function(){var byteArray=this.byteArray.subarray(this.start,this.end);this.finish(byteArray)},finish:function(byteArray){var that=this;Module["FS_createDataFile"](this.name,null,byteArray,true,true,true);Module["removeRunDependency"]("fp "+that.name);this.requests[this.name]=null}};var files=metadata["files"];for(var i=0;i<files.length;++i){new DataRequest(files[i]["start"],files[i]["end"],files[i]["audio"]).open("GET",files[i]["filename"])}function processPackageData(arrayBuffer){Module.finishedDataFileDownloads++;assert(arrayBuffer,"Loading data file failed.");assert(arrayBuffer instanceof ArrayBuffer,"bad input to processPackageData");var byteArray=new Uint8Array(arrayBuffer);var ptr=Module["getMemory"](byteArray.length);Module["HEAPU8"].set(byteArray,ptr);DataRequest.prototype.byteArray=Module["HEAPU8"].subarray(ptr,ptr+byteArray.length);var files=metadata["files"];for(var i=0;i<files.length;++i){DataRequest.prototype.requests[files[i].filename].onload()}Module["removeRunDependency"]("datafile__out/PC_O2/App.data")}Module["addRunDependency"]("datafile__out/PC_O2/App.data");if(!Module.preloadResults)Module.preloadResults={};Module.preloadResults[PACKAGE_NAME]={fromCache:false};if(fetched){processPackageData(fetched);fetched=null}else{fetchedCallback=processPackageData}}if(Module["calledRun"]){runWithFS()}else{if(!Module["preRun"])Module["preRun"]=[];Module["preRun"].push(runWithFS)}};loadPackage({"files":[{"filename":"/Rc/App.data","start":0,"end":0,"audio":0},{"filename":"/Rc/App.js","start":0,"end":369049,"audio":0},{"filename":"/Rc/DATA","start":369049,"end":899993,"audio":0},{"filename":"/Rc/Shell_Common.css","start":899993,"end":906723,"audio":0},{"filename":"/Rc/Shell_Common.js","start":906723,"end":1052269,"audio":0}],"remote_package_size":1052269,"package_uuid":"0f66e296-ee16-455c-ba22-5549e28e27a4"})})();var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram="./this.program";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require("path").dirname(scriptDirectory)+"/"}else{scriptDirectory=__dirname+"/"}read_=function shell_read(filename,binary){var ret=tryParseAsDataURI(filename);if(ret){return binary?ret:ret.toString()}if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);return nodeFS["readFileSync"](filename,binary?null:"utf8")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);if(typeof module!=="undefined"){module["exports"]=Module}process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",abort);quit_=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){read_=function shell_read(f){var data=tryParseAsDataURI(f);if(data){return intArrayToString(data)}return read(f)}}readBinary=function readBinary(f){var data;data=tryParseAsDataURI(f);if(data){return data}if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){arguments_=scriptArgs}else if(typeof arguments!="undefined"){arguments_=arguments}if(typeof quit==="function"){quit_=function(status){quit(status)}}if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(document.currentScript){scriptDirectory=document.currentScript.src}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=function shell_read(url){try{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText}catch(err){var data=tryParseAsDataURI(url);if(data){return intArrayToString(data)}throw err}};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){try{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}catch(err){var data=tryParseAsDataURI(url);if(data){return data}throw err}}}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}var data=tryParseAsDataURI(url);if(data){onload(data.buffer);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var STACK_ALIGN=16;function dynamicAlloc(size){var ret=HEAP32[DYNAMICTOP_PTR>>2];var end=ret+size+15&-16;if(end>_emscripten_get_heap_size()){abort()}HEAP32[DYNAMICTOP_PTR>>2]=end;return ret}function getNativeTypeSize(type){switch(type){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(type[type.length-1]==="*"){return 4}else if(type[0]==="i"){var bits=parseInt(type.substr(1));assert(bits%8===0,"getNativeTypeSize invalid bits "+bits+", type "+type);return bits/8}else{return 0}}}}function warnOnce(text){if(!warnOnce.shown)warnOnce.shown={};if(!warnOnce.shown[text]){warnOnce.shown[text]=1;err(text)}}var jsCallStartIndex=1;var functionPointers=new Array(0);var funcWrappers={};function dynCall(sig,ptr,args){if(args&&args.length){return Module["dynCall_"+sig].apply(null,[ptr].concat(args))}else{return Module["dynCall_"+sig].call(null,ptr)}}var tempRet0=0;var setTempRet0=function(value){tempRet0=value};var getTempRet0=function(){return tempRet0};var GLOBAL_BASE=8;var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime;if(Module["noExitRuntime"])noExitRuntime=Module["noExitRuntime"];function setValue(ptr,value,type,noSafe){type=type||"i8";if(type.charAt(type.length-1)==="*")type="i32";switch(type){case"i1":HEAP8[ptr>>0]=value;break;case"i8":HEAP8[ptr>>0]=value;break;case"i16":HEAP16[ptr>>1]=value;break;case"i32":HEAP32[ptr>>2]=value;break;case"i64":tempI64=[value>>>0,(tempDouble=value,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[ptr>>2]=tempI64[0],HEAP32[ptr+4>>2]=tempI64[1];break;case"float":HEAPF32[ptr>>2]=value;break;case"double":HEAPF64[ptr>>3]=value;break;default:abort("invalid type for setValue: "+type)}}var ABORT=false;var EXITSTATUS=0;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}function getCFunc(ident){var func=Module["_"+ident];assert(func,"Cannot call unknown function "+ident+", make sure it is exported");return func}function ccall(ident,returnType,argTypes,args,opts){var toC={"string":function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},"array":function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType==="string")return UTF8ToString(ret);if(returnType==="boolean")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);ret=convertReturnValue(ret);if(stack!==0)stackRestore(stack);return ret}var ALLOC_NONE=3;function allocate(slab,types,allocator,ptr){var zeroinit,size;if(typeof slab==="number"){zeroinit=true;size=slab}else{zeroinit=false;size=slab.length}var singleType=typeof types==="string"?types:null;var ret;if(allocator==ALLOC_NONE){ret=ptr}else{ret=[_malloc,stackAlloc,dynamicAlloc][allocator](Math.max(size,singleType?1:types.length))}if(zeroinit){var stop;ptr=ret;assert((ret&3)==0);stop=ret+(size&~3);for(;ptr<stop;ptr+=4){HEAP32[ptr>>2]=0}stop=ret+size;while(ptr<stop){HEAP8[ptr++>>0]=0}return ret}if(singleType==="i8"){if(slab.subarray||slab.slice){HEAPU8.set(slab,ret)}else{HEAPU8.set(new Uint8Array(slab),ret)}return ret}var i=0,type,typeSize,previousType;while(i<size){var curr=slab[i];type=singleType||types[i];if(type===0){i++;continue}if(type=="i64")type="i32";setValue(ret+i,curr,type);if(previousType!==type){typeSize=getNativeTypeSize(type);previousType=type}i+=typeSize}return ret}function getMemory(size){if(!runtimeInitialized)return dynamicAlloc(size);return _malloc(size)}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}function stringToUTF8Array(str,outU8Array,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;outU8Array[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;outU8Array[outIdx++]=192|u>>6;outU8Array[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;outU8Array[outIdx++]=224|u>>12;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;outU8Array[outIdx++]=240|u>>18;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}}outU8Array[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127)++len;else if(u<=2047)len+=2;else if(u<=65535)len+=3;else len+=4}return len}var UTF16Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):undefined;function UTF16ToString(ptr){var endPtr=ptr;var idx=endPtr>>1;while(HEAP16[idx])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder){return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr))}else{var i=0;var str="";while(1){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)return str;++i;str+=String.fromCharCode(codeUnit)}}}function stringToUTF16(str,outPtr,maxBytesToWrite){if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647}if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit;outPtr+=2}HEAP16[outPtr>>1]=0;return outPtr-startPtr}function lengthBytesUTF16(str){return str.length*2}function UTF32ToString(ptr){var i=0;var str="";while(1){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)return str;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}else{str+=String.fromCharCode(utf32)}}}function stringToUTF32(str,outPtr,maxBytesToWrite){if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647}if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023}HEAP32[outPtr>>2]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break}HEAP32[outPtr>>2]=0;return outPtr-startPtr}function lengthBytesUTF32(str){var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4}return len}function allocateUTF8OnStack(str){var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8Array(str,HEAP8,ret,size);return ret}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}if(!dontAddNull)HEAP8[buffer>>0]=0}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var STACK_BASE=8832,DYNAMIC_BASE=5251712,DYNAMICTOP_PTR=8640;var INITIAL_TOTAL_MEMORY=Module["TOTAL_MEMORY"]||16777216;if(Module["buffer"]){buffer=Module["buffer"]}else{buffer=new ArrayBuffer(INITIAL_TOTAL_MEMORY)}INITIAL_TOTAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback();continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){Module["dynCall_v"](func)}else{Module["dynCall_vi"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeExited=false;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(!Module["noFSInit"]&&!FS.init.initialized)FS.init();TTY.init();callRuntimeCallbacks(__ATINIT__)}function preMain(){FS.ignorePermissions=false;callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){runtimeExited=true}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var Math_abs=Math.abs;var Math_ceil=Math.ceil;var Math_floor=Math.floor;var Math_min=Math.min;var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}what+="";out(what);err(what);ABORT=true;EXITSTATUS=1;what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.";throw what}var memoryInitializer=null;var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}var tempDouble;var tempI64;__ATINIT__.push({func:function(){__GLOBAL__sub_I_bind_cpp()}});memoryInitializer="data:application/octet-stream;base64,AAAAAAAAAAAhAQAAcgEAACIBAAAzAQAAIgIAACMBAAAxAgAAJAEAACUBAAAsAQAAJgEAACkBAAAnAQAAKAEAAAAAAAABAAAAAgAAAAMAAAAqAQAAKwEAAAQAAAAFAAAABgAAAAcAAAAtAQAAMAEAAC4BAAAvAQAACAAAAAkAAAAKAAAACwAAADEBAAAyAQAADAAAAA0AAAAOAAAADwAAADQBAABTAQAANQEAAEQBAAA2AQAAPQEAADcBAAA6AQAAOAEAADkBAAAQAAAAEQAAABIAAAATAAAAOwEAADwBAAAUAAAAFQAAABYAAAAXAAAAPgEAAEEBAAA/AQAAQAEAABgAAAAZAAAAGgAAABsAAABCAQAAQwEAABwAAAAdAAAAHgAAAB8AAABFAQAATAEAAEYBAABJAQAARwEAAEgBAAAgAAAAIQAAACIAAAAjAAAASgEAAEsBAAAkAAAAJQAAACYAAAAnAAAATQEAAFABAABOAQAATwEAACgAAAApAAAAKgAAACsAAABRAQAAUgEAACwAAAAtAAAALgAAAC8AAABUAQAAYwEAAFUBAABcAQAAVgEAAFkBAABXAQAAWAEAADAAAAAxAAAAMgAAADMAAABaAQAAWwEAADQAAAA1AAAANgAAADcAAABdAQAAYAEAAF4BAABfAQAAOAAAADkAAAA6AAAAOwAAAGEBAABiAQAAPAAAAD0AAAA+AAAAPwAAAGQBAABrAQAAZQEAAGgBAABmAQAAZwEAAEAAAABBAAAAQgAAAEMAAABpAQAAagEAAEQAAABFAAAARgAAAEcAAABsAQAAbwEAAG0BAABuAQAASAAAAEkAAABKAAAASwAAAHABAABxAQAATAAAAE0AAABOAAAATwAAAHMBAACyAQAAdAEAAJMBAAB1AQAAhAEAAHYBAAB9AQAAdwEAAHoBAAB4AQAAeQEAAFAAAABRAAAAUgAAAFMAAAB7AQAAfAEAAFQAAABVAAAAVgAAAFcAAAB+AQAAgQEAAH8BAACAAQAAWAAAAFkAAABaAAAAWwAAAIIBAACDAQAAXAAAAF0AAABeAAAAXwAAAIUBAACMAQAAhgEAAIkBAACHAQAAiAEAAGAAAABhAAAAYgAAAGMAAACKAQAAiwEAAGQAAABlAAAAZgAAAGcAAACNAQAAkAEAAI4BAACPAQAAaAAAAGkAAABqAAAAawAAAJEBAACSAQAAbAAAAG0AAABuAAAAbwAAAJQBAACjAQAAlQEAAJwBAACWAQAAmQEAAJcBAACYAQAAcAAAAHEAAAByAAAAcwAAAJoBAACbAQAAdAAAAHUAAAB2AAAAdwAAAJ0BAACgAQAAngEAAJ8BAAB4AAAAeQAAAHoAAAB7AAAAoQEAAKIBAAB8AAAAfQAAAH4AAAB/AAAApAEAAKsBAAClAQAAqAEAAKYBAACnAQAAgAAAAIEAAACCAAAAgwAAAKkBAACqAQAAhAAAAIUAAACGAAAAhwAAAKwBAACvAQAArQEAAK4BAACIAAAAiQAAAIoAAACLAAAAsAEAALEBAACMAAAAjQAAAI4AAACPAAAAswEAAOMBAAC0AQAAxAEAADgCAAC1AQAAtgEAAL0BAAC3AQAAugEAALgBAAC5AQAAkAAAAJEAAACSAAAAkwAAALsBAAC8AQAAlAAAAJUAAACWAAAAlwAAAL4BAADBAQAAvwEAAMABAACYAAAAmQAAAJoAAACbAAAAwgEAAMMBAACcAAAAnQAAAJ4AAACfAAAAxQEAANQBAADGAQAAzQEAAMcBAADKAQAAyAEAAMkBAACgAAAAoQAAAKIAAACjAAAAywEAAMwBAACkAAAApQAAAKYAAACnAAAAzgEAANEBAADPAQAA0AEAAKgAAACpAAAAqgAAAKsAAADSAQAA0wEAAKwAAACtAAAArgAAAK8AAADVAQAA3AEAANYBAADZAQAA1wEAANgBAACwAAAAsQAAALIAAACzAAAA2gEAANsBAAC0AAAAtQAAALYAAAC3AAAA3QEAAOABAADeAQAA3wEAALgAAAC5AAAAugAAALsAAADhAQAA4gEAALwAAAC9AAAAvgAAAL8AAADkAQAAAwIAAOUBAAD0AQAA5gEAAO0BAADnAQAA6gEAAOgBAADpAQAAwAAAAMEAAADCAAAAwwAAAOsBAADsAQAAxAAAAMUAAADGAAAAxwAAAO4BAADxAQAA7wEAAPABAADIAAAAyQAAAMoAAADLAAAA8gEAAPMBAADMAAAAzQAAAM4AAADPAAAA9QEAAPwBAAD2AQAA+QEAAPcBAAD4AQAA0AAAANEAAADSAAAA0wAAAPoBAAD7AQAA1AAAANUAAADWAAAA1wAAAP0BAAAAAgAA/gEAAP8BAADYAAAA2QAAANoAAADbAAAAAQIAAAICAADcAAAA3QAAAN4AAADfAAAABAIAABMCAAAFAgAADAIAAAYCAAAJAgAABwIAAAgCAADgAAAA4QAAAOIAAADjAAAACgIAAAsCAADkAAAA5QAAAOYAAADnAAAADQIAABACAAAOAgAADwIAAOgAAADpAAAA6gAAAOsAAAARAgAAEgIAAOwAAADtAAAA7gAAAO8AAAAUAgAAGwIAABUCAAAYAgAAFgIAABcCAADwAAAA8QAAAPIAAADzAAAAGQIAABoCAAD0AAAA9QAAAPYAAAD3AAAAHAIAAB8CAAAdAgAAHgIAAPgAAAD5AAAA+gAAAPsAAAAgAgAAIQIAAPwAAAD9AAAA/gAAAP8AAAAjAgAAKgIAACQCAAAnAgAAJQIAACYCAAAAAQAAAQEAAAIBAAADAQAAKAIAACkCAAAEAQAABQEAAAYBAAAHAQAAKwIAAC4CAAAsAgAALQIAAAgBAAAJAQAACgEAAAsBAAAvAgAAMAIAAAwBAAANAQAADgEAAA8BAAAyAgAANQIAADMCAAA0AgAAEAEAABEBAAASAQAAEwEAADYCAAA3AgAAFAEAABUBAAAWAQAAFwEAADkCAAA8AgAAOgIAADsCAAAYAQAAGQEAABoBAAAbAQAAPQIAAD4CAAAcAQAAHQEAAB4BAAAfAQAAAAAAAAAAAAAhAAAAMAAAACIAAAApAAAAIwAAACYAAAAkAAAAJQAAAAAAAAABAAAAAgAAAAMAAAAnAAAAKAAAAAQAAAAFAAAABgAAAAcAAAAqAAAALQAAACsAAAAsAAAACAAAAAkAAAAKAAAACwAAAC4AAAAvAAAADAAAAA0AAAAOAAAADwAAADEAAAA4AAAAMgAAADUAAAAzAAAANAAAABAAAAARAAAAEgAAABMAAAA2AAAANwAAABQAAAAVAAAAFgAAABcAAAA5AAAAPAAAADoAAAA7AAAAGAAAABkAAAAaAAAAGwAAAD0AAAA+AAAAHAAAAB0AAAAeAAAAHwAAAAAAAAAAAAAAEAAAABEAAAASAAAAAAAAAAgAAAAHAAAACQAAAAYAAAAKAAAABQAAAAsAAAAEAAAADAAAAAMAAAANAAAAAgAAAA4AAAABAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAA0AAAAPAAAAEQAAABMAAAAXAAAAGwAAAB8AAAAjAAAAKwAAADMAAAA7AAAAQwAAAFMAAABjAAAAcwAAAIMAAACjAAAAwwAAAOMAAAACAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAcAAAAJAAAADQAAABEAAAAZAAAAIQAAADEAAABBAAAAYQAAAIEAAADBAAAAAQEAAIEBAAABAgAAAQMAAAEEAAABBgAAAQgAAAEMAAABEAAAARgAAAEgAAABMAAAAUAAAAFgAAAAAAAAAAAAABEACgAREREAAAAABQAAAAAAAAkAAAAACwAAAAAAAAAAEQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERERAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAABEACgoREREACgAAAgAJCwAAAAkACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAADQAAAAQNAAAAAAkOAAAAAAAOAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAA8AAAAADwAAAAAJEAAAAAAAEAAAEAAAEgAAABISEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAEhISAAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAACgAAAAAKAAAAAAkLAAAAAAALAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAADAAAAAAJDAAAAAAADAAADAAAMDEyMzQ1Njc4OUFCQ0RFRgUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAWBsAAAAEAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAr/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAA8FwAAABIAAFsXAAAAEgAAehcAAAASAACZFwAAABIAALgXAAAAEgAA1xcAAAASAAD2FwAAABIAABUYAAAAEgAANBgAAAASAABTGAAAABIAAHIYAAAAEgAAkRgAAAASAACwGAAAbBIAAMMYAAAAAAAAAQAAAOAPAAAAAAAAABIAAAUZAABsEgAAKxkAAAAAAAABAAAA4A8AAAAAAABsEgAAbRkAAAAAAAABAAAA4A8AAAAAAABsEgAArBkAAAAAAAABAAAA4A8AAAAAAABsEgAA6xkAAAAAAAABAAAA4A8AAAAAAAAoEgAAfRoAAFgQAAAAAAAAKBIAACoaAABoEAAAAAAAAAASAABLGgAAKBIAAFgaAABIEAAAAAAAACgSAACfGgAAWBAAAAAAAABQEgAAxxoAAFASAADJGgAAUBIAAMsaAABQEgAAzRoAAFASAADPGgAAUBIAANEaAABQEgAA0xoAAFASAADVGgAAUBIAANcaAABQEgAA2RoAAFASAADbGgAAUBIAAN0aAABQEgAA3xoAACgSAADhGgAASBAAAAAAAABADgAAQA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkB8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASBAAAAEAAAACAAAAAwAAAAQAAAADAAAAAQAAAAEAAAABAAAAAAAAAHAQAAABAAAABQAAAAMAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAAAAACAEAAAAQAAAAYAAAADAAAABAAAAAQAAAAAAAAA+BAAAAEAAAAHAAAAAwAAAAQAAAADAAAAAwAAAAMAAAADAAAAQmVnaW4gZ2FtZQotLS0tLS0tLS0tLS0tLS0tAERBVEEAemFjay5iY20AZm9udC5wbmcAYWRlbGwucGN4AHRpbGUucGN4AG91dC5rdG0AVHJpICVkClZlcnRleCAlZAp2Ymxhbms6ICVkCnZyYW0gOiAleABDeWNsZSA6JWQAQmVnaW4KLS0tLS0tLS0tLS0tLS0tLQBEZW1vAFRleHR1cmUgbG9hZGluZyBmYWlsZWQgOiAlcwoAJXMlcwB0ZXggIDogJXMlcwoAV2FybmluZyBmb3JtYXQgdW5rbm93biEAQkNNAGZpbGVuYW1lL2ZvbGRlciAgOiAlcy8lcwoAYnl0ZSA6ICVkCgAlcyAlZCAlZCAleAoAZXJyb3IgdGFyIDogJXMKAHJiAGVycm9yOiAlcyAldSAldQoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4AcndhAHZvaWQAYm9vbABjaGFyAHNpZ25lZCBjaGFyAHVuc2lnbmVkIGNoYXIAc2hvcnQAdW5zaWduZWQgc2hvcnQAaW50AHVuc2lnbmVkIGludABsb25nAHVuc2lnbmVkIGxvbmcAZmxvYXQAZG91YmxlAHN0ZDo6c3RyaW5nAHN0ZDo6YmFzaWNfc3RyaW5nPHVuc2lnbmVkIGNoYXI+AHN0ZDo6d3N0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBlbXNjcmlwdGVuOjp2YWwAZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDhfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDhfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MTZfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDE2X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQzMl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxmbG9hdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8ZG91YmxlPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxsb25nIGRvdWJsZT4ATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJZUVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWRFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lmRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbUVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWxFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lqRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaUVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXRFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lzRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWFFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ljRUUATjEwZW1zY3JpcHRlbjN2YWxFAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0lEaU5TXzExY2hhcl90cmFpdHNJRGlFRU5TXzlhbGxvY2F0b3JJRGlFRUVFAE5TdDNfXzIyMV9fYmFzaWNfc3RyaW5nX2NvbW1vbklMYjFFRUUATlN0M19fMjEyYmFzaWNfc3RyaW5nSURzTlNfMTFjaGFyX3RyYWl0c0lEc0VFTlNfOWFsbG9jYXRvcklEc0VFRUUATlN0M19fMjEyYmFzaWNfc3RyaW5nSXdOU18xMWNoYXJfdHJhaXRzSXdFRU5TXzlhbGxvY2F0b3JJd0VFRUUATlN0M19fMjEyYmFzaWNfc3RyaW5nSWhOU18xMWNoYXJfdHJhaXRzSWhFRU5TXzlhbGxvY2F0b3JJaEVFRUUATlN0M19fMjEyYmFzaWNfc3RyaW5nSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAU3Q5dHlwZV9pbmZvAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQBOMTBfX2N4eGFiaXYxMTdfX2NsYXNzX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTIzX19mdW5kYW1lbnRhbF90eXBlX2luZm9FAHYAYgBjAGgAYQBzAHQAaQBqAGwAbQBmAGQATjEwX19jeHhhYml2MTIxX192bWlfY2xhc3NfdHlwZV9pbmZvRQ==";var tempDoublePtr=8816;function demangle(func){return func}function demangleAll(text){var regex=/\b__Z[\w\d_]+/g;return text.replace(regex,function(x){var y=demangle(x);return x===y?x:y+" ["+x+"]"})}function jsStackTrace(){var err=new Error;if(!err.stack){try{throw new Error}catch(e){err=e}if(!err.stack){return"(no stack trace available)"}}return err.stack.toString()}function stackTrace(){var js=jsStackTrace();if(Module["extraStackTrace"])js+="\n"+Module["extraStackTrace"]();return demangleAll(js)}function ___setErrNo(value){if(Module["___errno_location"])HEAP32[Module["___errno_location"]()>>2]=value;return value}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};var PATH_FS={resolve:function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){return""}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=PATH.normalizeArray(resolvedPath.split("/").filter(function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."},relative:function(from,to){from=PATH_FS.resolve(from).substr(1);to=PATH_FS.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}};var TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(43)}stream.tty=tty;stream.seekable=false},close:function(stream){stream.tty.ops.flush(stream.tty)},flush:function(stream){stream.tty.ops.flush(stream.tty)},read:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(60)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(60)}try{for(var i=0;i<length;i++){stream.tty.ops.put_char(stream.tty,buffer[offset+i])}}catch(e){throw new FS.ErrnoError(29)}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if(ENVIRONMENT_IS_NODE){var BUFSIZE=256;var buf=Buffer.alloc?Buffer.alloc(BUFSIZE):new Buffer(BUFSIZE);var bytesRead=0;try{bytesRead=nodeFS.readSync(process.stdin.fd,buf,0,BUFSIZE,null)}catch(e){if(e.toString().indexOf("EOF")!=-1)bytesRead=0;else throw e}if(bytesRead>0){result=buf.slice(0,bytesRead).toString("utf-8")}else{result=null}}else if(typeof window!="undefined"&&typeof window.prompt=="function"){result=window.prompt("Input: ");if(result!==null){result+="\n"}}else if(typeof readline=="function"){result=readline();if(result!==null){result+="\n"}}if(!result){return null}tty.input=intArrayFromString(result,true)}return tty.input.shift()},put_char:function(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}}},default_tty1_ops:{put_char:function(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};var MEMFS={ops_table:null,mount:function(mount){return MEMFS.createNode(null,"/",16384|511,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(63)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node}return node},getFileDataAsRegularArray:function(node){if(node.contents&&node.contents.subarray){var arr=[];for(var i=0;i<node.usedBytes;++i)arr.push(node.contents[i]);return arr}return node.contents},getFileDataAsTypedArray:function(node){if(!node.contents)return new Uint8Array;if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage:function(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)|0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0);return},resizeFileStorage:function(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0;return}if(!node.contents||node.contents.subarray){var oldContents=node.contents;node.contents=new Uint8Array(newSize);if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize;return}if(!node.contents)node.contents=[];if(node.contents.length>newSize)node.contents.length=newSize;else while(node.contents.length<newSize)node.contents.push(0);node.usedBytes=newSize},node_ops:{getattr:function(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr:function(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup:function(parent,name){throw FS.genericErrors[44]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(55)}}}delete old_node.parent.contents[old_node.name];old_node.name=new_name;new_dir.contents[new_name]=old_node;old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name]},rmdir:function(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(55)}delete parent.contents[name]},readdir:function(node){var entries=[".",".."];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink:function(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(28)}return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write:function(stream,buffer,offset,length,position,canOwn){if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=buffer.slice(offset,offset+length);node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray)node.contents.set(buffer.subarray(offset,offset+length),position);else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(28)}return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,buffer,offset,length,position,prot,flags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&contents.buffer===buffer.buffer){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<stream.node.usedBytes){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;var fromHeap=buffer.buffer==HEAP8.buffer;ptr=_malloc(length);if(!ptr){throw new FS.ErrnoError(48)}(fromHeap?HEAP8:buffer).set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(mmapFlags&2){return 0}var bytesWritten=MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:false,ignorePermissions:true,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(path,opts){path=PATH_FS.resolve(FS.cwd(),path);opts=opts||{};if(!path)return{path:"",node:null};var defaults={follow_mount:true,recurse_count:0};for(var key in defaults){if(opts[key]===undefined){opts[key]=defaults[key]}}if(opts.recurse_count>8){throw new FS.ErrnoError(32)}var parts=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),false);var current=FS.root;var current_path="/";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count});current=lookup.node;if(count++>40){throw new FS.ErrnoError(32)}}}}return{path:current_path,node:current}},getPath:function(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!=="/"?mount+"/"+path:mount+path}path=path?node.name+"/"+path:node.name;node=node.parent}},hashName:function(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:function(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode:function(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode:function(parent,name){var errCode=FS.mayLookup(parent);if(errCode){throw new FS.ErrnoError(errCode,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode:function(parent,name,mode,rdev){if(!FS.FSNode){FS.FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};FS.FSNode.prototype={};var readMode=292|73;var writeMode=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode:function(node){FS.hashRemoveNode(node)},isRoot:function(node){return node===node.parent},isMountpoint:function(node){return!!node.mounted},isFile:function(mode){return(mode&61440)===32768},isDir:function(mode){return(mode&61440)===16384},isLink:function(mode){return(mode&61440)===40960},isChrdev:function(mode){return(mode&61440)===8192},isBlkdev:function(mode){return(mode&61440)===24576},isFIFO:function(mode){return(mode&61440)===4096},isSocket:function(mode){return(mode&49152)===49152},flagModes:{"r":0,"rs":1052672,"r+":2,"w":577,"wx":705,"xw":705,"w+":578,"wx+":706,"xw+":706,"a":1089,"ax":1217,"xa":1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(str){var flags=FS.flagModes[str];if(typeof flags==="undefined"){throw new Error("Unknown file open mode: "+str)}return flags},flagsToPermissionString:function(flag){var perms=["r","w","rw"][flag&3];if(flag&512){perms+="w"}return perms},nodePermissions:function(node,perms){if(FS.ignorePermissions){return 0}if(perms.indexOf("r")!==-1&&!(node.mode&292)){return 2}else if(perms.indexOf("w")!==-1&&!(node.mode&146)){return 2}else if(perms.indexOf("x")!==-1&&!(node.mode&73)){return 2}return 0},mayLookup:function(dir){var errCode=FS.nodePermissions(dir,"x");if(errCode)return errCode;if(!dir.node_ops.lookup)return 2;return 0},mayCreate:function(dir,name){try{var node=FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,"wx")},mayDelete:function(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,"wx");if(errCode){return errCode}if(isdir){if(!FS.isDir(node.mode)){return 54}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return 10}}else{if(FS.isDir(node.mode)){return 31}}return 0},mayOpen:function(node,flags){if(!node){return 44}if(FS.isLink(node.mode)){return 32}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!=="r"||flags&512){return 31}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd:function(fd_start,fd_end){fd_start=fd_start||0;fd_end=fd_end||FS.MAX_OPEN_FDS;for(var fd=fd_start;fd<=fd_end;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(33)},getStream:function(fd){return FS.streams[fd]},createStream:function(stream,fd_start,fd_end){if(!FS.FSStream){FS.FSStream=function(){};FS.FSStream.prototype={};Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}})}var newStream=new FS.FSStream;for(var p in stream){newStream[p]=stream[p]}stream=newStream;var fd=FS.nextfd(fd_start,fd_end);stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream:function(fd){FS.streams[fd]=null},chrdev_stream_ops:{open:function(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek:function(){throw new FS.ErrnoError(70)}},major:function(dev){return dev>>8},minor:function(dev){return dev&255},makedev:function(ma,mi){return ma<<8|mi},registerDevice:function(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:function(dev){return FS.devices[dev]},getMounts:function(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs:function(populate,callback){if(typeof populate==="function"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){err("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work")}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(errCode){FS.syncFSRequests--;return callback(errCode)}function done(errCode){if(errCode){if(!done.errored){done.errored=true;return doCallback(errCode)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(function(mount){if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount:function(type,opts,mountpoint){var root=mountpoint==="/";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(10)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount:function(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(28)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(function(hash){var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.indexOf(current.mount)!==-1){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup:function(parent,name){return parent.node_ops.lookup(parent,name)},mknod:function(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name==="."||name===".."){throw new FS.ErrnoError(28)}var errCode=FS.mayCreate(parent,name);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(63)}return parent.node_ops.mknod(parent,name,mode,dev)},create:function(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir:function(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree:function(path,mode){var dirs=path.split("/");var d="";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+="/"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev:function(path,mode,dev){if(typeof dev==="undefined"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink:function(oldpath,newpath){if(!PATH_FS.resolve(oldpath)){throw new FS.ErrnoError(44)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var newname=PATH.basename(newpath);var errCode=FS.mayCreate(parent,newname);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(63)}return parent.node_ops.symlink(parent,newname,oldpath)},rename:function(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;try{lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node}catch(e){throw new FS.ErrnoError(10)}if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(75)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!=="."){throw new FS.ErrnoError(28)}relative=PATH_FS.relative(new_path,old_dirname);if(relative.charAt(0)!=="."){throw new FS.ErrnoError(55)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode){throw new FS.ErrnoError(errCode)}errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(errCode){throw new FS.ErrnoError(errCode)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(63)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(10)}if(new_dir!==old_dir){errCode=FS.nodePermissions(old_dir,"w");if(errCode){throw new FS.ErrnoError(errCode)}}try{if(FS.trackingDelegate["willMovePath"]){FS.trackingDelegate["willMovePath"](old_path,new_path)}}catch(e){err("FS.trackingDelegate['willMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}try{if(FS.trackingDelegate["onMovePath"])FS.trackingDelegate["onMovePath"](old_path,new_path)}catch(e){err("FS.trackingDelegate['onMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}},rmdir:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,true);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}try{if(FS.trackingDelegate["willDeletePath"]){FS.trackingDelegate["willDeletePath"](path)}}catch(e){err("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node);try{if(FS.trackingDelegate["onDeletePath"])FS.trackingDelegate["onDeletePath"](path)}catch(e){err("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readdir:function(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(54)}return node.node_ops.readdir(node)},unlink:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,false);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}try{if(FS.trackingDelegate["willDeletePath"]){FS.trackingDelegate["willDeletePath"](path)}}catch(e){err("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.unlink(parent,name);FS.destroyNode(node);try{if(FS.trackingDelegate["onDeletePath"])FS.trackingDelegate["onDeletePath"](path)}catch(e){err("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readlink:function(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(44)}if(!link.node_ops.readlink){throw new FS.ErrnoError(28)}return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:function(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(44)}if(!node.node_ops.getattr){throw new FS.ErrnoError(63)}return node.node_ops.getattr(node)},lstat:function(path){return FS.stat(path,true)},chmod:function(path,mode,dontFollow){var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod:function(path,mode){FS.chmod(path,mode,true)},fchmod:function(fd,mode){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}FS.chmod(stream.node,mode)},chown:function(path,uid,gid,dontFollow){var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:function(path,uid,gid){FS.chown(path,uid,gid,true)},fchown:function(fd,uid,gid){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}FS.chown(stream.node,uid,gid)},truncate:function(path,len){if(len<0){throw new FS.ErrnoError(28)}var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(31)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(28)}var errCode=FS.nodePermissions(node,"w");if(errCode){throw new FS.ErrnoError(errCode)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:function(fd,len){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(28)}FS.truncate(stream.node,len)},utime:function(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:function(path,flags,mode,fd_start,fd_end){if(path===""){throw new FS.ErrnoError(44)}flags=typeof flags==="string"?FS.modeStringToFlags(flags):flags;mode=typeof mode==="undefined"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path==="object"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(20)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(44)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}if(!created){var errCode=FS.mayOpen(node,flags);if(errCode){throw new FS.ErrnoError(errCode)}}if(flags&512){FS.truncate(node,0)}flags&=~(128|512);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false},fd_start,fd_end);if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module["logReadFiles"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1;err("FS.trackingDelegate error on read file: "+path)}}try{if(FS.trackingDelegate["onOpenFile"]){var trackingFlags=0;if((flags&2097155)!==1){trackingFlags|=FS.tracking.openFlags.READ}if((flags&2097155)!==0){trackingFlags|=FS.tracking.openFlags.WRITE}FS.trackingDelegate["onOpenFile"](path,trackingFlags)}}catch(e){err("FS.trackingDelegate['onOpenFile']('"+path+"', flags) threw an exception: "+e.message)}return stream},close:function(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:function(stream){return stream.fd===null},llseek:function(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(70)}if(whence!=0&&whence!=1&&whence!=2){throw new FS.ErrnoError(28)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read:function(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.read){throw new FS.ErrnoError(28)}var seeking=typeof position!=="undefined";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write:function(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.write){throw new FS.ErrnoError(28)}if(stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!=="undefined";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;try{if(stream.path&&FS.trackingDelegate["onWriteToFile"])FS.trackingDelegate["onWriteToFile"](stream.path)}catch(e){err("FS.trackingDelegate['onWriteToFile']('"+stream.path+"') threw an exception: "+e.message)}return bytesWritten},allocate:function(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(offset<0||length<=0){throw new FS.ErrnoError(28)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(43)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(138)}stream.stream_ops.allocate(stream,offset,length)},mmap:function(stream,buffer,offset,length,position,prot,flags){if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2){throw new FS.ErrnoError(2)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(2)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(43)}return stream.stream_ops.mmap(stream,buffer,offset,length,position,prot,flags)},msync:function(stream,buffer,offset,length,mmapFlags){if(!stream||!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:function(stream){return 0},ioctl:function(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(59)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:function(path,opts){opts=opts||{};opts.flags=opts.flags||"r";opts.encoding=opts.encoding||"binary";if(opts.encoding!=="utf8"&&opts.encoding!=="binary"){throw new Error('Invalid encoding type "'+opts.encoding+'"')}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding==="utf8"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding==="binary"){ret=buf}FS.close(stream);return ret},writeFile:function(path,data,opts){opts=opts||{};opts.flags=opts.flags||"w";var stream=FS.open(path,opts.flags,opts.mode);if(typeof data==="string"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error("Unsupported data type")}FS.close(stream)},cwd:function(){return FS.currentPath},chdir:function(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(44)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(54)}var errCode=FS.nodePermissions(lookup.node,"x");if(errCode){throw new FS.ErrnoError(errCode)}FS.currentPath=lookup.path},createDefaultDirectories:function(){FS.mkdir("/tmp");FS.mkdir("/home");FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev");FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(stream,buffer,offset,length,pos){return length}});FS.mkdev("/dev/null",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev("/dev/tty",FS.makedev(5,0));FS.mkdev("/dev/tty1",FS.makedev(6,0));var random_device;if(typeof crypto==="object"&&typeof crypto["getRandomValues"]==="function"){var randomBuffer=new Uint8Array(1);random_device=function(){crypto.getRandomValues(randomBuffer);return randomBuffer[0]}}else if(ENVIRONMENT_IS_NODE){try{var crypto_module=require("crypto");random_device=function(){return crypto_module["randomBytes"](1)[0]}}catch(e){}}else{}if(!random_device){random_device=function(){abort("random_device")}}FS.createDevice("/dev","random",random_device);FS.createDevice("/dev","urandom",random_device);FS.mkdir("/dev/shm");FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc");FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd");FS.mount({mount:function(){var node=FS.createNode("/proc/self","fd",16384|511,73);node.node_ops={lookup:function(parent,name){var fd=+name;var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);var ret={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return stream.path}}};ret.parent=ret;return ret}};return node}},{},"/proc/self/fd")},createStandardStreams:function(){if(Module["stdin"]){FS.createDevice("/dev","stdin",Module["stdin"])}else{FS.symlink("/dev/tty","/dev/stdin")}if(Module["stdout"]){FS.createDevice("/dev","stdout",null,Module["stdout"])}else{FS.symlink("/dev/tty","/dev/stdout")}if(Module["stderr"]){FS.createDevice("/dev","stderr",null,Module["stderr"])}else{FS.symlink("/dev/tty1","/dev/stderr")}var stdin=FS.open("/dev/stdin","r");var stdout=FS.open("/dev/stdout","w");var stderr=FS.open("/dev/stderr","w")},ensureErrnoError:function(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.node=node;this.setErrno=function(errno){this.errno=errno};this.setErrno(errno);this.message="FS error"};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[44].forEach(function(code){FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack="<generic error, no stack>"})},staticInit:function(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},"/");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={"MEMFS":MEMFS}},init:function(input,output,error){FS.init.initialized=true;FS.ensureErrnoError();Module["stdin"]=input||Module["stdin"];Module["stdout"]=output||Module["stdout"];Module["stderr"]=error||Module["stderr"];FS.createStandardStreams()},quit:function(){FS.init.initialized=false;var fflush=Module["_fflush"];if(fflush)fflush(0);for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},getMode:function(canRead,canWrite){var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode},joinPath:function(parts,forceRelative){var path=PATH.join.apply(null,parts);if(forceRelative&&path[0]=="/")path=path.substr(1);return path},absolutePath:function(relative,base){return PATH_FS.resolve(base,relative)},standardizePath:function(path){return PATH.normalize(path)},findObject:function(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(ret.exists){return ret.object}else{___setErrNo(ret.error);return null}},analyzePath:function(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path==="/"}catch(e){ret.error=e.errno}return ret},createFolder:function(parent,name,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(canRead,canWrite);return FS.mkdir(path,mode)},createPath:function(parent,path,canRead,canWrite){parent=typeof parent==="string"?parent:FS.getPath(parent);var parts=path.split("/").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile:function(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:function(parent,name,data,canRead,canWrite,canOwn){var path=name?PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name):parent;var mode=FS.getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data==="string"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,"w");FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice:function(parent,name,input,output){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open:function(stream){stream.seekable=false},close:function(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read:function(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},createLink:function(parent,name,target,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);return FS.symlink(target,path)},forceLoadFile:function(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;var success=true;if(typeof XMLHttpRequest!=="undefined"){throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.")}else if(read_){try{obj.contents=intArrayFromString(read_(obj.url),true);obj.usedBytes=obj.contents.length}catch(e){success=false}}else{throw new Error("Cannot load without read() or XMLHttpRequest.")}if(!success)___setErrNo(29);return success},createLazyFile:function(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open("HEAD",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);var datalength=Number(xhr.getResponseHeader("Content-length"));var header;var hasByteServing=(header=xhr.getResponseHeader("Accept-Ranges"))&&header==="bytes";var usesGzip=(header=xhr.getResponseHeader("Content-Encoding"))&&header==="gzip";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=function(from,to){if(from>to)throw new Error("invalid range ("+from+", "+to+") or no bytes requested!");if(to>datalength-1)throw new Error("only "+datalength+" bytes available! programmer error!");var xhr=new XMLHttpRequest;xhr.open("GET",url,false);if(datalength!==chunkSize)xhr.setRequestHeader("Range","bytes="+from+"-"+to);if(typeof Uint8Array!="undefined")xhr.responseType="arraybuffer";if(xhr.overrideMimeType){xhr.overrideMimeType("text/plain; charset=x-user-defined")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}else{return intArrayFromString(xhr.responseText||"",true)}};var lazyArray=this;lazyArray.setDataGetter(function(chunkNum){var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]==="undefined"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]==="undefined")throw new Error("doXHR failed!");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;out("LazyFiles on gzip forces download of the whole file when length is accessed")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!=="undefined"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(function(key){var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){if(!FS.forceLoadFile(node)){throw new FS.ErrnoError(29)}return fn.apply(null,arguments)}});stream_ops.read=function stream_ops_read(stream,buffer,offset,length,position){if(!FS.forceLoadFile(node)){throw new FS.ErrnoError(29)}var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size};node.stream_ops=stream_ops;return node},createPreloadedFile:function(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish){Browser.init();var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency("cp "+fullname);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}var handled=false;Module["preloadPlugins"].forEach(function(plugin){if(handled)return;if(plugin["canHandle"](fullname)){plugin["handle"](byteArray,fullname,finish,function(){if(onerror)onerror();removeRunDependency(dep)});handled=true}});if(!handled)finish(byteArray)}addRunDependency(dep);if(typeof url=="string"){Browser.asyncLoad(url,function(byteArray){processData(byteArray)},onerror)}else{processData(url)}},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=function openRequest_onupgradeneeded(){out("creating db");var db=openRequest.result;db.createObjectStore(FS.DB_STORE_NAME)};openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;var transaction=db.transaction([FS.DB_STORE_NAME],"readwrite");var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var putRequest=files.put(FS.analyzePath(path).object.contents,path);putRequest.onsuccess=function putRequest_onsuccess(){ok++;if(ok+fail==total)finish()};putRequest.onerror=function putRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror},loadFilesFromDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=onerror;openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;try{var transaction=db.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){onerror(e);return}var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var getRequest=files.get(path);getRequest.onsuccess=function getRequest_onsuccess(){if(FS.analyzePath(path).exists){FS.unlink(path)}FS.createDataFile(PATH.dirname(path),PATH.basename(path),getRequest.result,true,true,true);ok++;if(ok+fail==total)finish()};getRequest.onerror=function getRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror}};function _emscripten_set_main_loop_timing(mode,value){Browser.mainLoop.timingMode=mode;Browser.mainLoop.timingValue=value;if(!Browser.mainLoop.func){return 1}if(mode==0){Browser.mainLoop.scheduler=function Browser_mainLoop_scheduler_setTimeout(){var timeUntilNextTick=Math.max(0,Browser.mainLoop.tickStartTime+value-_emscripten_get_now())|0;setTimeout(Browser.mainLoop.runner,timeUntilNextTick)};Browser.mainLoop.method="timeout"}else if(mode==1){Browser.mainLoop.scheduler=function Browser_mainLoop_scheduler_rAF(){Browser.requestAnimationFrame(Browser.mainLoop.runner)};Browser.mainLoop.method="rAF"}else if(mode==2){if(typeof setImmediate==="undefined"){var setImmediates=[];var emscriptenMainLoopMessageId="setimmediate";var Browser_setImmediate_messageHandler=function(event){if(event.data===emscriptenMainLoopMessageId||event.data.target===emscriptenMainLoopMessageId){event.stopPropagation();setImmediates.shift()()}};addEventListener("message",Browser_setImmediate_messageHandler,true);setImmediate=function Browser_emulated_setImmediate(func){setImmediates.push(func);if(ENVIRONMENT_IS_WORKER){if(Module["setImmediates"]===undefined)Module["setImmediates"]=[];Module["setImmediates"].push(func);postMessage({target:emscriptenMainLoopMessageId})}else postMessage(emscriptenMainLoopMessageId,"*")}}Browser.mainLoop.scheduler=function Browser_mainLoop_scheduler_setImmediate(){setImmediate(Browser.mainLoop.runner)};Browser.mainLoop.method="immediate"}return 0}function _emscripten_get_now(){abort()}function _emscripten_webgl_do_commit_frame(){if(!GL.currentContext||!GL.currentContext.GLctx){return-3}if(GL.currentContext.defaultFbo){GL.blitOffscreenFramebuffer(GL.currentContext);return 0}if(!GL.currentContext.attributes.explicitSwapControl){return-3}return 0}function _emscripten_webgl_commit_frame(){return _emscripten_webgl_do_commit_frame()}function _emscripten_set_main_loop(func,fps,simulateInfiniteLoop,arg,noSetTiming){noExitRuntime=true;assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.");Browser.mainLoop.func=func;Browser.mainLoop.arg=arg;var browserIterationFunc;if(typeof arg!=="undefined"){browserIterationFunc=function(){Module["dynCall_vi"](func,arg)}}else{browserIterationFunc=function(){Module["dynCall_v"](func)}}var thisMainLoopId=Browser.mainLoop.currentlyRunningMainloop;Browser.mainLoop.runner=function Browser_mainLoop_runner(){if(ABORT)return;if(Browser.mainLoop.queue.length>0){var start=Date.now();var blocker=Browser.mainLoop.queue.shift();blocker.func(blocker.arg);if(Browser.mainLoop.remainingBlockers){var remaining=Browser.mainLoop.remainingBlockers;var next=remaining%1==0?remaining-1:Math.floor(remaining);if(blocker.counted){Browser.mainLoop.remainingBlockers=next}else{next=next+.5;Browser.mainLoop.remainingBlockers=(8*remaining+next)/9}}console.log('main loop blocker "'+blocker.name+'" took '+(Date.now()-start)+" ms");Browser.mainLoop.updateStatus();if(thisMainLoopId<Browser.mainLoop.currentlyRunningMainloop)return;setTimeout(Browser.mainLoop.runner,0);return}if(thisMainLoopId<Browser.mainLoop.currentlyRunningMainloop)return;Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0;if(Browser.mainLoop.timingMode==1&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0){Browser.mainLoop.scheduler();return}else if(Browser.mainLoop.timingMode==0){Browser.mainLoop.tickStartTime=_emscripten_get_now()}GL.newRenderingFrameStarted();Browser.mainLoop.runIter(browserIterationFunc);if(thisMainLoopId<Browser.mainLoop.currentlyRunningMainloop)return;if(typeof SDL==="object"&&SDL.audio&&SDL.audio.queueNewAudioData)SDL.audio.queueNewAudioData();Browser.mainLoop.scheduler()};if(!noSetTiming){if(fps&&fps>0)_emscripten_set_main_loop_timing(0,1e3/fps);else _emscripten_set_main_loop_timing(1,1);Browser.mainLoop.scheduler()}if(simulateInfiniteLoop){throw"unwind"}}var Browser={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null;Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var timingMode=Browser.mainLoop.timingMode;var timingValue=Browser.mainLoop.timingValue;var func=Browser.mainLoop.func;Browser.mainLoop.func=null;_emscripten_set_main_loop(func,0,false,Browser.mainLoop.arg,true);_emscripten_set_main_loop_timing(timingMode,timingValue);Browser.mainLoop.scheduler()},updateStatus:function(){if(Module["setStatus"]){var message=Module["statusMessage"]||"Please wait...";var remaining=Browser.mainLoop.remainingBlockers;var expected=Browser.mainLoop.expectedBlockers;if(remaining){if(remaining<expected){Module["setStatus"](message+" ("+(expected-remaining)+"/"+expected+")")}else{Module["setStatus"](message)}}else{Module["setStatus"]("")}}},runIter:function(func){if(ABORT)return;if(Module["preMainLoop"]){var preRet=Module["preMainLoop"]();if(preRet===false){return}}try{func()}catch(e){if(e instanceof ExitStatus){return}else{if(e&&typeof e==="object"&&e.stack)err("exception thrown: "+[e,e.stack]);throw e}}if(Module["postMainLoop"])Module["postMainLoop"]()}},isFullscreen:false,pointerLock:false,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(!Module["preloadPlugins"])Module["preloadPlugins"]=[];if(Browser.initted)return;Browser.initted=true;try{new Blob;Browser.hasBlobConstructor=true}catch(e){Browser.hasBlobConstructor=false;console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Browser.BlobBuilder=typeof MozBlobBuilder!="undefined"?MozBlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:!Browser.hasBlobConstructor?console.log("warning: no BlobBuilder"):null;Browser.URLObject=typeof window!="undefined"?window.URL?window.URL:window.webkitURL:undefined;if(!Module.noImageDecoding&&typeof Browser.URLObject==="undefined"){console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available.");Module.noImageDecoding=true}var imagePlugin={};imagePlugin["canHandle"]=function imagePlugin_canHandle(name){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(name)};imagePlugin["handle"]=function imagePlugin_handle(byteArray,name,onload,onerror){var b=null;if(Browser.hasBlobConstructor){try{b=new Blob([byteArray],{type:Browser.getMimetype(name)});if(b.size!==byteArray.length){b=new Blob([new Uint8Array(byteArray).buffer],{type:Browser.getMimetype(name)})}}catch(e){warnOnce("Blob constructor present but fails: "+e+"; falling back to blob builder")}}if(!b){var bb=new Browser.BlobBuilder;bb.append(new Uint8Array(byteArray).buffer);b=bb.getBlob()}var url=Browser.URLObject.createObjectURL(b);var img=new Image;img.onload=function img_onload(){assert(img.complete,"Image "+name+" could not be decoded");var canvas=document.createElement("canvas");canvas.width=img.width;canvas.height=img.height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);Module["preloadedImages"][name]=canvas;Browser.URLObject.revokeObjectURL(url);if(onload)onload(byteArray)};img.onerror=function img_onerror(event){console.log("Image "+url+" could not be decoded");if(onerror)onerror()};img.src=url};Module["preloadPlugins"].push(imagePlugin);var audioPlugin={};audioPlugin["canHandle"]=function audioPlugin_canHandle(name){return!Module.noAudioDecoding&&name.substr(-4)in{".ogg":1,".wav":1,".mp3":1}};audioPlugin["handle"]=function audioPlugin_handle(byteArray,name,onload,onerror){var done=false;function finish(audio){if(done)return;done=true;Module["preloadedAudios"][name]=audio;if(onload)onload(byteArray)}function fail(){if(done)return;done=true;Module["preloadedAudios"][name]=new Audio;if(onerror)onerror()}if(Browser.hasBlobConstructor){try{var b=new Blob([byteArray],{type:Browser.getMimetype(name)})}catch(e){return fail()}var url=Browser.URLObject.createObjectURL(b);var audio=new Audio;audio.addEventListener("canplaythrough",function(){finish(audio)},false);audio.onerror=function audio_onerror(event){if(done)return;console.log("warning: browser could not fully decode audio "+name+", trying slower base64 approach");function encode64(data){var BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var PAD="=";var ret="";var leftchar=0;var leftbits=0;for(var i=0;i<data.length;i++){leftchar=leftchar<<8|data[i];leftbits+=8;while(leftbits>=6){var curr=leftchar>>leftbits-6&63;leftbits-=6;ret+=BASE[curr]}}if(leftbits==2){ret+=BASE[(leftchar&3)<<4];ret+=PAD+PAD}else if(leftbits==4){ret+=BASE[(leftchar&15)<<2];ret+=PAD}return ret}audio.src="data:audio/x-"+name.substr(-3)+";base64,"+encode64(byteArray);finish(audio)};audio.src=url;Browser.safeSetTimeout(function(){finish(audio)},1e4)}else{return fail()}};Module["preloadPlugins"].push(audioPlugin);function pointerLockChange(){Browser.pointerLock=document["pointerLockElement"]===Module["canvas"]||document["mozPointerLockElement"]===Module["canvas"]||document["webkitPointerLockElement"]===Module["canvas"]||document["msPointerLockElement"]===Module["canvas"]}var canvas=Module["canvas"];if(canvas){canvas.requestPointerLock=canvas["requestPointerLock"]||canvas["mozRequestPointerLock"]||canvas["webkitRequestPointerLock"]||canvas["msRequestPointerLock"]||function(){};canvas.exitPointerLock=document["exitPointerLock"]||document["mozExitPointerLock"]||document["webkitExitPointerLock"]||document["msExitPointerLock"]||function(){};canvas.exitPointerLock=canvas.exitPointerLock.bind(document);document.addEventListener("pointerlockchange",pointerLockChange,false);document.addEventListener("mozpointerlockchange",pointerLockChange,false);document.addEventListener("webkitpointerlockchange",pointerLockChange,false);document.addEventListener("mspointerlockchange",pointerLockChange,false);if(Module["elementPointerLock"]){canvas.addEventListener("click",function(ev){if(!Browser.pointerLock&&Module["canvas"].requestPointerLock){Module["canvas"].requestPointerLock();ev.preventDefault()}},false)}}},createContext:function(canvas,useWebGL,setInModule,webGLContextAttributes){if(useWebGL&&Module.ctx&&canvas==Module.canvas)return Module.ctx;var ctx;var contextHandle;if(useWebGL){var contextAttributes={antialias:false,alpha:false,majorVersion:1};if(webGLContextAttributes){for(var attribute in webGLContextAttributes){contextAttributes[attribute]=webGLContextAttributes[attribute]}}if(typeof GL!=="undefined"){contextHandle=GL.createContext(canvas,contextAttributes);if(contextHandle){ctx=GL.getContext(contextHandle).GLctx}}}else{ctx=canvas.getContext("2d")}if(!ctx)return null;if(setInModule){if(!useWebGL)assert(typeof GLctx==="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it");Module.ctx=ctx;if(useWebGL)GL.makeContextCurrent(contextHandle);Module.useWebGL=useWebGL;Browser.moduleContextCreatedCallbacks.forEach(function(callback){callback()});Browser.init()}return ctx},destroyContext:function(canvas,useWebGL,setInModule){},fullscreenHandlersInstalled:false,lockPointer:undefined,resizeCanvas:undefined,requestFullscreen:function(lockPointer,resizeCanvas,vrDevice){Browser.lockPointer=lockPointer;Browser.resizeCanvas=resizeCanvas;Browser.vrDevice=vrDevice;if(typeof Browser.lockPointer==="undefined")Browser.lockPointer=true;if(typeof Browser.resizeCanvas==="undefined")Browser.resizeCanvas=false;if(typeof Browser.vrDevice==="undefined")Browser.vrDevice=null;var canvas=Module["canvas"];function fullscreenChange(){Browser.isFullscreen=false;var canvasContainer=canvas.parentNode;if((document["fullscreenElement"]||document["mozFullScreenElement"]||document["msFullscreenElement"]||document["webkitFullscreenElement"]||document["webkitCurrentFullScreenElement"])===canvasContainer){canvas.exitFullscreen=Browser.exitFullscreen;if(Browser.lockPointer)canvas.requestPointerLock();Browser.isFullscreen=true;if(Browser.resizeCanvas){Browser.setFullscreenCanvasSize()}else{Browser.updateCanvasDimensions(canvas)}}else{canvasContainer.parentNode.insertBefore(canvas,canvasContainer);canvasContainer.parentNode.removeChild(canvasContainer);if(Browser.resizeCanvas){Browser.setWindowedCanvasSize()}else{Browser.updateCanvasDimensions(canvas)}}if(Module["onFullScreen"])Module["onFullScreen"](Browser.isFullscreen);if(Module["onFullscreen"])Module["onFullscreen"](Browser.isFullscreen)}if(!Browser.fullscreenHandlersInstalled){Browser.fullscreenHandlersInstalled=true;document.addEventListener("fullscreenchange",fullscreenChange,false);document.addEventListener("mozfullscreenchange",fullscreenChange,false);document.addEventListener("webkitfullscreenchange",fullscreenChange,false);document.addEventListener("MSFullscreenChange",fullscreenChange,false)}var canvasContainer=document.createElement("div");canvas.parentNode.insertBefore(canvasContainer,canvas);canvasContainer.appendChild(canvas);canvasContainer.requestFullscreen=canvasContainer["requestFullscreen"]||canvasContainer["mozRequestFullScreen"]||canvasContainer["msRequestFullscreen"]||(canvasContainer["webkitRequestFullscreen"]?function(){canvasContainer["webkitRequestFullscreen"](Element["ALLOW_KEYBOARD_INPUT"])}:null)||(canvasContainer["webkitRequestFullScreen"]?function(){canvasContainer["webkitRequestFullScreen"](Element["ALLOW_KEYBOARD_INPUT"])}:null);if(vrDevice){canvasContainer.requestFullscreen({vrDisplay:vrDevice})}else{canvasContainer.requestFullscreen()}},exitFullscreen:function(){if(!Browser.isFullscreen){return false}var CFS=document["exitFullscreen"]||document["cancelFullScreen"]||document["mozCancelFullScreen"]||document["msExitFullscreen"]||document["webkitCancelFullScreen"]||function(){};CFS.apply(document,[]);return true},nextRAF:0,fakeRequestAnimationFrame:function(func){var now=Date.now();if(Browser.nextRAF===0){Browser.nextRAF=now+1e3/60}else{while(now+2>=Browser.nextRAF){Browser.nextRAF+=1e3/60}}var delay=Math.max(Browser.nextRAF-now,0);setTimeout(func,delay)},requestAnimationFrame:function(func){if(typeof requestAnimationFrame==="function"){requestAnimationFrame(func);return}var RAF=Browser.fakeRequestAnimationFrame;RAF(func)},safeCallback:function(func){return function(){if(!ABORT)return func.apply(null,arguments)}},allowAsyncCallbacks:true,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Browser.allowAsyncCallbacks=false},resumeAsyncCallbacks:function(){Browser.allowAsyncCallbacks=true;if(Browser.queuedAsyncCallbacks.length>0){var callbacks=Browser.queuedAsyncCallbacks;Browser.queuedAsyncCallbacks=[];callbacks.forEach(function(func){func()})}},safeRequestAnimationFrame:function(func){return Browser.requestAnimationFrame(function(){if(ABORT)return;if(Browser.allowAsyncCallbacks){func()}else{Browser.queuedAsyncCallbacks.push(func)}})},safeSetTimeout:function(func,timeout){noExitRuntime=true;return setTimeout(function(){if(ABORT)return;if(Browser.allowAsyncCallbacks){func()}else{Browser.queuedAsyncCallbacks.push(func)}},timeout)},safeSetInterval:function(func,timeout){noExitRuntime=true;return setInterval(function(){if(ABORT)return;if(Browser.allowAsyncCallbacks){func()}},timeout)},getMimetype:function(name){return{"jpg":"image/jpeg","jpeg":"image/jpeg","png":"image/png","bmp":"image/bmp","ogg":"audio/ogg","wav":"audio/wav","mp3":"audio/mpeg"}[name.substr(name.lastIndexOf(".")+1)]},getUserMedia:function(func){if(!window.getUserMedia){window.getUserMedia=navigator["getUserMedia"]||navigator["mozGetUserMedia"]}window.getUserMedia(func)},getMovementX:function(event){return event["movementX"]||event["mozMovementX"]||event["webkitMovementX"]||0},getMovementY:function(event){return event["movementY"]||event["mozMovementY"]||event["webkitMovementY"]||0},getMouseWheelDelta:function(event){var delta=0;switch(event.type){case"DOMMouseScroll":delta=event.detail/3;break;case"mousewheel":delta=event.wheelDelta/120;break;case"wheel":delta=event.deltaY;switch(event.deltaMode){case 0:delta/=100;break;case 1:delta/=3;break;case 2:delta*=80;break;default:throw"unrecognized mouse wheel delta mode: "+event.deltaMode}break;default:throw"unrecognized mouse wheel event: "+event.type}return delta},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(event){if(Browser.pointerLock){if(event.type!="mousemove"&&"mozMovementX"in event){Browser.mouseMovementX=Browser.mouseMovementY=0}else{Browser.mouseMovementX=Browser.getMovementX(event);Browser.mouseMovementY=Browser.getMovementY(event)}if(typeof SDL!="undefined"){Browser.mouseX=SDL.mouseX+Browser.mouseMovementX;Browser.mouseY=SDL.mouseY+Browser.mouseMovementY}else{Browser.mouseX+=Browser.mouseMovementX;Browser.mouseY+=Browser.mouseMovementY}}else{var rect=Module["canvas"].getBoundingClientRect();var cw=Module["canvas"].width;var ch=Module["canvas"].height;var scrollX=typeof window.scrollX!=="undefined"?window.scrollX:window.pageXOffset;var scrollY=typeof window.scrollY!=="undefined"?window.scrollY:window.pageYOffset;if(event.type==="touchstart"||event.type==="touchend"||event.type==="touchmove"){var touch=event.touch;if(touch===undefined){return}var adjustedX=touch.pageX-(scrollX+rect.left);var adjustedY=touch.pageY-(scrollY+rect.top);adjustedX=adjustedX*(cw/rect.width);adjustedY=adjustedY*(ch/rect.height);var coords={x:adjustedX,y:adjustedY};if(event.type==="touchstart"){Browser.lastTouches[touch.identifier]=coords;Browser.touches[touch.identifier]=coords}else if(event.type==="touchend"||event.type==="touchmove"){var last=Browser.touches[touch.identifier];if(!last)last=coords;Browser.lastTouches[touch.identifier]=last;Browser.touches[touch.identifier]=coords}return}var x=event.pageX-(scrollX+rect.left);var y=event.pageY-(scrollY+rect.top);x=x*(cw/rect.width);y=y*(ch/rect.height);Browser.mouseMovementX=x-Browser.mouseX;Browser.mouseMovementY=y-Browser.mouseY;Browser.mouseX=x;Browser.mouseY=y}},asyncLoad:function(url,onload,onerror,noRunDep){var dep=!noRunDep?getUniqueRunDependency("al "+url):"";readAsync(url,function(arrayBuffer){assert(arrayBuffer,'Loading data file "'+url+'" failed (no arrayBuffer).');onload(new Uint8Array(arrayBuffer));if(dep)removeRunDependency(dep)},function(event){if(onerror){onerror()}else{throw'Loading data file "'+url+'" failed.'}});if(dep)addRunDependency(dep)},resizeListeners:[],updateResizeListeners:function(){var canvas=Module["canvas"];Browser.resizeListeners.forEach(function(listener){listener(canvas.width,canvas.height)})},setCanvasSize:function(width,height,noUpdates){var canvas=Module["canvas"];Browser.updateCanvasDimensions(canvas,width,height);if(!noUpdates)Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var flags=HEAPU32[SDL.screen>>2];flags=flags|8388608;HEAP32[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module["canvas"]);Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var flags=HEAPU32[SDL.screen>>2];flags=flags&~8388608;HEAP32[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module["canvas"]);Browser.updateResizeListeners()},updateCanvasDimensions:function(canvas,wNative,hNative){if(wNative&&hNative){canvas.widthNative=wNative;canvas.heightNative=hNative}else{wNative=canvas.widthNative;hNative=canvas.heightNative}var w=wNative;var h=hNative;if(Module["forcedAspectRatio"]&&Module["forcedAspectRatio"]>0){if(w/h<Module["forcedAspectRatio"]){w=Math.round(h*Module["forcedAspectRatio"])}else{h=Math.round(w/Module["forcedAspectRatio"])}}if((document["fullscreenElement"]||document["mozFullScreenElement"]||document["msFullscreenElement"]||document["webkitFullscreenElement"]||document["webkitCurrentFullScreenElement"])===canvas.parentNode&&typeof screen!="undefined"){var factor=Math.min(screen.width/w,screen.height/h);w=Math.round(w*factor);h=Math.round(h*factor)}if(Browser.resizeCanvas){if(canvas.width!=w)canvas.width=w;if(canvas.height!=h)canvas.height=h;if(typeof canvas.style!="undefined"){canvas.style.removeProperty("width");canvas.style.removeProperty("height")}}else{if(canvas.width!=wNative)canvas.width=wNative;if(canvas.height!=hNative)canvas.height=hNative;if(typeof canvas.style!="undefined"){if(w!=wNative||h!=hNative){canvas.style.setProperty("width",w+"px","important");canvas.style.setProperty("height",h+"px","important")}else{canvas.style.removeProperty("width");canvas.style.removeProperty("height")}}}},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var handle=Browser.nextWgetRequestHandle;Browser.nextWgetRequestHandle++;return handle}};function _SDL_GetTicks(){return Date.now()-SDL.startTime|0}function _SDL_LockSurface(surf){var surfData=SDL.surfaces[surf];surfData.locked++;if(surfData.locked>1)return 0;if(!surfData.buffer){surfData.buffer=_malloc(surfData.width*surfData.height*4);HEAP32[surf+20>>2]=surfData.buffer}HEAP32[surf+20>>2]=surfData.buffer;if(surf==SDL.screen&&Module.screenIsReadOnly&&surfData.image)return 0;if(SDL.defaults.discardOnLock){if(!surfData.image){surfData.image=surfData.ctx.createImageData(surfData.width,surfData.height)}if(!SDL.defaults.opaqueFrontBuffer)return}else{surfData.image=surfData.ctx.getImageData(0,0,surfData.width,surfData.height)}if(surf==SDL.screen&&SDL.defaults.opaqueFrontBuffer){var data=surfData.image.data;var num=data.length;for(var i=0;i<num/4;i++){data[i*4+3]=255}}if(SDL.defaults.copyOnLock&&!SDL.defaults.discardOnLock){if(surfData.isFlagSet(2097152)){throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+(new Error).stack}else{HEAPU8.set(surfData.image.data,surfData.buffer)}}return 0}var SDL={defaults:{width:320,height:200,copyOnLock:true,discardOnLock:false,opaqueFrontBuffer:true},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:false,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:false,isRequestingFullscreen:false,textInput:false,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(rect){return{x:HEAP32[rect+0>>2],y:HEAP32[rect+4>>2],w:HEAP32[rect+8>>2],h:HEAP32[rect+12>>2]}},updateRect:function(rect,r){HEAP32[rect>>2]=r.x;HEAP32[rect+4>>2]=r.y;HEAP32[rect+8>>2]=r.w;HEAP32[rect+12>>2]=r.h},intersectionOfRects:function(first,second){var leftX=Math.max(first.x,second.x);var leftY=Math.max(first.y,second.y);var rightX=Math.min(first.x+first.w,second.x+second.w);var rightY=Math.min(first.y+first.h,second.y+second.h);return{x:leftX,y:leftY,w:Math.max(leftX,rightX)-leftX,h:Math.max(leftY,rightY)-leftY}},checkPixelFormat:function(fmt){},loadColorToCSSRGB:function(color){var rgba=HEAP32[color>>2];return"rgb("+(rgba&255)+","+(rgba>>8&255)+","+(rgba>>16&255)+")"},loadColorToCSSRGBA:function(color){var rgba=HEAP32[color>>2];return"rgba("+(rgba&255)+","+(rgba>>8&255)+","+(rgba>>16&255)+","+(rgba>>24&255)/255+")"},translateColorToCSSRGBA:function(rgba){return"rgba("+(rgba&255)+","+(rgba>>8&255)+","+(rgba>>16&255)+","+(rgba>>>24)/255+")"},translateRGBAToCSSRGBA:function(r,g,b,a){return"rgba("+(r&255)+","+(g&255)+","+(b&255)+","+(a&255)/255+")"},translateRGBAToColor:function(r,g,b,a){return r|g<<8|b<<16|a<<24},makeSurface:function(width,height,flags,usePageCanvas,source,rmask,gmask,bmask,amask){flags=flags||0;var is_SDL_HWSURFACE=flags&1;var is_SDL_HWPALETTE=flags&2097152;var is_SDL_OPENGL=flags&67108864;var surf=_malloc(60);var pixelFormat=_malloc(44);var bpp=is_SDL_HWPALETTE?1:4;var buffer=0;if(!is_SDL_HWSURFACE&&!is_SDL_OPENGL){buffer=_malloc(width*height*4)}HEAP32[surf>>2]=flags;HEAP32[surf+4>>2]=pixelFormat;HEAP32[surf+8>>2]=width;HEAP32[surf+12>>2]=height;HEAP32[surf+16>>2]=width*bpp;HEAP32[surf+20>>2]=buffer;HEAP32[surf+36>>2]=0;HEAP32[surf+40>>2]=0;HEAP32[surf+44>>2]=Module["canvas"].width;HEAP32[surf+48>>2]=Module["canvas"].height;HEAP32[surf+56>>2]=1;HEAP32[pixelFormat>>2]=-2042224636;HEAP32[pixelFormat+4>>2]=0;HEAP8[pixelFormat+8>>0]=bpp*8;HEAP8[pixelFormat+9>>0]=bpp;HEAP32[pixelFormat+12>>2]=rmask||255;HEAP32[pixelFormat+16>>2]=gmask||65280;HEAP32[pixelFormat+20>>2]=bmask||16711680;HEAP32[pixelFormat+24>>2]=amask||4278190080;SDL.GL=SDL.GL||is_SDL_OPENGL;var canvas;if(!usePageCanvas){if(SDL.canvasPool.length>0){canvas=SDL.canvasPool.pop()}else{canvas=document.createElement("canvas")}canvas.width=width;canvas.height=height}else{canvas=Module["canvas"]}var webGLContextAttributes={antialias:SDL.glAttributes[13]!=0&&SDL.glAttributes[14]>1,depth:SDL.glAttributes[6]>0,stencil:SDL.glAttributes[7]>0,alpha:SDL.glAttributes[3]>0};GL.enableOffscreenFramebufferAttributes(webGLContextAttributes);var ctx=Browser.createContext(canvas,is_SDL_OPENGL,usePageCanvas,webGLContextAttributes);SDL.surfaces[surf]={width:width,height:height,canvas:canvas,ctx:ctx,surf:surf,buffer:buffer,pixelFormat:pixelFormat,alpha:255,flags:flags,locked:0,usePageCanvas:usePageCanvas,source:source,isFlagSet:function(flag){return flags&flag}};return surf},copyIndexedColorData:function(surfData,rX,rY,rW,rH){if(!surfData.colors){return}var fullWidth=Module["canvas"].width;var fullHeight=Module["canvas"].height;var startX=rX||0;var startY=rY||0;var endX=(rW||fullWidth-startX)+startX;var endY=(rH||fullHeight-startY)+startY;var buffer=surfData.buffer;if(!surfData.image.data32){surfData.image.data32=new Uint32Array(surfData.image.data.buffer)}var data32=surfData.image.data32;var colors32=surfData.colors32;for(var y=startY;y<endY;++y){var base=y*fullWidth;for(var x=startX;x<endX;++x){data32[base+x]=colors32[HEAPU8[buffer+base+x>>0]]}}},freeSurface:function(surf){var refcountPointer=surf+56;var refcount=HEAP32[refcountPointer>>2];if(refcount>1){HEAP32[refcountPointer>>2]=refcount-1;return}var info=SDL.surfaces[surf];if(!info.usePageCanvas&&info.canvas)SDL.canvasPool.push(info.canvas);if(info.buffer)_free(info.buffer);_free(info.pixelFormat);_free(surf);SDL.surfaces[surf]=null;if(surf===SDL.screen){SDL.screen=null}},blitSurface:function(src,srcrect,dst,dstrect,scale){var srcData=SDL.surfaces[src];var dstData=SDL.surfaces[dst];var sr,dr;if(srcrect){sr=SDL.loadRect(srcrect)}else{sr={x:0,y:0,w:srcData.width,h:srcData.height}}if(dstrect){dr=SDL.loadRect(dstrect)}else{dr={x:0,y:0,w:srcData.width,h:srcData.height}}if(dstData.clipRect){var widthScale=!scale||sr.w===0?1:sr.w/dr.w;var heightScale=!scale||sr.h===0?1:sr.h/dr.h;dr=SDL.intersectionOfRects(dstData.clipRect,dr);sr.w=dr.w*widthScale;sr.h=dr.h*heightScale;if(dstrect){SDL.updateRect(dstrect,dr)}}var blitw,blith;if(scale){blitw=dr.w;blith=dr.h}else{blitw=sr.w;blith=sr.h}if(sr.w===0||sr.h===0||blitw===0||blith===0){return 0}var oldAlpha=dstData.ctx.globalAlpha;dstData.ctx.globalAlpha=srcData.alpha/255;dstData.ctx.drawImage(srcData.canvas,sr.x,sr.y,sr.w,sr.h,dr.x,dr.y,blitw,blith);dstData.ctx.globalAlpha=oldAlpha;if(dst!=SDL.screen){warnOnce("WARNING: copying canvas data to memory for compatibility");_SDL_LockSurface(dst);dstData.locked--}return 0},downFingers:{},savedKeydown:null,receiveEvent:function(event){function unpressAllPressedKeys(){for(var code in SDL.keyboardMap){SDL.events.push({type:"keyup",keyCode:SDL.keyboardMap[code]})}}switch(event.type){case"touchstart":case"touchmove":{event.preventDefault();var touches=[];if(event.type==="touchstart"){for(var i=0;i<event.touches.length;i++){var touch=event.touches[i];if(SDL.downFingers[touch.identifier]!=true){SDL.downFingers[touch.identifier]=true;touches.push(touch)}}}else{touches=event.touches}var firstTouch=touches[0];if(firstTouch){if(event.type=="touchstart"){SDL.DOMButtons[0]=1}var mouseEventType;switch(event.type){case"touchstart":mouseEventType="mousedown";break;case"touchmove":mouseEventType="mousemove";break}var mouseEvent={type:mouseEventType,button:0,pageX:firstTouch.clientX,pageY:firstTouch.clientY};SDL.events.push(mouseEvent)}for(var i=0;i<touches.length;i++){var touch=touches[i];SDL.events.push({type:event.type,touch:touch})}break}case"touchend":{event.preventDefault();for(var i=0;i<event.changedTouches.length;i++){var touch=event.changedTouches[i];if(SDL.downFingers[touch.identifier]===true){delete SDL.downFingers[touch.identifier]}}var mouseEvent={type:"mouseup",button:0,pageX:event.changedTouches[0].clientX,pageY:event.changedTouches[0].clientY};SDL.DOMButtons[0]=0;SDL.events.push(mouseEvent);for(var i=0;i<event.changedTouches.length;i++){var touch=event.changedTouches[i];SDL.events.push({type:"touchend",touch:touch})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var delta=-Browser.getMouseWheelDelta(event);delta=delta==0?0:delta>0?Math.max(delta,1):Math.min(delta,-1);var button=delta>0?3:4;SDL.events.push({type:"mousedown",button:button,pageX:event.pageX,pageY:event.pageY});SDL.events.push({type:"mouseup",button:button,pageX:event.pageX,pageY:event.pageY});SDL.events.push({type:"wheel",deltaX:0,deltaY:delta});event.preventDefault();break;case"mousemove":if(SDL.DOMButtons[0]===1){SDL.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:event.pageX,pageY:event.pageY}})}if(Browser.pointerLock){if("mozMovementX"in event){event["movementX"]=event["mozMovementX"];event["movementY"]=event["mozMovementY"]}if(event["movementX"]==0&&event["movementY"]==0){event.preventDefault();return}}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if(event.type!=="keydown"||!SDL.unicode&&!SDL.textInput||(event.keyCode===8||event.keyCode===9)){event.preventDefault()}if(event.type=="mousedown"){SDL.DOMButtons[event.button]=1;SDL.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:event.pageX,pageY:event.pageY}})}else if(event.type=="mouseup"){if(!SDL.DOMButtons[event.button]){return}SDL.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:event.pageX,pageY:event.pageY}});SDL.DOMButtons[event.button]=0}if(event.type==="keydown"||event.type==="mousedown"){SDL.canRequestFullscreen=true}else if(event.type==="keyup"||event.type==="mouseup"){if(SDL.isRequestingFullscreen){Module["requestFullscreen"](true,true);SDL.isRequestingFullscreen=false}SDL.canRequestFullscreen=false}if(event.type==="keypress"&&SDL.savedKeydown){SDL.savedKeydown.keypressCharCode=event.charCode;SDL.savedKeydown=null}else if(event.type==="keydown"){SDL.savedKeydown=event}if(event.type!=="keypress"||SDL.textInput){SDL.events.push(event)}break;case"mouseout":for(var i=0;i<3;i++){if(SDL.DOMButtons[i]){SDL.events.push({type:"mouseup",button:i,pageX:event.pageX,pageY:event.pageY});SDL.DOMButtons[i]=0}}event.preventDefault();break;case"focus":SDL.events.push(event);event.preventDefault();break;case"blur":SDL.events.push(event);unpressAllPressedKeys();event.preventDefault();break;case"visibilitychange":SDL.events.push({type:"visibilitychange",visible:!document.hidden});unpressAllPressedKeys();event.preventDefault();break;case"unload":if(Browser.mainLoop.runner){SDL.events.push(event);Browser.mainLoop.runner()}return;case"resize":SDL.events.push(event);if(event.preventDefault){event.preventDefault()}break}if(SDL.events.length>=1e4){err("SDL event queue full, dropping events");SDL.events=SDL.events.slice(0,1e4)}SDL.flushEventsToHandler();return},lookupKeyCodeForEvent:function(event){var code=event.keyCode;if(code>=65&&code<=90){code+=32}else{code=SDL.keyCodes[event.keyCode]||event.keyCode;if(event.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&code>=(224|1<<10)&&code<=(227|1<<10)){code+=4}}return code},handleEvent:function(event){if(event.handled)return;event.handled=true;switch(event.type){case"touchstart":case"touchend":case"touchmove":{Browser.calculateMouseEvent(event);break}case"keydown":case"keyup":{var down=event.type==="keydown";var code=SDL.lookupKeyCodeForEvent(event);HEAP8[SDL.keyboardState+code>>0]=down;SDL.modState=(HEAP8[SDL.keyboardState+1248>>0]?64:0)|(HEAP8[SDL.keyboardState+1249>>0]?1:0)|(HEAP8[SDL.keyboardState+1250>>0]?256:0)|(HEAP8[SDL.keyboardState+1252>>0]?128:0)|(HEAP8[SDL.keyboardState+1253>>0]?2:0)|(HEAP8[SDL.keyboardState+1254>>0]?512:0);if(down){SDL.keyboardMap[code]=event.keyCode}else{delete SDL.keyboardMap[code]}break}case"mousedown":case"mouseup":if(event.type=="mousedown"){SDL.buttonState|=1<<event.button}else if(event.type=="mouseup"){SDL.buttonState&=~(1<<event.button)}case"mousemove":{Browser.calculateMouseEvent(event);break}}},flushEventsToHandler:function(){if(!SDL.eventHandler)return;while(SDL.pollEvent(SDL.eventHandlerTemp)){Module["dynCall_iii"](SDL.eventHandler,SDL.eventHandlerContext,SDL.eventHandlerTemp)}},pollEvent:function(ptr){if(SDL.initFlags&512&&SDL.joystickEventState){SDL.queryJoysticks()}if(ptr){while(SDL.events.length>0){if(SDL.makeCEvent(SDL.events.shift(),ptr)!==false)return 1}return 0}else{return SDL.events.length>0}},makeCEvent:function(event,ptr){if(typeof event==="number"){_memcpy(ptr,event,28);_free(event);return}SDL.handleEvent(event);switch(event.type){case"keydown":case"keyup":{var down=event.type==="keydown";var key=SDL.lookupKeyCodeForEvent(event);var scan;if(key>=1024){scan=key-1024}else{scan=SDL.scanCodes[key]||key}HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP8[ptr+8>>0]=down?1:0;HEAP8[ptr+9>>0]=0;HEAP32[ptr+12>>2]=scan;HEAP32[ptr+16>>2]=key;HEAP16[ptr+20>>1]=SDL.modState;HEAP32[ptr+24>>2]=event.keypressCharCode||key;break}case"keypress":{HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];var cStr=intArrayFromString(String.fromCharCode(event.charCode));for(var i=0;i<cStr.length;++i){HEAP8[ptr+(8+i)>>0]=cStr[i]}break}case"mousedown":case"mouseup":case"mousemove":{if(event.type!="mousemove"){var down=event.type==="mousedown";HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=0;HEAP32[ptr+8>>2]=0;HEAP32[ptr+12>>2]=0;HEAP8[ptr+16>>0]=event.button+1;HEAP8[ptr+17>>0]=down?1:0;HEAP32[ptr+20>>2]=Browser.mouseX;HEAP32[ptr+24>>2]=Browser.mouseY}else{HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=0;HEAP32[ptr+8>>2]=0;HEAP32[ptr+12>>2]=0;HEAP32[ptr+16>>2]=SDL.buttonState;HEAP32[ptr+20>>2]=Browser.mouseX;HEAP32[ptr+24>>2]=Browser.mouseY;HEAP32[ptr+28>>2]=Browser.mouseMovementX;HEAP32[ptr+32>>2]=Browser.mouseMovementY}break}case"wheel":{HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+16>>2]=event.deltaX;HEAP32[ptr+20>>2]=event.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var touch=event.touch;if(!Browser.touches[touch.identifier])break;var w=Module["canvas"].width;var h=Module["canvas"].height;var x=Browser.touches[touch.identifier].x/w;var y=Browser.touches[touch.identifier].y/h;var lx=Browser.lastTouches[touch.identifier].x/w;var ly=Browser.lastTouches[touch.identifier].y/h;var dx=x-lx;var dy=y-ly;if(touch["deviceID"]===undefined)touch.deviceID=SDL.TOUCH_DEFAULT_ID;if(dx===0&&dy===0&&event.type==="touchmove")return false;HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=_SDL_GetTicks();tempI64=[touch.deviceID>>>0,(tempDouble=touch.deviceID,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[ptr+8>>2]=tempI64[0],HEAP32[ptr+12>>2]=tempI64[1];tempI64=[touch.identifier>>>0,(tempDouble=touch.identifier,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[ptr+16>>2]=tempI64[0],HEAP32[ptr+20>>2]=tempI64[1];HEAPF32[ptr+24>>2]=x;HEAPF32[ptr+28>>2]=y;HEAPF32[ptr+32>>2]=dx;HEAPF32[ptr+36>>2]=dy;if(touch.force!==undefined){HEAPF32[ptr+40>>2]=touch.force}else{HEAPF32[ptr+40>>2]=event.type=="touchend"?0:1}break}case"unload":{HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];break}case"resize":{HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=event.w;HEAP32[ptr+8>>2]=event.h;break}case"joystick_button_up":case"joystick_button_down":{var state=event.type==="joystick_button_up"?0:1;HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP8[ptr+4>>0]=event.index;HEAP8[ptr+5>>0]=event.button;HEAP8[ptr+6>>0]=state;break}case"joystick_axis_motion":{HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP8[ptr+4>>0]=event.index;HEAP8[ptr+5>>0]=event.axis;HEAP32[ptr+8>>2]=SDL.joystickAxisValueConversion(event.value);break}case"focus":{var SDL_WINDOWEVENT_FOCUS_GAINED=12;HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=0;HEAP8[ptr+8>>0]=SDL_WINDOWEVENT_FOCUS_GAINED;break}case"blur":{var SDL_WINDOWEVENT_FOCUS_LOST=13;HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=0;HEAP8[ptr+8>>0]=SDL_WINDOWEVENT_FOCUS_LOST;break}case"visibilitychange":{var SDL_WINDOWEVENT_SHOWN=1;var SDL_WINDOWEVENT_HIDDEN=2;var visibilityEventID=event.visible?SDL_WINDOWEVENT_SHOWN:SDL_WINDOWEVENT_HIDDEN;HEAP32[ptr>>2]=SDL.DOMEventToSDLEvent[event.type];HEAP32[ptr+4>>2]=0;HEAP8[ptr+8>>0]=visibilityEventID;break}default:throw"Unhandled SDL event: "+event.type}},makeFontString:function(height,fontName){if(fontName.charAt(0)!="'"&&fontName.charAt(0)!='"'){fontName='"'+fontName+'"'}return height+"px "+fontName+", serif"},estimateTextWidth:function(fontData,text){var h=fontData.size;var fontString=SDL.makeFontString(h,fontData.name);var tempCtx=SDL.ttfContext;tempCtx.font=fontString;var ret=tempCtx.measureText(text).width|0;return ret},allocateChannels:function(num){if(SDL.numChannels&&SDL.numChannels>=num&&num!=0)return;SDL.numChannels=num;SDL.channels=[];for(var i=0;i<num;i++){SDL.channels[i]={audio:null,volume:1}}},setGetVolume:function(info,volume){if(!info)return 0;var ret=info.volume*128;if(volume!=-1){info.volume=Math.min(Math.max(volume,0),128)/128;if(info.audio){try{info.audio.volume=info.volume;if(info.audio.webAudioGainNode)info.audio.webAudioGainNode["gain"]["value"]=info.volume}catch(e){err("setGetVolume failed to set audio volume: "+e)}}}return ret},setPannerPosition:function(info,x,y,z){if(!info)return;if(info.audio){if(info.audio.webAudioPannerNode){info.audio.webAudioPannerNode["setPosition"](x,y,z)}}},playWebAudio:function(audio){if(!audio)return;if(audio.webAudioNode)return;if(!SDL.webAudioAvailable())return;try{var webAudio=audio.resource.webAudio;audio.paused=false;if(!webAudio.decodedBuffer){if(webAudio.onDecodeComplete===undefined)abort("Cannot play back audio object that was not loaded");webAudio.onDecodeComplete.push(function(){if(!audio.paused)SDL.playWebAudio(audio)});return}audio.webAudioNode=SDL.audioContext["createBufferSource"]();audio.webAudioNode["buffer"]=webAudio.decodedBuffer;audio.webAudioNode["loop"]=audio.loop;audio.webAudioNode["onended"]=function(){audio["onended"]()};audio.webAudioPannerNode=SDL.audioContext["createPanner"]();audio.webAudioPannerNode["setPosition"](0,0,-.5);audio.webAudioPannerNode["panningModel"]="equalpower";audio.webAudioGainNode=SDL.audioContext["createGain"]();audio.webAudioGainNode["gain"]["value"]=audio.volume;audio.webAudioNode["connect"](audio.webAudioPannerNode);audio.webAudioPannerNode["connect"](audio.webAudioGainNode);audio.webAudioGainNode["connect"](SDL.audioContext["destination"]);audio.webAudioNode["start"](0,audio.currentPosition);audio.startTime=SDL.audioContext["currentTime"]-audio.currentPosition}catch(e){err("playWebAudio failed: "+e)}},pauseWebAudio:function(audio){if(!audio)return;if(audio.webAudioNode){try{audio.currentPosition=(SDL.audioContext["currentTime"]-audio.startTime)%audio.resource.webAudio.decodedBuffer.duration;audio.webAudioNode["onended"]=undefined;audio.webAudioNode.stop(0);audio.webAudioNode=undefined}catch(e){err("pauseWebAudio failed: "+e)}}audio.paused=true},openAudioContext:function(){if(!SDL.audioContext){if(typeof AudioContext!=="undefined")SDL.audioContext=new AudioContext;else if(typeof webkitAudioContext!=="undefined")SDL.audioContext=new webkitAudioContext}},webAudioAvailable:function(){return!!SDL.audioContext},fillWebAudioBufferFromHeap:function(heapPtr,sizeSamplesPerChannel,dstAudioBuffer){var numChannels=SDL.audio.channels;for(var c=0;c<numChannels;++c){var channelData=dstAudioBuffer["getChannelData"](c);if(channelData.length!=sizeSamplesPerChannel){throw"Web Audio output buffer length mismatch! Destination size: "+channelData.length+" samples vs expected "+sizeSamplesPerChannel+" samples!"}if(SDL.audio.format==32784){for(var j=0;j<sizeSamplesPerChannel;++j){channelData[j]=HEAP16[heapPtr+(j*numChannels+c)*2>>1]/32768}}else if(SDL.audio.format==8){for(var j=0;j<sizeSamplesPerChannel;++j){var v=HEAP8[heapPtr+(j*numChannels+c)>>0];channelData[j]=(v>=0?v-128:v+128)/128}}else if(SDL.audio.format==33056){for(var j=0;j<sizeSamplesPerChannel;++j){channelData[j]=HEAPF32[heapPtr+(j*numChannels+c)*4>>2]}}else{throw"Invalid SDL audio format "+SDL.audio.format+"!"}}},debugSurface:function(surfData){console.log("dumping surface "+[surfData.surf,surfData.source,surfData.width,surfData.height]);var image=surfData.ctx.getImageData(0,0,surfData.width,surfData.height);var data=image.data;var num=Math.min(surfData.width,surfData.height);for(var i=0;i<num;i++){console.log("   diagonal "+i+":"+[data[i*surfData.width*4+i*4+0],data[i*surfData.width*4+i*4+1],data[i*surfData.width*4+i*4+2],data[i*surfData.width*4+i*4+3]])}},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(joystick,state){var buttons=new Array(state.buttons.length);for(var i=0;i<state.buttons.length;i++){buttons[i]=SDL.getJoystickButtonState(state.buttons[i])}SDL.lastJoystickState[joystick]={buttons:buttons,axes:state.axes.slice(0),timestamp:state.timestamp,index:state.index,id:state.id}},getJoystickButtonState:function(button){if(typeof button==="object"){return button["pressed"]}else{return button>0}},queryJoysticks:function(){for(var joystick in SDL.lastJoystickState){var state=SDL.getGamepad(joystick-1);var prevState=SDL.lastJoystickState[joystick];if(typeof state==="undefined")return;if(state===null)return;if(typeof state.timestamp!=="number"||state.timestamp!==prevState.timestamp||!state.timestamp){var i;for(i=0;i<state.buttons.length;i++){var buttonState=SDL.getJoystickButtonState(state.buttons[i]);if(buttonState!==prevState.buttons[i]){SDL.events.push({type:buttonState?"joystick_button_down":"joystick_button_up",joystick:joystick,index:joystick-1,button:i})}}for(i=0;i<state.axes.length;i++){if(state.axes[i]!==prevState.axes[i]){SDL.events.push({type:"joystick_axis_motion",joystick:joystick,index:joystick-1,axis:i,value:state.axes[i]})}}SDL.recordJoystickState(joystick,state)}}},joystickAxisValueConversion:function(value){value=Math.min(1,Math.max(value,-1));return Math.ceil((value+1)*32767.5-32768)},getGamepads:function(){var fcn=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;if(fcn!==undefined){return fcn.apply(navigator)}else{return[]}},getGamepad:function(deviceIndex){var gamepads=SDL.getGamepads();if(gamepads.length>deviceIndex&&deviceIndex>=0){return gamepads[deviceIndex]}return null}};function _SDL_Delay(delay){if(!ENVIRONMENT_IS_WORKER)abort("SDL_Delay called on the main thread! Potential infinite loop, quitting. (consider building with async support like ASYNCIFY)");var now=Date.now();while(Date.now()-now<delay){}}function _SDL_GL_SwapBuffers(){if(Browser.doSwapBuffers)Browser.doSwapBuffers()}function _SDL_Init(initFlags){SDL.startTime=Date.now();SDL.initFlags=initFlags;if(!Module["doNotCaptureKeyboard"]){var keyboardListeningElement=Module["keyboardListeningElement"]||document;keyboardListeningElement.addEventListener("keydown",SDL.receiveEvent);keyboardListeningElement.addEventListener("keyup",SDL.receiveEvent);keyboardListeningElement.addEventListener("keypress",SDL.receiveEvent);window.addEventListener("focus",SDL.receiveEvent);window.addEventListener("blur",SDL.receiveEvent);document.addEventListener("visibilitychange",SDL.receiveEvent)}window.addEventListener("unload",SDL.receiveEvent);SDL.keyboardState=_malloc(65536);_memset(SDL.keyboardState,0,65536);SDL.DOMEventToSDLEvent["keydown"]=768;SDL.DOMEventToSDLEvent["keyup"]=769;SDL.DOMEventToSDLEvent["keypress"]=771;SDL.DOMEventToSDLEvent["mousedown"]=1025;SDL.DOMEventToSDLEvent["mouseup"]=1026;SDL.DOMEventToSDLEvent["mousemove"]=1024;SDL.DOMEventToSDLEvent["wheel"]=1027;SDL.DOMEventToSDLEvent["touchstart"]=1792;SDL.DOMEventToSDLEvent["touchend"]=1793;SDL.DOMEventToSDLEvent["touchmove"]=1794;SDL.DOMEventToSDLEvent["unload"]=256;SDL.DOMEventToSDLEvent["resize"]=28673;SDL.DOMEventToSDLEvent["visibilitychange"]=512;SDL.DOMEventToSDLEvent["focus"]=512;SDL.DOMEventToSDLEvent["blur"]=512;SDL.DOMEventToSDLEvent["joystick_axis_motion"]=1536;SDL.DOMEventToSDLEvent["joystick_button_down"]=1539;SDL.DOMEventToSDLEvent["joystick_button_up"]=1540;return 0}function _SDL_JoystickEventState(state){if(state<0){return SDL.joystickEventState}return SDL.joystickEventState=state}function _SDL_JoystickOpen(deviceIndex){var gamepad=SDL.getGamepad(deviceIndex);if(gamepad){var joystick=deviceIndex+1;SDL.recordJoystickState(joystick,gamepad);return joystick}return 0}function _SDL_PollEvent(ptr){return SDL.pollEvent(ptr)}function __webgl_acquireInstancedArraysExtension(ctx){var ext=ctx.getExtension("ANGLE_instanced_arrays");if(ext){ctx["vertexAttribDivisor"]=function(index,divisor){ext["vertexAttribDivisorANGLE"](index,divisor)};ctx["drawArraysInstanced"]=function(mode,first,count,primcount){ext["drawArraysInstancedANGLE"](mode,first,count,primcount)};ctx["drawElementsInstanced"]=function(mode,count,type,indices,primcount){ext["drawElementsInstancedANGLE"](mode,count,type,indices,primcount)}}}function __webgl_acquireVertexArrayObjectExtension(ctx){var ext=ctx.getExtension("OES_vertex_array_object");if(ext){ctx["createVertexArray"]=function(){return ext["createVertexArrayOES"]()};ctx["deleteVertexArray"]=function(vao){ext["deleteVertexArrayOES"](vao)};ctx["bindVertexArray"]=function(vao){ext["bindVertexArrayOES"](vao)};ctx["isVertexArray"]=function(vao){return ext["isVertexArrayOES"](vao)}}}function __webgl_acquireDrawBuffersExtension(ctx){var ext=ctx.getExtension("WEBGL_draw_buffers");if(ext){ctx["drawBuffers"]=function(n,bufs){ext["drawBuffersWEBGL"](n,bufs)}}}var GL={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],currArrayBuffer:0,currElementArrayBuffer:0,byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},unpackAlignment:4,init:function(){var miniTempFloatBuffer=new Float32Array(GL.MINI_TEMP_BUFFER_SIZE);for(var i=0;i<GL.MINI_TEMP_BUFFER_SIZE;i++){GL.miniTempBufferFloatViews[i]=miniTempFloatBuffer.subarray(0,i+1)}var miniTempIntBuffer=new Int32Array(GL.MINI_TEMP_BUFFER_SIZE);for(var i=0;i<GL.MINI_TEMP_BUFFER_SIZE;i++){GL.miniTempBufferIntViews[i]=miniTempIntBuffer.subarray(0,i+1)}},recordError:function recordError(errorCode){if(!GL.lastError){GL.lastError=errorCode}},getNewId:function(table){var ret=GL.counter++;for(var i=table.length;i<ret;i++){table[i]=null}return ret},MINI_TEMP_BUFFER_SIZE:256,miniTempBufferFloatViews:[0],miniTempBufferIntViews:[0],MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:function(i){return 32-Math.clz32(i-1)},generateTempBuffers:function(quads,context){var largestIndex=GL.log2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE);context.tempVertexBufferCounters1=[];context.tempVertexBufferCounters2=[];context.tempVertexBufferCounters1.length=context.tempVertexBufferCounters2.length=largestIndex+1;context.tempVertexBuffers1=[];context.tempVertexBuffers2=[];context.tempVertexBuffers1.length=context.tempVertexBuffers2.length=largestIndex+1;context.tempIndexBuffers=[];context.tempIndexBuffers.length=largestIndex+1;for(var i=0;i<=largestIndex;++i){context.tempIndexBuffers[i]=null;context.tempVertexBufferCounters1[i]=context.tempVertexBufferCounters2[i]=0;var ringbufferLength=GL.numTempVertexBuffersPerSize;context.tempVertexBuffers1[i]=[];context.tempVertexBuffers2[i]=[];var ringbuffer1=context.tempVertexBuffers1[i];var ringbuffer2=context.tempVertexBuffers2[i];ringbuffer1.length=ringbuffer2.length=ringbufferLength;for(var j=0;j<ringbufferLength;++j){ringbuffer1[j]=ringbuffer2[j]=null}}if(quads){context.tempQuadIndexBuffer=GLctx.createBuffer();context.GLctx.bindBuffer(34963,context.tempQuadIndexBuffer);var numIndexes=GL.MAX_TEMP_BUFFER_SIZE>>1;var quadIndexes=new Uint16Array(numIndexes);var i=0,v=0;while(1){quadIndexes[i++]=v;if(i>=numIndexes)break;quadIndexes[i++]=v+1;if(i>=numIndexes)break;quadIndexes[i++]=v+2;if(i>=numIndexes)break;quadIndexes[i++]=v;if(i>=numIndexes)break;quadIndexes[i++]=v+2;if(i>=numIndexes)break;quadIndexes[i++]=v+3;if(i>=numIndexes)break;v+=4}context.GLctx.bufferData(34963,quadIndexes,35044);context.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:function getTempVertexBuffer(sizeBytes){var idx=GL.log2ceilLookup(sizeBytes);var ringbuffer=GL.currentContext.tempVertexBuffers1[idx];var nextFreeBufferIndex=GL.currentContext.tempVertexBufferCounters1[idx];GL.currentContext.tempVertexBufferCounters1[idx]=GL.currentContext.tempVertexBufferCounters1[idx]+1&GL.numTempVertexBuffersPerSize-1;var vbo=ringbuffer[nextFreeBufferIndex];if(vbo){return vbo}var prevVBO=GLctx.getParameter(34964);ringbuffer[nextFreeBufferIndex]=GLctx.createBuffer();GLctx.bindBuffer(34962,ringbuffer[nextFreeBufferIndex]);GLctx.bufferData(34962,1<<idx,35048);GLctx.bindBuffer(34962,prevVBO);return ringbuffer[nextFreeBufferIndex]},getTempIndexBuffer:function getTempIndexBuffer(sizeBytes){var idx=GL.log2ceilLookup(sizeBytes);var ibo=GL.currentContext.tempIndexBuffers[idx];if(ibo){return ibo}var prevIBO=GLctx.getParameter(34965);GL.currentContext.tempIndexBuffers[idx]=GLctx.createBuffer();GLctx.bindBuffer(34963,GL.currentContext.tempIndexBuffers[idx]);GLctx.bufferData(34963,1<<idx,35048);GLctx.bindBuffer(34963,prevIBO);return GL.currentContext.tempIndexBuffers[idx]},newRenderingFrameStarted:function newRenderingFrameStarted(){if(!GL.currentContext){return}var vb=GL.currentContext.tempVertexBuffers1;GL.currentContext.tempVertexBuffers1=GL.currentContext.tempVertexBuffers2;GL.currentContext.tempVertexBuffers2=vb;vb=GL.currentContext.tempVertexBufferCounters1;GL.currentContext.tempVertexBufferCounters1=GL.currentContext.tempVertexBufferCounters2;GL.currentContext.tempVertexBufferCounters2=vb;var largestIndex=GL.log2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE);for(var i=0;i<=largestIndex;++i){GL.currentContext.tempVertexBufferCounters1[i]=0}},getSource:function(shader,count,string,length){var source="";for(var i=0;i<count;++i){var len=length?HEAP32[length+i*4>>2]:-1;source+=UTF8ToString(HEAP32[string+i*4>>2],len<0?undefined:len)}var type=GLctx.getShaderParameter(GL.shaders[shader],35663);if(type==35632){if(GLEmulation.findToken(source,"dFdx")||GLEmulation.findToken(source,"dFdy")||GLEmulation.findToken(source,"fwidth")){source="#extension GL_OES_standard_derivatives : enable\n"+source;var extension=GLctx.getExtension("OES_standard_derivatives")}}return source},createContext:function(canvas,webGLContextAttributes){if(webGLContextAttributes.renderViaOffscreenBackBuffer)webGLContextAttributes["preserveDrawingBuffer"]=true;var ctx=canvas.getContext("webgl",webGLContextAttributes);if(!ctx)return 0;var handle=GL.registerContext(ctx,webGLContextAttributes);return handle},enableOffscreenFramebufferAttributes:function(webGLContextAttributes){webGLContextAttributes.renderViaOffscreenBackBuffer=true;webGLContextAttributes.preserveDrawingBuffer=true},createOffscreenFramebuffer:function(context){var gl=context.GLctx;var fbo=gl.createFramebuffer();gl.bindFramebuffer(36160,fbo);context.defaultFbo=fbo;context.defaultColorTarget=gl.createTexture();context.defaultDepthTarget=gl.createRenderbuffer();GL.resizeOffscreenFramebuffer(context);gl.bindTexture(3553,context.defaultColorTarget);gl.texParameteri(3553,10241,9728);gl.texParameteri(3553,10240,9728);gl.texParameteri(3553,10242,33071);gl.texParameteri(3553,10243,33071);gl.texImage2D(3553,0,6408,gl.canvas.width,gl.canvas.height,0,6408,5121,null);gl.framebufferTexture2D(36160,36064,3553,context.defaultColorTarget,0);gl.bindTexture(3553,null);var depthTarget=gl.createRenderbuffer();gl.bindRenderbuffer(36161,context.defaultDepthTarget);gl.renderbufferStorage(36161,33189,gl.canvas.width,gl.canvas.height);gl.framebufferRenderbuffer(36160,36096,36161,context.defaultDepthTarget);gl.bindRenderbuffer(36161,null);var vertices=[-1,-1,-1,1,1,-1,1,1];var vb=gl.createBuffer();gl.bindBuffer(34962,vb);gl.bufferData(34962,new Float32Array(vertices),35044);gl.bindBuffer(34962,null);context.blitVB=vb;var vsCode="attribute vec2 pos;"+"varying lowp vec2 tex;"+"void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }";var vs=gl.createShader(35633);gl.shaderSource(vs,vsCode);gl.compileShader(vs);var fsCode="varying lowp vec2 tex;"+"uniform sampler2D sampler;"+"void main() { gl_FragColor = texture2D(sampler, tex); }";var fs=gl.createShader(35632);gl.shaderSource(fs,fsCode);gl.compileShader(fs);var blitProgram=gl.createProgram();gl.attachShader(blitProgram,vs);gl.attachShader(blitProgram,fs);gl.linkProgram(blitProgram);context.blitProgram=blitProgram;context.blitPosLoc=gl.getAttribLocation(blitProgram,"pos");gl.useProgram(blitProgram);gl.uniform1i(gl.getUniformLocation(blitProgram,"sampler"),0);gl.useProgram(null);context.defaultVao=undefined;if(gl.createVertexArray){context.defaultVao=gl.createVertexArray();gl.bindVertexArray(context.defaultVao);gl.enableVertexAttribArray(context.blitPosLoc);gl.bindVertexArray(null)}},resizeOffscreenFramebuffer:function(context){var gl=context.GLctx;if(context.defaultColorTarget){var prevTextureBinding=gl.getParameter(32873);gl.bindTexture(3553,context.defaultColorTarget);gl.texImage2D(3553,0,6408,gl.drawingBufferWidth,gl.drawingBufferHeight,0,6408,5121,null);gl.bindTexture(3553,prevTextureBinding)}if(context.defaultDepthTarget){var prevRenderBufferBinding=gl.getParameter(36007);gl.bindRenderbuffer(36161,context.defaultDepthTarget);gl.renderbufferStorage(36161,33189,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.bindRenderbuffer(36161,prevRenderBufferBinding)}},blitOffscreenFramebuffer:function(context){var gl=context.GLctx;var prevScissorTest=gl.getParameter(3089);if(prevScissorTest)gl.disable(3089);var prevFbo=gl.getParameter(36006);{gl.bindFramebuffer(36160,null);var prevProgram=gl.getParameter(35725);gl.useProgram(context.blitProgram);var prevVB=gl.getParameter(34964);gl.bindBuffer(34962,context.blitVB);var prevActiveTexture=gl.getParameter(34016);gl.activeTexture(33984);var prevTextureBinding=gl.getParameter(32873);gl.bindTexture(3553,context.defaultColorTarget);var prevBlend=gl.getParameter(3042);if(prevBlend)gl.disable(3042);var prevCullFace=gl.getParameter(2884);if(prevCullFace)gl.disable(2884);var prevDepthTest=gl.getParameter(2929);if(prevDepthTest)gl.disable(2929);var prevStencilTest=gl.getParameter(2960);if(prevStencilTest)gl.disable(2960);function draw(){gl.vertexAttribPointer(context.blitPosLoc,2,5126,false,0,0);gl.drawArrays(5,0,4)}if(context.defaultVao){var prevVAO=gl.getParameter(34229);gl.bindVertexArray(context.defaultVao);draw();gl.bindVertexArray(prevVAO)}else{var prevVertexAttribPointer={buffer:gl.getVertexAttrib(context.blitPosLoc,34975),size:gl.getVertexAttrib(context.blitPosLoc,34339),stride:gl.getVertexAttrib(context.blitPosLoc,34340),type:gl.getVertexAttrib(context.blitPosLoc,34341),normalized:gl.getVertexAttrib(context.blitPosLoc,34922),pointer:gl.getVertexAttribOffset(context.blitPosLoc,34373)};var maxVertexAttribs=gl.getParameter(34921);var prevVertexAttribEnables=[];for(var i=0;i<maxVertexAttribs;++i){var prevEnabled=gl.getVertexAttrib(i,34338);var wantEnabled=i==context.blitPosLoc;if(prevEnabled&&!wantEnabled){gl.disableVertexAttribArray(i)}if(!prevEnabled&&wantEnabled){gl.enableVertexAttribArray(i)}prevVertexAttribEnables[i]=prevEnabled}draw();for(var i=0;i<maxVertexAttribs;++i){var prevEnabled=prevVertexAttribEnables[i];var nowEnabled=i==context.blitPosLoc;if(prevEnabled&&!nowEnabled){gl.enableVertexAttribArray(i)}if(!prevEnabled&&nowEnabled){gl.disableVertexAttribArray(i)}}gl.bindBuffer(34962,prevVertexAttribPointer.buffer);gl.vertexAttribPointer(context.blitPosLoc,prevVertexAttribPointer.size,prevVertexAttribPointer.type,prevVertexAttribPointer.normalized,prevVertexAttribPointer.stride,prevVertexAttribPointer.offset)}if(prevStencilTest)gl.enable(2960);if(prevDepthTest)gl.enable(2929);if(prevCullFace)gl.enable(2884);if(prevBlend)gl.enable(3042);gl.bindTexture(3553,prevTextureBinding);gl.activeTexture(prevActiveTexture);gl.bindBuffer(34962,prevVB);gl.useProgram(prevProgram)}gl.bindFramebuffer(36160,prevFbo);if(prevScissorTest)gl.enable(3089)},registerContext:function(ctx,webGLContextAttributes){var handle=_malloc(8);var context={handle:handle,attributes:webGLContextAttributes,version:webGLContextAttributes.majorVersion,GLctx:ctx};if(ctx.canvas)ctx.canvas.GLctxObject=context;GL.contexts[handle]=context;if(typeof webGLContextAttributes.enableExtensionsByDefault==="undefined"||webGLContextAttributes.enableExtensionsByDefault){GL.initExtensions(context)}if(webGLContextAttributes.renderViaOffscreenBackBuffer)GL.createOffscreenFramebuffer(context);return handle},makeContextCurrent:function(contextHandle){GL.currentContext=GL.contexts[contextHandle];Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx;return!(contextHandle&&!GLctx)},getContext:function(contextHandle){return GL.contexts[contextHandle]},deleteContext:function(contextHandle){if(GL.currentContext===GL.contexts[contextHandle])GL.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas);if(GL.contexts[contextHandle]&&GL.contexts[contextHandle].GLctx.canvas)GL.contexts[contextHandle].GLctx.canvas.GLctxObject=undefined;_free(GL.contexts[contextHandle]);GL.contexts[contextHandle]=null},initExtensions:function(context){if(!context)context=GL.currentContext;if(context.initExtensionsDone)return;context.initExtensionsDone=true;var GLctx=context.GLctx;context.compressionExt=GLctx.getExtension("WEBGL_compressed_texture_s3tc");context.anisotropicExt=GLctx.getExtension("EXT_texture_filter_anisotropic");if(context.version<2){__webgl_acquireInstancedArraysExtension(GLctx);__webgl_acquireVertexArrayObjectExtension(GLctx);__webgl_acquireDrawBuffersExtension(GLctx)}GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query");var automaticallyEnabledExtensions=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"];var exts=GLctx.getSupportedExtensions()||[];exts.forEach(function(ext){if(automaticallyEnabledExtensions.indexOf(ext)!=-1){GLctx.getExtension(ext)}})},populateUniformTable:function(program){var p=GL.programs[program];var ptable=GL.programInfos[program]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var utable=ptable.uniforms;var numUniforms=GLctx.getProgramParameter(p,35718);for(var i=0;i<numUniforms;++i){var u=GLctx.getActiveUniform(p,i);var name=u.name;ptable.maxUniformLength=Math.max(ptable.maxUniformLength,name.length+1);if(name.slice(-1)=="]"){name=name.slice(0,name.lastIndexOf("["))}var loc=GLctx.getUniformLocation(p,name);if(loc){var id=GL.getNewId(GL.uniforms);utable[name]=[u.size,id];GL.uniforms[id]=loc;for(var j=1;j<u.size;++j){var n=name+"["+j+"]";loc=GLctx.getUniformLocation(p,n);id=GL.getNewId(GL.uniforms);GL.uniforms[id]=loc}}}}};function _SDL_SetVideoMode(width,height,depth,flags){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(event){Module["canvas"].addEventListener(event,SDL.receiveEvent,true)});var canvas=Module["canvas"];if(width==0&&height==0){width=canvas.width;height=canvas.height}if(!SDL.addedResizeListener){SDL.addedResizeListener=true;Browser.resizeListeners.push(function(w,h){if(!SDL.settingVideoMode){SDL.receiveEvent({type:"resize",w:w,h:h})}})}SDL.settingVideoMode=true;Browser.setCanvasSize(width,height);SDL.settingVideoMode=false;if(SDL.screen){SDL.freeSurface(SDL.screen);assert(!SDL.screen)}if(SDL.GL)flags=flags|67108864;SDL.screen=SDL.makeSurface(width,height,flags,true,"screen");return SDL.screen}function _SDL_ShowCursor(toggle){switch(toggle){case 0:if(Browser.isFullscreen){Module["canvas"].requestPointerLock();return 0}else{return 1}break;case 1:Module["canvas"].exitPointerLock();return 1;break;case-1:return!Browser.pointerLock;break;default:console.log("SDL_ShowCursor called with unknown toggle parameter value: "+toggle+".");break}}function _SDL_WM_SetCaption(title,icon){if(title&&typeof setWindowTitle!=="undefined"){setWindowTitle(UTF8ToString(title))}icon=icon&&UTF8ToString(icon)}function ___lock(){}var SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(dirfd,path){if(path[0]!=="/"){var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=FS.getStream(dirfd);if(!dirstream)throw new FS.ErrnoError(8);dir=dirstream.path}path=PATH.join2(dir,path)}return path},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-54}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=0;HEAP32[buf+8>>2]=stat.ino;HEAP32[buf+12>>2]=stat.mode;HEAP32[buf+16>>2]=stat.nlink;HEAP32[buf+20>>2]=stat.uid;HEAP32[buf+24>>2]=stat.gid;HEAP32[buf+28>>2]=stat.rdev;HEAP32[buf+32>>2]=0;tempI64=[stat.size>>>0,(tempDouble=stat.size,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[buf+40>>2]=tempI64[0],HEAP32[buf+44>>2]=tempI64[1];HEAP32[buf+48>>2]=4096;HEAP32[buf+52>>2]=stat.blocks;HEAP32[buf+56>>2]=stat.atime.getTime()/1e3|0;HEAP32[buf+60>>2]=0;HEAP32[buf+64>>2]=stat.mtime.getTime()/1e3|0;HEAP32[buf+68>>2]=0;HEAP32[buf+72>>2]=stat.ctime.getTime()/1e3|0;HEAP32[buf+76>>2]=0;tempI64=[stat.ino>>>0,(tempDouble=stat.ino,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[buf+80>>2]=tempI64[0],HEAP32[buf+84>>2]=tempI64[1];return 0},doMsync:function(addr,stream,len,flags,offset){var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},doMkdir:function(path,mode){path=PATH.normalize(path);if(path[path.length-1]==="/")path=path.substr(0,path.length-1);FS.mkdir(path,mode,0);return 0},doMknod:function(path,mode,dev){switch(mode&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}FS.mknod(path,mode,dev);return 0},doReadlink:function(path,buf,bufsize){if(bufsize<=0)return-28;var ret=FS.readlink(path);var len=Math.min(bufsize,lengthBytesUTF8(ret));var endChar=HEAP8[buf+len];stringToUTF8(ret,buf,bufsize+1);HEAP8[buf+len]=endChar;return len},doAccess:function(path,amode){if(amode&~7){return-28}var node;var lookup=FS.lookupPath(path,{follow:true});node=lookup.node;if(!node){return-44}var perms="";if(amode&4)perms+="r";if(amode&2)perms+="w";if(amode&1)perms+="x";if(perms&&FS.nodePermissions(node,perms)){return-2}return 0},doDup:function(path,flags,suggestFD){var suggest=FS.getStream(suggestFD);if(suggest)FS.close(suggest);return FS.open(path,flags,0,suggestFD,suggestFD).fd},doReadv:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break}return ret},doWritev:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr}return ret},varargs:0,get:function(varargs){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(){var ret=UTF8ToString(SYSCALLS.get());return ret},getStreamFromFD:function(fd){if(fd===undefined)fd=SYSCALLS.get();var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return stream},get64:function(){var low=SYSCALLS.get(),high=SYSCALLS.get();return low},getZero:function(){SYSCALLS.get()}};function ___syscall221(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),cmd=SYSCALLS.get();switch(cmd){case 0:{var arg=SYSCALLS.get();if(arg<0){return-28}var newStream;newStream=FS.open(stream.path,stream.flags,0,arg);return newStream.fd}case 1:case 2:return 0;case 3:return stream.flags;case 4:{var arg=SYSCALLS.get();stream.flags|=arg;return 0}case 12:{var arg=SYSCALLS.get();var offset=0;HEAP16[arg+offset>>1]=2;return 0}case 13:case 14:return 0;case 16:case 8:return-28;case 9:___setErrNo(28);return-1;default:{return-28}}}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall5(which,varargs){SYSCALLS.varargs=varargs;try{var pathname=SYSCALLS.getStr(),flags=SYSCALLS.get(),mode=SYSCALLS.get();var stream=FS.open(pathname,flags,mode);return stream.fd}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall54(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),op=SYSCALLS.get();switch(op){case 21509:case 21505:{if(!stream.tty)return-59;return 0}case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:{if(!stream.tty)return-59;return 0}case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.get();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-59;return-28}case 21531:{var argp=SYSCALLS.get();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-59;return 0}case 21524:{if(!stream.tty)return-59;return 0}default:abort("bad ioctl syscall "+op)}}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___unlock(){}function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);FS.close(stream);return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function ___wasi_fd_close(){return _fd_close.apply(null,arguments)}function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doReadv(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function ___wasi_fd_read(){return _fd_read.apply(null,arguments)}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{var stream=SYSCALLS.getStreamFromFD(fd);var HIGH_OFFSET=4294967296;var offset=offset_high*HIGH_OFFSET+(offset_low>>>0);var DOUBLE_LIMIT=9007199254740992;if(offset<=-DOUBLE_LIMIT||offset>=DOUBLE_LIMIT){return-61}FS.llseek(stream,offset,whence);tempI64=[stream.position>>>0,(tempDouble=stream.position,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[newOffset>>2]=tempI64[0],HEAP32[newOffset+4>>2]=tempI64[1];if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function ___wasi_fd_seek(){return _fd_seek.apply(null,arguments)}function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doWritev(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function ___wasi_fd_write(){return _fd_write.apply(null,arguments)}function getShiftFromSize(size){switch(size){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+size)}}function embind_init_charCodes(){var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i)}embind_charCodes=codes}var embind_charCodes=undefined;function readLatin1String(ptr){var ret="";var c=ptr;while(HEAPU8[c]){ret+=embind_charCodes[HEAPU8[c++]]}return ret}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var char_0=48;var char_9=57;function makeLegalFunctionName(name){if(undefined===name){return"_unknown"}name=name.replace(/[^a-zA-Z0-9_]/g,"$");var f=name.charCodeAt(0);if(f>=char_0&&f<=char_9){return"_"+name}else{return name}}function createNamedFunction(name,body){name=makeLegalFunctionName(name);return new Function("body","return function "+name+"() {\n"+'    "use strict";'+"    return body.apply(this, arguments);\n"+"};\n")(body)}function extendError(baseErrorType,errorName){var errorClass=createNamedFunction(errorName,function(message){this.name=errorName;this.message=message;var stack=new Error(message).stack;if(stack!==undefined){this.stack=this.toString()+"\n"+stack.replace(/^Error(:[^\n]*)?\n/,"")}});errorClass.prototype=Object.create(baseErrorType.prototype);errorClass.prototype.constructor=errorClass;errorClass.prototype.toString=function(){if(this.message===undefined){return this.name}else{return this.name+": "+this.message}};return errorClass}var BindingError=undefined;function throwBindingError(message){throw new BindingError(message)}var InternalError=undefined;function throwInternalError(message){throw new InternalError(message)}function whenDependentTypesAreResolved(myTypes,dependentTypes,getTypeConverters){myTypes.forEach(function(type){typeDependencies[type]=dependentTypes});function onComplete(typeConverters){var myTypeConverters=getTypeConverters(typeConverters);if(myTypeConverters.length!==myTypes.length){throwInternalError("Mismatched type converter count")}for(var i=0;i<myTypes.length;++i){registerType(myTypes[i],myTypeConverters[i])}}var typeConverters=new Array(dependentTypes.length);var unregisteredTypes=[];var registered=0;dependentTypes.forEach(function(dt,i){if(registeredTypes.hasOwnProperty(dt)){typeConverters[i]=registeredTypes[dt]}else{unregisteredTypes.push(dt);if(!awaitingDependencies.hasOwnProperty(dt)){awaitingDependencies[dt]=[]}awaitingDependencies[dt].push(function(){typeConverters[i]=registeredTypes[dt];++registered;if(registered===unregisteredTypes.length){onComplete(typeConverters)}})}});if(0===unregisteredTypes.length){onComplete(typeConverters)}}function registerType(rawType,registeredInstance,options){options=options||{};if(!("argPackAdvance"in registeredInstance)){throw new TypeError("registerType registeredInstance requires argPackAdvance")}var name=registeredInstance.name;if(!rawType){throwBindingError('type "'+name+'" must have a positive integer typeid pointer')}if(registeredTypes.hasOwnProperty(rawType)){if(options.ignoreDuplicateRegistrations){return}else{throwBindingError("Cannot register type '"+name+"' twice")}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(awaitingDependencies.hasOwnProperty(rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(function(cb){cb()})}}function __embind_register_bool(rawType,name,size,trueValue,falseValue){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function(wt){return!!wt},"toWireType":function(destructors,o){return o?trueValue:falseValue},"argPackAdvance":8,"readValueFromPointer":function(pointer){var heap;if(size===1){heap=HEAP8}else if(size===2){heap=HEAP16}else if(size===4){heap=HEAP32}else{throw new TypeError("Unknown boolean type size: "+name)}return this["fromWireType"](heap[pointer>>shift])},destructorFunction:null})}var emval_free_list=[];var emval_handle_array=[{},{value:undefined},{value:null},{value:true},{value:false}];function __emval_decref(handle){if(handle>4&&0===--emval_handle_array[handle].refcount){emval_handle_array[handle]=undefined;emval_free_list.push(handle)}}function count_emval_handles(){var count=0;for(var i=5;i<emval_handle_array.length;++i){if(emval_handle_array[i]!==undefined){++count}}return count}function get_first_emval(){for(var i=5;i<emval_handle_array.length;++i){if(emval_handle_array[i]!==undefined){return emval_handle_array[i]}}return null}function init_emval(){Module["count_emval_handles"]=count_emval_handles;Module["get_first_emval"]=get_first_emval}function __emval_register(value){switch(value){case undefined:{return 1}case null:{return 2}case true:{return 3}case false:{return 4}default:{var handle=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;emval_handle_array[handle]={refcount:1,value:value};return handle}}}function simpleReadValueFromPointer(pointer){return this["fromWireType"](HEAPU32[pointer>>2])}function __embind_register_emval(rawType,name){name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function(handle){var rv=emval_handle_array[handle].value;__emval_decref(handle);return rv},"toWireType":function(destructors,value){return __emval_register(value)},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:null})}function _embind_repr(v){if(v===null){return"null"}var t=typeof v;if(t==="object"||t==="array"||t==="function"){return v.toString()}else{return""+v}}function floatReadValueFromPointer(name,shift){switch(shift){case 2:return function(pointer){return this["fromWireType"](HEAPF32[pointer>>2])};case 3:return function(pointer){return this["fromWireType"](HEAPF64[pointer>>3])};default:throw new TypeError("Unknown float type: "+name)}}function __embind_register_float(rawType,name,size){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function(value){return value},"toWireType":function(destructors,value){if(typeof value!=="number"&&typeof value!=="boolean"){throw new TypeError('Cannot convert "'+_embind_repr(value)+'" to '+this.name)}return value},"argPackAdvance":8,"readValueFromPointer":floatReadValueFromPointer(name,shift),destructorFunction:null})}function integerReadValueFromPointer(name,shift,signed){switch(shift){case 0:return signed?function readS8FromPointer(pointer){return HEAP8[pointer]}:function readU8FromPointer(pointer){return HEAPU8[pointer]};case 1:return signed?function readS16FromPointer(pointer){return HEAP16[pointer>>1]}:function readU16FromPointer(pointer){return HEAPU16[pointer>>1]};case 2:return signed?function readS32FromPointer(pointer){return HEAP32[pointer>>2]}:function readU32FromPointer(pointer){return HEAPU32[pointer>>2]};default:throw new TypeError("Unknown integer type: "+name)}}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295}var shift=getShiftFromSize(size);var fromWireType=function(value){return value};if(minRange===0){var bitshift=32-8*size;fromWireType=function(value){return value<<bitshift>>>bitshift}}var isUnsignedType=name.indexOf("unsigned")!=-1;registerType(primitiveType,{name:name,"fromWireType":fromWireType,"toWireType":function(destructors,value){if(typeof value!=="number"&&typeof value!=="boolean"){throw new TypeError('Cannot convert "'+_embind_repr(value)+'" to '+this.name)}if(value<minRange||value>maxRange){throw new TypeError('Passing a number "'+_embind_repr(value)+'" from JS side to C/C++ side to an argument of type "'+name+'", which is outside the valid range ['+minRange+", "+maxRange+"]!")}return isUnsignedType?value>>>0:value|0},"argPackAdvance":8,"readValueFromPointer":integerReadValueFromPointer(name,shift,minRange!==0),destructorFunction:null})}function __embind_register_memory_view(rawType,dataTypeIndex,name){var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){handle=handle>>2;var heap=HEAPU32;var size=heap[handle];var data=heap[handle+1];return new TA(heap["buffer"],data,size)}name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":decodeMemoryView,"argPackAdvance":8,"readValueFromPointer":decodeMemoryView},{ignoreDuplicateRegistrations:true})}function __embind_register_std_string(rawType,name){name=readLatin1String(name);var stdStringIsUTF8=name==="std::string";registerType(rawType,{name:name,"fromWireType":function(value){var length=HEAPU32[value>>2];var str;if(stdStringIsUTF8){var endChar=HEAPU8[value+4+length];var endCharSwap=0;if(endChar!=0){endCharSwap=endChar;HEAPU8[value+4+length]=0}var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i;if(HEAPU8[currentBytePtr]==0){var stringSegment=UTF8ToString(decodeStartPtr);if(str===undefined)str=stringSegment;else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+1}}if(endCharSwap!=0)HEAPU8[value+4+length]=endCharSwap}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[value+4+i])}str=a.join("")}_free(value);return str},"toWireType":function(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value)}var getLength;var valueIsOfTypeString=typeof value==="string";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError("Cannot pass non-string to std::string")}if(stdStringIsUTF8&&valueIsOfTypeString){getLength=function(){return lengthBytesUTF8(value)}}else{getLength=function(){return value.length}}var length=getLength();var ptr=_malloc(4+length+1);HEAPU32[ptr>>2]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr+4,length+1)}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError("String has UTF-16 code units that do not fit in 8 bits")}HEAPU8[ptr+4+i]=charCode}}else{for(var i=0;i<length;++i){HEAPU8[ptr+4+i]=value[i]}}}if(destructors!==null){destructors.push(_free,ptr)}return ptr},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function(ptr){_free(ptr)}})}function __embind_register_std_wstring(rawType,charSize,name){name=readLatin1String(name);var decodeString,encodeString,getHeap,lengthBytesUTF,shift;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;getHeap=function(){return HEAPU16};shift=1}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;getHeap=function(){return HEAPU32};shift=2}registerType(rawType,{name:name,"fromWireType":function(value){var length=HEAPU32[value>>2];var HEAP=getHeap();var str;var endChar=HEAP[value+4+length*charSize>>shift];var endCharSwap=0;if(endChar!=0){endCharSwap=endChar;HEAP[value+4+length*charSize>>shift]=0}var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(HEAP[currentBytePtr>>shift]==0){var stringSegment=decodeString(decodeStartPtr);if(str===undefined)str=stringSegment;else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+charSize}}if(endCharSwap!=0)HEAP[value+4+length*charSize>>shift]=endCharSwap;_free(value);return str},"toWireType":function(destructors,value){if(!(typeof value==="string")){throwBindingError("Cannot pass non-string to C++ string type "+name)}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>2]=length>>shift;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr)}return ptr},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function(ptr){_free(ptr)}})}function __embind_register_void(rawType,name){name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,"argPackAdvance":0,"fromWireType":function(){return undefined},"toWireType":function(destructors,o){return undefined}})}function _emscripten_get_heap_size(){return HEAPU8.length}function abortOnCannotGrowMemory(requestedSize){abort("OOM")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}function _glAlphaFunc(){}function _glBindTexture(target,texture){GLctx.bindTexture(target,GL.textures[texture])}function _glClear(x0){GLctx["clear"](x0)}function _glClearColor(x0,x1,x2,x3){GLctx["clearColor"](x0,x1,x2,x3)}function _glDisable(x0){GLctx["disable"](x0)}function _glDisableClientState(cap){var attrib=GLEmulation.getAttributeFromCapability(cap);if(attrib===null){return}if(GLImmediate.enabledClientAttributes[attrib]){GLImmediate.enabledClientAttributes[attrib]=false;GLImmediate.totalEnabledClientAttributes--;GLImmediate.currentRenderer=null;if(GLEmulation.currentVao)delete GLEmulation.currentVao.enabledClientStates[cap];GLImmediate.modifiedClientAttributes=true}}function _glDrawArrays(mode,first,count){if(GLImmediate.totalEnabledClientAttributes==0&&mode<=6){GLctx.drawArrays(mode,first,count);return}GLImmediate.prepareClientAttributes(count,false);GLImmediate.mode=mode;if(!GL.currArrayBuffer){GLImmediate.vertexData=HEAPF32.subarray(GLImmediate.vertexPointer>>2,GLImmediate.vertexPointer+(first+count)*GLImmediate.stride>>2);GLImmediate.firstVertex=first;GLImmediate.lastVertex=first+count}GLImmediate.flush(null,first);GLImmediate.mode=-1}function _glDrawElements(mode,count,type,indices,start,end){if(GLImmediate.totalEnabledClientAttributes==0&&mode<=6&&GL.currElementArrayBuffer){GLctx.drawElements(mode,count,type,indices);return}GLImmediate.prepareClientAttributes(count,false);GLImmediate.mode=mode;if(!GL.currArrayBuffer){GLImmediate.firstVertex=end?start:HEAP8.length;GLImmediate.lastVertex=end?end+1:0;GLImmediate.vertexData=HEAPF32.subarray(GLImmediate.vertexPointer>>2,end?GLImmediate.vertexPointer+(end+1)*GLImmediate.stride>>2:undefined)}GLImmediate.flush(count,0,indices);GLImmediate.mode=-1}function _glEnable(x0){GLctx["enable"](x0)}function _glEnableClientState(cap){var attrib=GLEmulation.getAttributeFromCapability(cap);if(attrib===null){return}if(!GLImmediate.enabledClientAttributes[attrib]){GLImmediate.enabledClientAttributes[attrib]=true;GLImmediate.totalEnabledClientAttributes++;GLImmediate.currentRenderer=null;if(GLEmulation.currentVao)GLEmulation.currentVao.enabledClientStates[cap]=1;GLImmediate.modifiedClientAttributes=true}}function __glGenObject(n,buffers,createFunction,objectTable){for(var i=0;i<n;i++){var buffer=GLctx[createFunction]();var id=buffer&&GL.getNewId(objectTable);if(buffer){buffer.name=id;objectTable[id]=buffer}else{GL.recordError(1282)}HEAP32[buffers+i*4>>2]=id}}function _glGenTextures(n,textures){__glGenObject(n,textures,"createTexture",GL.textures)}function _glLoadMatrixf(matrix){GLImmediate.matricesModified=true;GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0;GLImmediate.matrixLib.mat4.set(HEAPF32.subarray(matrix>>2,matrix+64>>2),GLImmediate.matrix[GLImmediate.currentMatrix])}function _glIsEnabled(x0){return GLctx["isEnabled"](x0)}function writeI53ToI64(ptr,num){HEAPU32[ptr>>2]=num;HEAPU32[ptr+4>>2]=(num-HEAPU32[ptr>>2])/4294967296}function emscriptenWebGLGet(name_,p,type){if(!p){GL.recordError(1281);return}var ret=undefined;switch(name_){case 36346:ret=1;break;case 36344:if(type!=0&&type!=1){GL.recordError(1280)}return;case 36345:ret=0;break;case 34466:var formats=GLctx.getParameter(34467);ret=formats?formats.length:0;break}if(ret===undefined){var result=GLctx.getParameter(name_);switch(typeof result){case"number":ret=result;break;case"boolean":ret=result?1:0;break;case"string":GL.recordError(1280);return;case"object":if(result===null){switch(name_){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:{ret=0;break}default:{GL.recordError(1280);return}}}else if(result instanceof Float32Array||result instanceof Uint32Array||result instanceof Int32Array||result instanceof Array){for(var i=0;i<result.length;++i){switch(type){case 0:HEAP32[p+i*4>>2]=result[i];break;case 2:HEAPF32[p+i*4>>2]=result[i];break;case 4:HEAP8[p+i>>0]=result[i]?1:0;break}}return}else{try{ret=result.name|0}catch(e){GL.recordError(1280);err("GL_INVALID_ENUM in glGet"+type+"v: Unknown object returned from WebGL getParameter("+name_+")! (error: "+e+")");return}}break;default:GL.recordError(1280);err("GL_INVALID_ENUM in glGet"+type+"v: Native code calling glGet"+type+"v("+name_+") and it returns "+result+" of type "+typeof result+"!");return}}switch(type){case 1:writeI53ToI64(p,ret);break;case 0:HEAP32[p>>2]=ret;break;case 2:HEAPF32[p>>2]=ret;break;case 4:HEAP8[p>>0]=ret?1:0;break}}function _glGetBooleanv(name_,p){emscriptenWebGLGet(name_,p,4)}function _glGetIntegerv(name_,p){emscriptenWebGLGet(name_,p,0)}function stringToNewUTF8(jsString){var length=lengthBytesUTF8(jsString)+1;var cString=_malloc(length);stringToUTF8(jsString,cString,length);return cString}function _glGetString(name_){if(GL.stringCache[name_])return GL.stringCache[name_];var ret;switch(name_){case 7939:var exts=GLctx.getSupportedExtensions()||[];exts=exts.concat(exts.map(function(e){return"GL_"+e}));ret=stringToNewUTF8(exts.join(" "));break;case 7936:case 7937:case 37445:case 37446:var s=GLctx.getParameter(name_);if(!s){GL.recordError(1280)}ret=stringToNewUTF8(s);break;case 7938:var glVersion=GLctx.getParameter(7938);{glVersion="OpenGL ES 2.0 ("+glVersion+")"}ret=stringToNewUTF8(glVersion);break;case 35724:var glslVersion=GLctx.getParameter(35724);var ver_re=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/;var ver_num=glslVersion.match(ver_re);if(ver_num!==null){if(ver_num[1].length==3)ver_num[1]=ver_num[1]+"0";glslVersion="OpenGL ES GLSL ES "+ver_num[1]+" ("+glslVersion+")"}ret=stringToNewUTF8(glslVersion);break;default:GL.recordError(1280);return 0}GL.stringCache[name_]=ret;return ret}function _glCreateShader(shaderType){var id=GL.getNewId(GL.shaders);GL.shaders[id]=GLctx.createShader(shaderType);return id}function _glShaderSource(shader,count,string,length){var source=GL.getSource(shader,count,string,length);GLctx.shaderSource(GL.shaders[shader],source)}function _glCompileShader(shader){GLctx.compileShader(GL.shaders[shader])}function _glAttachShader(program,shader){GLctx.attachShader(GL.programs[program],GL.shaders[shader])}function _glDetachShader(program,shader){GLctx.detachShader(GL.programs[program],GL.shaders[shader])}function _glUseProgram(program){GLctx.useProgram(GL.programs[program])}function _glDeleteProgram(id){if(!id)return;var program=GL.programs[id];if(!program){GL.recordError(1281);return}GLctx.deleteProgram(program);program.name=0;GL.programs[id]=null;GL.programInfos[id]=null}function _glBindAttribLocation(program,index,name){GLctx.bindAttribLocation(GL.programs[program],index,UTF8ToString(name))}function _glLinkProgram(program){GLctx.linkProgram(GL.programs[program]);GL.populateUniformTable(program)}function _glBindBuffer(target,buffer){if(target==34962){GL.currArrayBuffer=buffer;GLImmediate.lastArrayBuffer=buffer}else if(target==34963){GL.currElementArrayBuffer=buffer}GLctx.bindBuffer(target,GL.buffers[buffer])}function _glGetFloatv(name_,p){emscriptenWebGLGet(name_,p,2)}function _glHint(x0,x1){GLctx["hint"](x0,x1)}function _glEnableVertexAttribArray(index){GLctx.enableVertexAttribArray(index)}function _glDisableVertexAttribArray(index){GLctx.disableVertexAttribArray(index)}function _glVertexAttribPointer(index,size,type,normalized,stride,ptr){GLctx.vertexAttribPointer(index,size,type,!!normalized,stride,ptr)}function _glActiveTexture(x0){GLctx["activeTexture"](x0)}var GLEmulation={fogStart:0,fogEnd:1,fogDensity:1,fogColor:null,fogMode:2048,fogEnabled:false,vaos:[],currentVao:null,enabledVertexAttribArrays:{},hasRunInit:false,findToken:function(source,token){function isIdentChar(ch){if(ch>=48&&ch<=57)return true;if(ch>=65&&ch<=90)return true;if(ch>=97&&ch<=122)return true;return false}var i=-1;do{i=source.indexOf(token,i+1);if(i<0){break}if(i>0&&isIdentChar(source[i-1])){continue}i+=token.length;if(i<source.length-1&&isIdentChar(source[i+1])){continue}return true}while(true);return false},init:function(){if(GLEmulation.hasRunInit){return}GLEmulation.hasRunInit=true;GLEmulation.fogColor=new Float32Array(4);err("WARNING: using emscripten GL emulation. This is a collection of limited workarounds, do not expect it to work.");err("WARNING: using emscripten GL emulation unsafe opts. If weirdness happens, try -s GL_UNSAFE_OPTS=0");var validCapabilities={2884:1,3042:1,3024:1,2960:1,2929:1,3089:1,32823:1,32926:1,32928:1};var glEnable=_glEnable;_glEnable=_emscripten_glEnable=function _glEnable(cap){if(GLImmediate.lastRenderer)GLImmediate.lastRenderer.cleanup();if(cap==2912){if(GLEmulation.fogEnabled!=true){GLImmediate.currentRenderer=null;GLEmulation.fogEnabled=true}return}else if(cap==3553){return}else if(!(cap in validCapabilities)){return}glEnable(cap)};var glDisable=_glDisable;_glDisable=_emscripten_glDisable=function _glDisable(cap){if(GLImmediate.lastRenderer)GLImmediate.lastRenderer.cleanup();if(cap==2912){if(GLEmulation.fogEnabled!=false){GLImmediate.currentRenderer=null;GLEmulation.fogEnabled=false}return}else if(cap==3553){return}else if(!(cap in validCapabilities)){return}glDisable(cap)};_glIsEnabled=_emscripten_glIsEnabled=function _glIsEnabled(cap){if(cap==2912){return GLEmulation.fogEnabled?1:0}else if(!(cap in validCapabilities)){return 0}return GLctx.isEnabled(cap)};var glGetBooleanv=_glGetBooleanv;_glGetBooleanv=_emscripten_glGetBooleanv=function _glGetBooleanv(pname,p){var attrib=GLEmulation.getAttributeFromCapability(pname);if(attrib!==null){var result=GLImmediate.enabledClientAttributes[attrib];HEAP8[p>>0]=result===true?1:0;return}glGetBooleanv(pname,p)};var glGetIntegerv=_glGetIntegerv;_glGetIntegerv=_emscripten_glGetIntegerv=function _glGetIntegerv(pname,params){switch(pname){case 34018:pname=GLctx.MAX_TEXTURE_IMAGE_UNITS;break;case 35658:{var result=GLctx.getParameter(GLctx.MAX_VERTEX_UNIFORM_VECTORS);HEAP32[params>>2]=result*4;return}case 35657:{var result=GLctx.getParameter(GLctx.MAX_FRAGMENT_UNIFORM_VECTORS);HEAP32[params>>2]=result*4;return}case 35659:{var result=GLctx.getParameter(GLctx.MAX_VARYING_VECTORS);HEAP32[params>>2]=result*4;return}case 34929:pname=GLctx.MAX_COMBINED_TEXTURE_IMAGE_UNITS;break;case 32890:{var attribute=GLImmediate.clientAttributes[GLImmediate.VERTEX];HEAP32[params>>2]=attribute?attribute.size:0;return}case 32891:{var attribute=GLImmediate.clientAttributes[GLImmediate.VERTEX];HEAP32[params>>2]=attribute?attribute.type:0;return}case 32892:{var attribute=GLImmediate.clientAttributes[GLImmediate.VERTEX];HEAP32[params>>2]=attribute?attribute.stride:0;return}case 32897:{var attribute=GLImmediate.clientAttributes[GLImmediate.COLOR];HEAP32[params>>2]=attribute?attribute.size:0;return}case 32898:{var attribute=GLImmediate.clientAttributes[GLImmediate.COLOR];HEAP32[params>>2]=attribute?attribute.type:0;return}case 32899:{var attribute=GLImmediate.clientAttributes[GLImmediate.COLOR];HEAP32[params>>2]=attribute?attribute.stride:0;return}case 32904:{var attribute=GLImmediate.clientAttributes[GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture];HEAP32[params>>2]=attribute?attribute.size:0;return}case 32905:{var attribute=GLImmediate.clientAttributes[GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture];HEAP32[params>>2]=attribute?attribute.type:0;return}case 32906:{var attribute=GLImmediate.clientAttributes[GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture];HEAP32[params>>2]=attribute?attribute.stride:0;return}}glGetIntegerv(pname,params)};var glGetString=_glGetString;_glGetString=_emscripten_glGetString=function _glGetString(name_){if(GL.stringCache[name_])return GL.stringCache[name_];switch(name_){case 7939:var ret=stringToNewUTF8((GLctx.getSupportedExtensions()||[]).join(" ")+" GL_EXT_texture_env_combine GL_ARB_texture_env_crossbar GL_ATI_texture_env_combine3 GL_NV_texture_env_combine4 GL_EXT_texture_env_dot3 GL_ARB_multitexture GL_ARB_vertex_buffer_object GL_EXT_framebuffer_object GL_ARB_vertex_program GL_ARB_fragment_program GL_ARB_shading_language_100 GL_ARB_shader_objects GL_ARB_vertex_shader GL_ARB_fragment_shader GL_ARB_texture_cube_map GL_EXT_draw_range_elements"+(GL.currentContext.compressionExt?" GL_ARB_texture_compression GL_EXT_texture_compression_s3tc":"")+(GL.currentContext.anisotropicExt?" GL_EXT_texture_filter_anisotropic":""));GL.stringCache[name_]=ret;return ret}return glGetString(name_)};GL.shaderInfos={};var glCreateShader=_glCreateShader;_glCreateShader=_emscripten_glCreateShader=function _glCreateShader(shaderType){var id=glCreateShader(shaderType);GL.shaderInfos[id]={type:shaderType,ftransform:false};return id};function ensurePrecision(source){if(!/precision +(low|medium|high)p +float *;/.test(source)){source="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n"+source}return source}_glShaderSource=_emscripten_glShaderSource=function _glShaderSource(shader,count,string,length){var source=GL.getSource(shader,count,string,length);if(GL.shaderInfos[shader].type==GLctx.VERTEX_SHADER){var has_pm=source.search(/u_projection/)>=0;var has_mm=source.search(/u_modelView/)>=0;var has_pv=source.search(/a_position/)>=0;var need_pm=0,need_mm=0,need_pv=0;var old=source;source=source.replace(/ftransform\(\)/g,"(u_projection * u_modelView * a_position)");if(old!=source)need_pm=need_mm=need_pv=1;old=source;source=source.replace(/gl_ProjectionMatrix/g,"u_projection");if(old!=source)need_pm=1;old=source;source=source.replace(/gl_ModelViewMatrixTranspose\[2\]/g,"vec4(u_modelView[0][2], u_modelView[1][2], u_modelView[2][2], u_modelView[3][2])");if(old!=source)need_mm=1;old=source;source=source.replace(/gl_ModelViewMatrix/g,"u_modelView");if(old!=source)need_mm=1;old=source;source=source.replace(/gl_Vertex/g,"a_position");if(old!=source)need_pv=1;old=source;source=source.replace(/gl_ModelViewProjectionMatrix/g,"(u_projection * u_modelView)");if(old!=source)need_pm=need_mm=1;if(need_pv&&!has_pv)source="attribute vec4 a_position; \n"+source;if(need_mm&&!has_mm)source="uniform mat4 u_modelView; \n"+source;if(need_pm&&!has_pm)source="uniform mat4 u_projection; \n"+source;GL.shaderInfos[shader].ftransform=need_pm||need_mm||need_pv;for(var i=0;i<GLImmediate.MAX_TEXTURES;i++){old=source;var need_vtc=source.search("v_texCoord"+i)==-1;source=source.replace(new RegExp("gl_TexCoord\\["+i+"\\]","g"),"v_texCoord"+i).replace(new RegExp("gl_MultiTexCoord"+i,"g"),"a_texCoord"+i);if(source!=old){source="attribute vec4 a_texCoord"+i+"; \n"+source;if(need_vtc){source="varying vec4 v_texCoord"+i+";   \n"+source}}old=source;source=source.replace(new RegExp("gl_TextureMatrix\\["+i+"\\]","g"),"u_textureMatrix"+i);if(source!=old){source="uniform mat4 u_textureMatrix"+i+"; \n"+source}}if(source.indexOf("gl_FrontColor")>=0){source="varying vec4 v_color; \n"+source.replace(/gl_FrontColor/g,"v_color")}if(source.indexOf("gl_Color")>=0){source="attribute vec4 a_color; \n"+source.replace(/gl_Color/g,"a_color")}if(source.indexOf("gl_Normal")>=0){source="attribute vec3 a_normal; \n"+source.replace(/gl_Normal/g,"a_normal")}if(source.indexOf("gl_FogFragCoord")>=0){source="varying float v_fogFragCoord;   \n"+source.replace(/gl_FogFragCoord/g,"v_fogFragCoord")}}else{for(i=0;i<GLImmediate.MAX_TEXTURES;i++){old=source;source=source.replace(new RegExp("gl_TexCoord\\["+i+"\\]","g"),"v_texCoord"+i);if(source!=old){source="varying vec4 v_texCoord"+i+";   \n"+source}}if(source.indexOf("gl_Color")>=0){source="varying vec4 v_color; \n"+source.replace(/gl_Color/g,"v_color")}if(source.indexOf("gl_Fog.color")>=0){source="uniform vec4 u_fogColor;   \n"+source.replace(/gl_Fog.color/g,"u_fogColor")}if(source.indexOf("gl_Fog.end")>=0){source="uniform float u_fogEnd;   \n"+source.replace(/gl_Fog.end/g,"u_fogEnd")}if(source.indexOf("gl_Fog.scale")>=0){source="uniform float u_fogScale;   \n"+source.replace(/gl_Fog.scale/g,"u_fogScale")}if(source.indexOf("gl_Fog.density")>=0){source="uniform float u_fogDensity;   \n"+source.replace(/gl_Fog.density/g,"u_fogDensity")}if(source.indexOf("gl_FogFragCoord")>=0){source="varying float v_fogFragCoord;   \n"+source.replace(/gl_FogFragCoord/g,"v_fogFragCoord")}source=ensurePrecision(source)}GLctx.shaderSource(GL.shaders[shader],source)};_glCompileShader=_emscripten_glCompileShader=function _glCompileShader(shader){GLctx.compileShader(GL.shaders[shader])};GL.programShaders={};var glAttachShader=_glAttachShader;_glAttachShader=_emscripten_glAttachShader=function _glAttachShader(program,shader){if(!GL.programShaders[program])GL.programShaders[program]=[];GL.programShaders[program].push(shader);glAttachShader(program,shader)};var glDetachShader=_glDetachShader;_glDetachShader=_emscripten_glDetachShader=function _glDetachShader(program,shader){var programShader=GL.programShaders[program];if(!programShader){err("WARNING: _glDetachShader received invalid program: "+program);return}var index=programShader.indexOf(shader);programShader.splice(index,1);glDetachShader(program,shader)};var glUseProgram=_glUseProgram;_glUseProgram=_emscripten_glUseProgram=function _glUseProgram(program){if(GL.currProgram!=program){GLImmediate.currentRenderer=null;GL.currProgram=program;GLImmediate.fixedFunctionProgram=0;glUseProgram(program)}};var glDeleteProgram=_glDeleteProgram;_glDeleteProgram=_emscripten_glDeleteProgram=function _glDeleteProgram(program){glDeleteProgram(program);if(program==GL.currProgram){GLImmediate.currentRenderer=null;GL.currProgram=0}};var zeroUsedPrograms={};var glBindAttribLocation=_glBindAttribLocation;_glBindAttribLocation=_emscripten_glBindAttribLocation=function _glBindAttribLocation(program,index,name){if(index==0)zeroUsedPrograms[program]=true;glBindAttribLocation(program,index,name)};var glLinkProgram=_glLinkProgram;_glLinkProgram=_emscripten_glLinkProgram=function _glLinkProgram(program){if(!(program in zeroUsedPrograms)){GLctx.bindAttribLocation(GL.programs[program],0,"a_position")}glLinkProgram(program)};var glBindBuffer=_glBindBuffer;_glBindBuffer=_emscripten_glBindBuffer=function _glBindBuffer(target,buffer){glBindBuffer(target,buffer);if(target==GLctx.ARRAY_BUFFER){if(GLEmulation.currentVao){GLEmulation.currentVao.arrayBuffer=buffer}}else if(target==GLctx.ELEMENT_ARRAY_BUFFER){if(GLEmulation.currentVao)GLEmulation.currentVao.elementArrayBuffer=buffer}};var glGetFloatv=_glGetFloatv;_glGetFloatv=_emscripten_glGetFloatv=function _glGetFloatv(pname,params){if(pname==2982){HEAPF32.set(GLImmediate.matrix[0],params>>2)}else if(pname==2983){HEAPF32.set(GLImmediate.matrix[1],params>>2)}else if(pname==2984){HEAPF32.set(GLImmediate.matrix[2+GLImmediate.clientActiveTexture],params>>2)}else if(pname==2918){HEAPF32.set(GLEmulation.fogColor,params>>2)}else if(pname==2915){HEAPF32[params>>2]=GLEmulation.fogStart}else if(pname==2916){HEAPF32[params>>2]=GLEmulation.fogEnd}else if(pname==2914){HEAPF32[params>>2]=GLEmulation.fogDensity}else if(pname==2917){HEAPF32[params>>2]=GLEmulation.fogMode}else{glGetFloatv(pname,params)}};var glHint=_glHint;_glHint=_emscripten_glHint=function _glHint(target,mode){if(target==34031){return}glHint(target,mode)};var glEnableVertexAttribArray=_glEnableVertexAttribArray;_glEnableVertexAttribArray=_emscripten_glEnableVertexAttribArray=function _glEnableVertexAttribArray(index){glEnableVertexAttribArray(index);GLEmulation.enabledVertexAttribArrays[index]=1;if(GLEmulation.currentVao)GLEmulation.currentVao.enabledVertexAttribArrays[index]=1};var glDisableVertexAttribArray=_glDisableVertexAttribArray;_glDisableVertexAttribArray=_emscripten_glDisableVertexAttribArray=function _glDisableVertexAttribArray(index){glDisableVertexAttribArray(index);delete GLEmulation.enabledVertexAttribArrays[index];if(GLEmulation.currentVao)delete GLEmulation.currentVao.enabledVertexAttribArrays[index]};var glVertexAttribPointer=_glVertexAttribPointer;_glVertexAttribPointer=_emscripten_glVertexAttribPointer=function _glVertexAttribPointer(index,size,type,normalized,stride,pointer){glVertexAttribPointer(index,size,type,normalized,stride,pointer);if(GLEmulation.currentVao){GLEmulation.currentVao.vertexAttribPointers[index]=[index,size,type,normalized,stride,pointer]}}},getAttributeFromCapability:function(cap){var attrib=null;switch(cap){case 3553:case 32888:attrib=GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture;break;case 32884:attrib=GLImmediate.VERTEX;break;case 32885:attrib=GLImmediate.NORMAL;break;case 32886:attrib=GLImmediate.COLOR;break}return attrib}};var GLImmediate={MapTreeLib:null,spawnMapTreeLib:function(){function CNaiveListMap(){var list=[];this.insert=function CNaiveListMap_insert(key,val){if(this.contains(key|0))return false;list.push([key,val]);return true};var __contains_i;this.contains=function CNaiveListMap_contains(key){for(__contains_i=0;__contains_i<list.length;++__contains_i){if(list[__contains_i][0]===key)return true}return false};var __get_i;this.get=function CNaiveListMap_get(key){for(__get_i=0;__get_i<list.length;++__get_i){if(list[__get_i][0]===key)return list[__get_i][1]}return undefined}}function CMapTree(){function CNLNode(){var map=new CNaiveListMap;this.child=function CNLNode_child(keyFrag){if(!map.contains(keyFrag|0)){map.insert(keyFrag|0,new CNLNode)}return map.get(keyFrag|0)};this.value=undefined;this.get=function CNLNode_get(){return this.value};this.set=function CNLNode_set(val){this.value=val}}function CKeyView(root){var cur;this.reset=function CKeyView_reset(){cur=root;return this};this.reset();this.next=function CKeyView_next(keyFrag){cur=cur.child(keyFrag);return this};this.get=function CKeyView_get(){return cur.get()};this.set=function CKeyView_set(val){cur.set(val)}}var root;var staticKeyView;this.createKeyView=function CNLNode_createKeyView(){return new CKeyView(root)};this.clear=function CNLNode_clear(){root=new CNLNode;staticKeyView=this.createKeyView()};this.clear();this.getStaticKeyView=function CNLNode_getStaticKeyView(){staticKeyView.reset();return staticKeyView}}return{create:function(){return new CMapTree}}},TexEnvJIT:null,spawnTexEnvJIT:function(){var GL_TEXTURE0=33984;var GL_TEXTURE_1D=3552;var GL_TEXTURE_2D=3553;var GL_TEXTURE_3D=32879;var GL_TEXTURE_CUBE_MAP=34067;var GL_TEXTURE_ENV=8960;var GL_TEXTURE_ENV_MODE=8704;var GL_TEXTURE_ENV_COLOR=8705;var GL_SRC0_RGB=34176;var GL_SRC1_RGB=34177;var GL_SRC2_RGB=34178;var GL_SRC0_ALPHA=34184;var GL_SRC1_ALPHA=34185;var GL_SRC2_ALPHA=34186;var GL_OPERAND0_RGB=34192;var GL_OPERAND1_RGB=34193;var GL_OPERAND2_RGB=34194;var GL_OPERAND0_ALPHA=34200;var GL_OPERAND1_ALPHA=34201;var GL_OPERAND2_ALPHA=34202;var GL_COMBINE_RGB=34161;var GL_COMBINE_ALPHA=34162;var GL_RGB_SCALE=34163;var GL_ALPHA_SCALE=3356;var GL_ADD=260;var GL_BLEND=3042;var GL_REPLACE=7681;var GL_MODULATE=8448;var GL_DECAL=8449;var GL_COMBINE=34160;var GL_SUBTRACT=34023;var GL_INTERPOLATE=34165;var GL_TEXTURE=5890;var GL_CONSTANT=34166;var GL_PRIMARY_COLOR=34167;var GL_PREVIOUS=34168;var GL_SRC_COLOR=768;var GL_ONE_MINUS_SRC_COLOR=769;var GL_SRC_ALPHA=770;var GL_ONE_MINUS_SRC_ALPHA=771;var TEXENVJIT_NAMESPACE_PREFIX="tej_";var TEX_UNIT_UNIFORM_PREFIX="uTexUnit";var TEX_COORD_VARYING_PREFIX="vTexCoord";var PRIM_COLOR_VARYING="vPrimColor";var TEX_MATRIX_UNIFORM_PREFIX="uTexMatrix";var s_texUnits=null;var s_activeTexture=0;var s_requiredTexUnitsForPass=[];function abort(info){assert(false,"[TexEnvJIT] ABORT: "+info)}function abort_noSupport(info){abort("No support: "+info)}function abort_sanity(info){abort("Sanity failure: "+info)}function genTexUnitSampleExpr(texUnitID){var texUnit=s_texUnits[texUnitID];var texType=texUnit.getTexType();var func=null;switch(texType){case GL_TEXTURE_1D:func="texture2D";break;case GL_TEXTURE_2D:func="texture2D";break;case GL_TEXTURE_3D:return abort_noSupport("No support for 3D textures.");case GL_TEXTURE_CUBE_MAP:func="textureCube";break;default:return abort_sanity("Unknown texType: 0x"+texType.toString(16))}var texCoordExpr=TEX_COORD_VARYING_PREFIX+texUnitID;if(TEX_MATRIX_UNIFORM_PREFIX!=null){texCoordExpr="("+TEX_MATRIX_UNIFORM_PREFIX+texUnitID+" * "+texCoordExpr+")"}return func+"("+TEX_UNIT_UNIFORM_PREFIX+texUnitID+", "+texCoordExpr+".xy)"}function getTypeFromCombineOp(op){switch(op){case GL_SRC_COLOR:case GL_ONE_MINUS_SRC_COLOR:return"vec3";case GL_SRC_ALPHA:case GL_ONE_MINUS_SRC_ALPHA:return"float"}return abort_noSupport("Unsupported combiner op: 0x"+op.toString(16))}function getCurTexUnit(){return s_texUnits[s_activeTexture]}function genCombinerSourceExpr(texUnitID,constantExpr,previousVar,src,op){var srcExpr=null;switch(src){case GL_TEXTURE:srcExpr=genTexUnitSampleExpr(texUnitID);break;case GL_CONSTANT:srcExpr=constantExpr;break;case GL_PRIMARY_COLOR:srcExpr=PRIM_COLOR_VARYING;break;case GL_PREVIOUS:srcExpr=previousVar;break;default:return abort_noSupport("Unsupported combiner src: 0x"+src.toString(16))}var expr=null;switch(op){case GL_SRC_COLOR:expr=srcExpr+".rgb";break;case GL_ONE_MINUS_SRC_COLOR:expr="(vec3(1.0) - "+srcExpr+".rgb)";break;case GL_SRC_ALPHA:expr=srcExpr+".a";break;case GL_ONE_MINUS_SRC_ALPHA:expr="(1.0 - "+srcExpr+".a)";break;default:return abort_noSupport("Unsupported combiner op: 0x"+op.toString(16))}return expr}function valToFloatLiteral(val){if(val==Math.round(val))return val+".0";return val}function CTexEnv(){this.mode=GL_MODULATE;this.colorCombiner=GL_MODULATE;this.alphaCombiner=GL_MODULATE;this.colorScale=1;this.alphaScale=1;this.envColor=[0,0,0,0];this.colorSrc=[GL_TEXTURE,GL_PREVIOUS,GL_CONSTANT];this.alphaSrc=[GL_TEXTURE,GL_PREVIOUS,GL_CONSTANT];this.colorOp=[GL_SRC_COLOR,GL_SRC_COLOR,GL_SRC_ALPHA];this.alphaOp=[GL_SRC_ALPHA,GL_SRC_ALPHA,GL_SRC_ALPHA];this.traverseKey={7681:0,8448:1,260:2,3042:3,8449:4,34160:5,34023:3,34165:4,5890:0,34166:1,34167:2,34168:3,768:0,769:1,770:2,771:3};this.key0=-1;this.key1=0;this.key2=0;this.computeKey0=function(){var k=this.traverseKey;var key=k[this.mode]*1638400;key+=k[this.colorCombiner]*327680;key+=k[this.alphaCombiner]*65536;key+=(this.colorScale-1)*16384;key+=(this.alphaScale-1)*4096;key+=k[this.colorSrc[0]]*1024;key+=k[this.colorSrc[1]]*256;key+=k[this.colorSrc[2]]*64;key+=k[this.alphaSrc[0]]*16;key+=k[this.alphaSrc[1]]*4;key+=k[this.alphaSrc[2]];return key};this.computeKey1=function(){var k=this.traverseKey;key=k[this.colorOp[0]]*4096;key+=k[this.colorOp[1]]*1024;key+=k[this.colorOp[2]]*256;key+=k[this.alphaOp[0]]*16;key+=k[this.alphaOp[1]]*4;key+=k[this.alphaOp[2]];return key};this.computeKey2=function(){return this.envColor[0]*16777216+this.envColor[1]*65536+this.envColor[2]*256+1+this.envColor[3]};this.recomputeKey=function(){this.key0=this.computeKey0();this.key1=this.computeKey1();this.key2=this.computeKey2()};this.invalidateKey=function(){this.key0=-1;GLImmediate.currentRenderer=null}}function CTexUnit(){this.env=new CTexEnv;this.enabled_tex1D=false;this.enabled_tex2D=false;this.enabled_tex3D=false;this.enabled_texCube=false;this.texTypesEnabled=0;this.traverseState=function CTexUnit_traverseState(keyView){if(this.texTypesEnabled){if(this.env.key0==-1){this.env.recomputeKey()}keyView.next(this.texTypesEnabled|this.env.key0<<4);keyView.next(this.env.key1);keyView.next(this.env.key2)}else{keyView.next(0)}}}CTexUnit.prototype.enabled=function CTexUnit_enabled(){return this.texTypesEnabled};CTexUnit.prototype.genPassLines=function CTexUnit_genPassLines(passOutputVar,passInputVar,texUnitID){if(!this.enabled()){return["vec4 "+passOutputVar+" = "+passInputVar+";"]}var lines=this.env.genPassLines(passOutputVar,passInputVar,texUnitID).join("\n");var texLoadLines="";var texLoadRegex=/(texture.*?\(.*?\))/g;var loadCounter=0;var load;while(load=texLoadRegex.exec(lines)){var texLoadExpr=load[1];var secondOccurrence=lines.slice(load.index+1).indexOf(texLoadExpr);if(secondOccurrence!=-1){var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+texUnitID+"_";var texLoadVar=prefix+"texload"+loadCounter++;var texLoadLine="vec4 "+texLoadVar+" = "+texLoadExpr+";\n";texLoadLines+=texLoadLine+"\n";lines=lines.split(texLoadExpr).join(texLoadVar);texLoadRegex=/(texture.*\(.*\))/g}}return[texLoadLines+lines]};CTexUnit.prototype.getTexType=function CTexUnit_getTexType(){if(this.enabled_texCube){return GL_TEXTURE_CUBE_MAP}else if(this.enabled_tex3D){return GL_TEXTURE_3D}else if(this.enabled_tex2D){return GL_TEXTURE_2D}else if(this.enabled_tex1D){return GL_TEXTURE_1D}return 0};CTexEnv.prototype.genPassLines=function CTexEnv_genPassLines(passOutputVar,passInputVar,texUnitID){switch(this.mode){case GL_REPLACE:{return["vec4 "+passOutputVar+" = "+genTexUnitSampleExpr(texUnitID)+";"]}case GL_ADD:{var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+texUnitID+"_";var texVar=prefix+"tex";var colorVar=prefix+"color";var alphaVar=prefix+"alpha";return["vec4 "+texVar+" = "+genTexUnitSampleExpr(texUnitID)+";","vec3 "+colorVar+" = "+passInputVar+".rgb + "+texVar+".rgb;","float "+alphaVar+" = "+passInputVar+".a * "+texVar+".a;","vec4 "+passOutputVar+" = vec4("+colorVar+", "+alphaVar+");"]}case GL_MODULATE:{var line=["vec4 "+passOutputVar," = ",passInputVar," * ",genTexUnitSampleExpr(texUnitID),";"];return[line.join("")]}case GL_DECAL:{var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+texUnitID+"_";var texVar=prefix+"tex";var colorVar=prefix+"color";var alphaVar=prefix+"alpha";return["vec4 "+texVar+" = "+genTexUnitSampleExpr(texUnitID)+";",["vec3 "+colorVar+" = ",passInputVar+".rgb * (1.0 - "+texVar+".a)"," + ",texVar+".rgb * "+texVar+".a",";"].join(""),"float "+alphaVar+" = "+passInputVar+".a;","vec4 "+passOutputVar+" = vec4("+colorVar+", "+alphaVar+");"]}case GL_BLEND:{var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+texUnitID+"_";var texVar=prefix+"tex";var colorVar=prefix+"color";var alphaVar=prefix+"alpha";return["vec4 "+texVar+" = "+genTexUnitSampleExpr(texUnitID)+";",["vec3 "+colorVar+" = ",passInputVar+".rgb * (1.0 - "+texVar+".rgb)"," + ",PRIM_COLOR_VARYING+".rgb * "+texVar+".rgb",";"].join(""),"float "+alphaVar+" = "+texVar+".a;","vec4 "+passOutputVar+" = vec4("+colorVar+", "+alphaVar+");"]}case GL_COMBINE:{var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+texUnitID+"_";var colorVar=prefix+"color";var alphaVar=prefix+"alpha";var colorLines=this.genCombinerLines(true,colorVar,passInputVar,texUnitID,this.colorCombiner,this.colorSrc,this.colorOp);var alphaLines=this.genCombinerLines(false,alphaVar,passInputVar,texUnitID,this.alphaCombiner,this.alphaSrc,this.alphaOp);var scaledColor=this.colorScale==1?colorVar:colorVar+" * "+valToFloatLiteral(this.colorScale);var scaledAlpha=this.alphaScale==1?alphaVar:alphaVar+" * "+valToFloatLiteral(this.alphaScale);var line=["vec4 "+passOutputVar," = ","vec4(",scaledColor,", ",scaledAlpha,")",";"].join("");return[].concat(colorLines,alphaLines,[line])}}return abort_noSupport("Unsupported TexEnv mode: 0x"+this.mode.toString(16))};CTexEnv.prototype.genCombinerLines=function CTexEnv_getCombinerLines(isColor,outputVar,passInputVar,texUnitID,combiner,srcArr,opArr){var argsNeeded=null;switch(combiner){case GL_REPLACE:argsNeeded=1;break;case GL_MODULATE:case GL_ADD:case GL_SUBTRACT:argsNeeded=2;break;case GL_INTERPOLATE:argsNeeded=3;break;default:return abort_noSupport("Unsupported combiner: 0x"+combiner.toString(16))}var constantExpr=["vec4(",valToFloatLiteral(this.envColor[0]),", ",valToFloatLiteral(this.envColor[1]),", ",valToFloatLiteral(this.envColor[2]),", ",valToFloatLiteral(this.envColor[3]),")"].join("");var src0Expr=argsNeeded>=1?genCombinerSourceExpr(texUnitID,constantExpr,passInputVar,srcArr[0],opArr[0]):null;var src1Expr=argsNeeded>=2?genCombinerSourceExpr(texUnitID,constantExpr,passInputVar,srcArr[1],opArr[1]):null;var src2Expr=argsNeeded>=3?genCombinerSourceExpr(texUnitID,constantExpr,passInputVar,srcArr[2],opArr[2]):null;var outputType=isColor?"vec3":"float";var lines=null;switch(combiner){case GL_REPLACE:{var line=[outputType+" "+outputVar," = ",src0Expr,";"];lines=[line.join("")];break}case GL_MODULATE:{var line=[outputType+" "+outputVar+" = ",src0Expr+" * "+src1Expr,";"];lines=[line.join("")];break}case GL_ADD:{var line=[outputType+" "+outputVar+" = ",src0Expr+" + "+src1Expr,";"];lines=[line.join("")];break}case GL_SUBTRACT:{var line=[outputType+" "+outputVar+" = ",src0Expr+" - "+src1Expr,";"];lines=[line.join("")];break}case GL_INTERPOLATE:{var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+texUnitID+"_";var arg2Var=prefix+"colorSrc2";var arg2Line=getTypeFromCombineOp(this.colorOp[2])+" "+arg2Var+" = "+src2Expr+";";var line=[outputType+" "+outputVar," = ",src0Expr+" * "+arg2Var," + ",src1Expr+" * (1.0 - "+arg2Var+")",";"];lines=[arg2Line,line.join("")];break}default:return abort_sanity("Unmatched TexEnv.colorCombiner?")}return lines};return{init:function(gl,specifiedMaxTextureImageUnits){var maxTexUnits=0;if(specifiedMaxTextureImageUnits){maxTexUnits=specifiedMaxTextureImageUnits}else if(gl){maxTexUnits=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)}s_texUnits=[];for(var i=0;i<maxTexUnits;i++){s_texUnits.push(new CTexUnit)}},setGLSLVars:function(uTexUnitPrefix,vTexCoordPrefix,vPrimColor,uTexMatrixPrefix){TEX_UNIT_UNIFORM_PREFIX=uTexUnitPrefix;TEX_COORD_VARYING_PREFIX=vTexCoordPrefix;PRIM_COLOR_VARYING=vPrimColor;TEX_MATRIX_UNIFORM_PREFIX=uTexMatrixPrefix},genAllPassLines:function(resultDest,indentSize){indentSize=indentSize||0;s_requiredTexUnitsForPass.length=0;var lines=[];var lastPassVar=PRIM_COLOR_VARYING;for(var i=0;i<s_texUnits.length;i++){if(!s_texUnits[i].enabled())continue;s_requiredTexUnitsForPass.push(i);var prefix=TEXENVJIT_NAMESPACE_PREFIX+"env"+i+"_";var passOutputVar=prefix+"result";var newLines=s_texUnits[i].genPassLines(passOutputVar,lastPassVar,i);lines=lines.concat(newLines,[""]);lastPassVar=passOutputVar}lines.push(resultDest+" = "+lastPassVar+";");var indent="";for(var i=0;i<indentSize;i++)indent+=" ";var output=indent+lines.join("\n"+indent);return output},getUsedTexUnitList:function(){return s_requiredTexUnitsForPass},traverseState:function(keyView){for(var i=0;i<s_texUnits.length;i++){s_texUnits[i].traverseState(keyView)}},getTexUnitType:function(texUnitID){return s_texUnits[texUnitID].getTexType()},hook_activeTexture:function(texture){s_activeTexture=texture-GL_TEXTURE0},hook_enable:function(cap){var cur=getCurTexUnit();switch(cap){case GL_TEXTURE_1D:if(!cur.enabled_tex1D){GLImmediate.currentRenderer=null;cur.enabled_tex1D=true;cur.texTypesEnabled|=1}break;case GL_TEXTURE_2D:if(!cur.enabled_tex2D){GLImmediate.currentRenderer=null;cur.enabled_tex2D=true;cur.texTypesEnabled|=2}break;case GL_TEXTURE_3D:if(!cur.enabled_tex3D){GLImmediate.currentRenderer=null;cur.enabled_tex3D=true;cur.texTypesEnabled|=4}break;case GL_TEXTURE_CUBE_MAP:if(!cur.enabled_texCube){GLImmediate.currentRenderer=null;cur.enabled_texCube=true;cur.texTypesEnabled|=8}break}},hook_disable:function(cap){var cur=getCurTexUnit();switch(cap){case GL_TEXTURE_1D:if(cur.enabled_tex1D){GLImmediate.currentRenderer=null;cur.enabled_tex1D=false;cur.texTypesEnabled&=~1}break;case GL_TEXTURE_2D:if(cur.enabled_tex2D){GLImmediate.currentRenderer=null;cur.enabled_tex2D=false;cur.texTypesEnabled&=~2}break;case GL_TEXTURE_3D:if(cur.enabled_tex3D){GLImmediate.currentRenderer=null;cur.enabled_tex3D=false;cur.texTypesEnabled&=~4}break;case GL_TEXTURE_CUBE_MAP:if(cur.enabled_texCube){GLImmediate.currentRenderer=null;cur.enabled_texCube=false;cur.texTypesEnabled&=~8}break}},hook_texEnvf:function(target,pname,param){if(target!=GL_TEXTURE_ENV)return;var env=getCurTexUnit().env;switch(pname){case GL_RGB_SCALE:if(env.colorScale!=param){env.invalidateKey();env.colorScale=param}break;case GL_ALPHA_SCALE:if(env.alphaScale!=param){env.invalidateKey();env.alphaScale=param}break;default:err("WARNING: Unhandled `pname` in call to `glTexEnvf`.")}},hook_texEnvi:function(target,pname,param){if(target!=GL_TEXTURE_ENV)return;var env=getCurTexUnit().env;switch(pname){case GL_TEXTURE_ENV_MODE:if(env.mode!=param){env.invalidateKey();env.mode=param}break;case GL_COMBINE_RGB:if(env.colorCombiner!=param){env.invalidateKey();env.colorCombiner=param}break;case GL_COMBINE_ALPHA:if(env.alphaCombiner!=param){env.invalidateKey();env.alphaCombiner=param}break;case GL_SRC0_RGB:if(env.colorSrc[0]!=param){env.invalidateKey();env.colorSrc[0]=param}break;case GL_SRC1_RGB:if(env.colorSrc[1]!=param){env.invalidateKey();env.colorSrc[1]=param}break;case GL_SRC2_RGB:if(env.colorSrc[2]!=param){env.invalidateKey();env.colorSrc[2]=param}break;case GL_SRC0_ALPHA:if(env.alphaSrc[0]!=param){env.invalidateKey();env.alphaSrc[0]=param}break;case GL_SRC1_ALPHA:if(env.alphaSrc[1]!=param){env.invalidateKey();env.alphaSrc[1]=param}break;case GL_SRC2_ALPHA:if(env.alphaSrc[2]!=param){env.invalidateKey();env.alphaSrc[2]=param}break;case GL_OPERAND0_RGB:if(env.colorOp[0]!=param){env.invalidateKey();env.colorOp[0]=param}break;case GL_OPERAND1_RGB:if(env.colorOp[1]!=param){env.invalidateKey();env.colorOp[1]=param}break;case GL_OPERAND2_RGB:if(env.colorOp[2]!=param){env.invalidateKey();env.colorOp[2]=param}break;case GL_OPERAND0_ALPHA:if(env.alphaOp[0]!=param){env.invalidateKey();env.alphaOp[0]=param}break;case GL_OPERAND1_ALPHA:if(env.alphaOp[1]!=param){env.invalidateKey();env.alphaOp[1]=param}break;case GL_OPERAND2_ALPHA:if(env.alphaOp[2]!=param){env.invalidateKey();env.alphaOp[2]=param}break;case GL_RGB_SCALE:if(env.colorScale!=param){env.invalidateKey();env.colorScale=param}break;case GL_ALPHA_SCALE:if(env.alphaScale!=param){env.invalidateKey();env.alphaScale=param}break;default:err("WARNING: Unhandled `pname` in call to `glTexEnvi`.")}},hook_texEnvfv:function(target,pname,params){if(target!=GL_TEXTURE_ENV)return;var env=getCurTexUnit().env;switch(pname){case GL_TEXTURE_ENV_COLOR:{for(var i=0;i<4;i++){var param=HEAPF32[params+i*4>>2];if(env.envColor[i]!=param){env.invalidateKey();env.envColor[i]=param}}break}default:err("WARNING: Unhandled `pname` in call to `glTexEnvfv`.")}},hook_getTexEnviv:function(target,pname,param){if(target!=GL_TEXTURE_ENV)return;var env=getCurTexUnit().env;switch(pname){case GL_TEXTURE_ENV_MODE:HEAP32[param>>2]=env.mode;return;case GL_TEXTURE_ENV_COLOR:HEAP32[param>>2]=Math.max(Math.min(env.envColor[0]*255,255,-255));HEAP32[param+1>>2]=Math.max(Math.min(env.envColor[1]*255,255,-255));HEAP32[param+2>>2]=Math.max(Math.min(env.envColor[2]*255,255,-255));HEAP32[param+3>>2]=Math.max(Math.min(env.envColor[3]*255,255,-255));return;case GL_COMBINE_RGB:HEAP32[param>>2]=env.colorCombiner;return;case GL_COMBINE_ALPHA:HEAP32[param>>2]=env.alphaCombiner;return;case GL_SRC0_RGB:HEAP32[param>>2]=env.colorSrc[0];return;case GL_SRC1_RGB:HEAP32[param>>2]=env.colorSrc[1];return;case GL_SRC2_RGB:HEAP32[param>>2]=env.colorSrc[2];return;case GL_SRC0_ALPHA:HEAP32[param>>2]=env.alphaSrc[0];return;case GL_SRC1_ALPHA:HEAP32[param>>2]=env.alphaSrc[1];return;case GL_SRC2_ALPHA:HEAP32[param>>2]=env.alphaSrc[2];return;case GL_OPERAND0_RGB:HEAP32[param>>2]=env.colorOp[0];return;case GL_OPERAND1_RGB:HEAP32[param>>2]=env.colorOp[1];return;case GL_OPERAND2_RGB:HEAP32[param>>2]=env.colorOp[2];return;case GL_OPERAND0_ALPHA:HEAP32[param>>2]=env.alphaOp[0];return;case GL_OPERAND1_ALPHA:HEAP32[param>>2]=env.alphaOp[1];return;case GL_OPERAND2_ALPHA:HEAP32[param>>2]=env.alphaOp[2];return;case GL_RGB_SCALE:HEAP32[param>>2]=env.colorScale;return;case GL_ALPHA_SCALE:HEAP32[param>>2]=env.alphaScale;return;default:err("WARNING: Unhandled `pname` in call to `glGetTexEnvi`.")}},hook_getTexEnvfv:function(target,pname,param){if(target!=GL_TEXTURE_ENV)return;var env=getCurTexUnit().env;switch(pname){case GL_TEXTURE_ENV_COLOR:HEAPF32[param>>2]=env.envColor[0];HEAPF32[param+4>>2]=env.envColor[1];HEAPF32[param+8>>2]=env.envColor[2];HEAPF32[param+12>>2]=env.envColor[3];return}}}},vertexData:null,vertexDataU8:null,tempData:null,indexData:null,vertexCounter:0,mode:-1,rendererCache:null,rendererComponents:[],rendererComponentPointer:0,lastRenderer:null,lastArrayBuffer:null,lastProgram:null,lastStride:-1,matrix:[],matrixStack:[],currentMatrix:0,tempMatrix:null,matricesModified:false,useTextureMatrix:false,VERTEX:0,NORMAL:1,COLOR:2,TEXTURE0:3,NUM_ATTRIBUTES:-1,MAX_TEXTURES:-1,totalEnabledClientAttributes:0,enabledClientAttributes:[0,0],clientAttributes:[],liveClientAttributes:[],currentRenderer:null,modifiedClientAttributes:false,clientActiveTexture:0,clientColor:null,usedTexUnitList:[],fixedFunctionProgram:null,setClientAttribute:function setClientAttribute(name,size,type,stride,pointer){var attrib=GLImmediate.clientAttributes[name];if(!attrib){for(var i=0;i<=name;i++){if(!GLImmediate.clientAttributes[i]){GLImmediate.clientAttributes[i]={name:name,size:size,type:type,stride:stride,pointer:pointer,offset:0}}}}else{attrib.name=name;attrib.size=size;attrib.type=type;attrib.stride=stride;attrib.pointer=pointer;attrib.offset=0}GLImmediate.modifiedClientAttributes=true},addRendererComponent:function addRendererComponent(name,size,type){if(!GLImmediate.rendererComponents[name]){GLImmediate.rendererComponents[name]=1;GLImmediate.enabledClientAttributes[name]=true;GLImmediate.setClientAttribute(name,size,type,0,GLImmediate.rendererComponentPointer);GLImmediate.rendererComponentPointer+=size*GL.byteSizeByType[type-GL.byteSizeByTypeRoot]}else{GLImmediate.rendererComponents[name]++}},disableBeginEndClientAttributes:function disableBeginEndClientAttributes(){for(var i=0;i<GLImmediate.NUM_ATTRIBUTES;i++){if(GLImmediate.rendererComponents[i])GLImmediate.enabledClientAttributes[i]=false}},getRenderer:function getRenderer(){if(GLImmediate.currentRenderer){return GLImmediate.currentRenderer}var attributes=GLImmediate.liveClientAttributes;var cacheMap=GLImmediate.rendererCache;var keyView=cacheMap.getStaticKeyView().reset();var enabledAttributesKey=0;for(var i=0;i<attributes.length;i++){enabledAttributesKey|=1<<attributes[i].name}var fogParam=0;if(GLEmulation.fogEnabled){switch(GLEmulation.fogMode){case 2049:fogParam=1;break;case 9729:fogParam=2;break;default:fogParam=3;break}}keyView.next(enabledAttributesKey<<2|fogParam);keyView.next(GL.currProgram);if(!GL.currProgram){GLImmediate.TexEnvJIT.traverseState(keyView)}var renderer=keyView.get();if(!renderer){renderer=GLImmediate.createRenderer();GLImmediate.currentRenderer=renderer;keyView.set(renderer);return renderer}GLImmediate.currentRenderer=renderer;return renderer},createRenderer:function createRenderer(renderer){var useCurrProgram=!!GL.currProgram;var hasTextures=false;for(var i=0;i<GLImmediate.MAX_TEXTURES;i++){var texAttribName=GLImmediate.TEXTURE0+i;if(!GLImmediate.enabledClientAttributes[texAttribName])continue;hasTextures=true}var ret={init:function init(){var uTexUnitPrefix="u_texUnit";var aTexCoordPrefix="a_texCoord";var vTexCoordPrefix="v_texCoord";var vPrimColor="v_color";var uTexMatrixPrefix=GLImmediate.useTextureMatrix?"u_textureMatrix":null;if(useCurrProgram){if(GL.shaderInfos[GL.programShaders[GL.currProgram][0]].type==GLctx.VERTEX_SHADER){this.vertexShader=GL.shaders[GL.programShaders[GL.currProgram][0]];this.fragmentShader=GL.shaders[GL.programShaders[GL.currProgram][1]]}else{this.vertexShader=GL.shaders[GL.programShaders[GL.currProgram][1]];this.fragmentShader=GL.shaders[GL.programShaders[GL.currProgram][0]]}this.program=GL.programs[GL.currProgram];this.usedTexUnitList=[]}else{if(GLEmulation.fogEnabled){switch(GLEmulation.fogMode){case 2049:var fogFormula="  float fog = exp(-u_fogDensity * u_fogDensity * ecDistance * ecDistance); \n";break;case 9729:var fogFormula="  float fog = (u_fogEnd - ecDistance) * u_fogScale; \n";break;default:var fogFormula="  float fog = exp(-u_fogDensity * ecDistance); \n";break}}GLImmediate.TexEnvJIT.setGLSLVars(uTexUnitPrefix,vTexCoordPrefix,vPrimColor,uTexMatrixPrefix);var fsTexEnvPass=GLImmediate.TexEnvJIT.genAllPassLines("gl_FragColor",2);var texUnitAttribList="";var texUnitVaryingList="";var texUnitUniformList="";var vsTexCoordInits="";this.usedTexUnitList=GLImmediate.TexEnvJIT.getUsedTexUnitList();for(var i=0;i<this.usedTexUnitList.length;i++){var texUnit=this.usedTexUnitList[i];texUnitAttribList+="attribute vec4 "+aTexCoordPrefix+texUnit+";\n";texUnitVaryingList+="varying vec4 "+vTexCoordPrefix+texUnit+";\n";texUnitUniformList+="uniform sampler2D "+uTexUnitPrefix+texUnit+";\n";vsTexCoordInits+="  "+vTexCoordPrefix+texUnit+" = "+aTexCoordPrefix+texUnit+";\n";if(GLImmediate.useTextureMatrix){texUnitUniformList+="uniform mat4 "+uTexMatrixPrefix+texUnit+";\n"}}var vsFogVaryingInit=null;if(GLEmulation.fogEnabled){vsFogVaryingInit="  v_fogFragCoord = abs(ecPosition.z);\n"}var vsSource=["attribute vec4 a_position;","attribute vec4 a_color;","varying vec4 v_color;",texUnitAttribList,texUnitVaryingList,GLEmulation.fogEnabled?"varying float v_fogFragCoord;":null,"uniform mat4 u_modelView;","uniform mat4 u_projection;","void main()","{","  vec4 ecPosition = u_modelView * a_position;","  gl_Position = u_projection * ecPosition;","  v_color = a_color;",vsTexCoordInits,vsFogVaryingInit,"}",""].join("\n").replace(/\n\n+/g,"\n");this.vertexShader=GLctx.createShader(GLctx.VERTEX_SHADER);GLctx.shaderSource(this.vertexShader,vsSource);GLctx.compileShader(this.vertexShader);var fogHeaderIfNeeded=null;if(GLEmulation.fogEnabled){fogHeaderIfNeeded=["","varying float v_fogFragCoord; ","uniform vec4 u_fogColor;      ","uniform float u_fogEnd;       ","uniform float u_fogScale;     ","uniform float u_fogDensity;   ","float ffog(in float ecDistance) { ",fogFormula,"  fog = clamp(fog, 0.0, 1.0); ","  return fog;                 ","}",""].join("\n")}var fogPass=null;if(GLEmulation.fogEnabled){fogPass="gl_FragColor = vec4(mix(u_fogColor.rgb, gl_FragColor.rgb, ffog(v_fogFragCoord)), gl_FragColor.a);\n"}var fsSource=["precision mediump float;",texUnitVaryingList,texUnitUniformList,"varying vec4 v_color;",fogHeaderIfNeeded,"void main()","{",fsTexEnvPass,fogPass,"}",""].join("\n").replace(/\n\n+/g,"\n");this.fragmentShader=GLctx.createShader(GLctx.FRAGMENT_SHADER);GLctx.shaderSource(this.fragmentShader,fsSource);GLctx.compileShader(this.fragmentShader);this.program=GLctx.createProgram();GLctx.attachShader(this.program,this.vertexShader);GLctx.attachShader(this.program,this.fragmentShader);GLctx.bindAttribLocation(this.program,GLImmediate.VERTEX,"a_position");GLctx.bindAttribLocation(this.program,GLImmediate.COLOR,"a_color");GLctx.bindAttribLocation(this.program,GLImmediate.NORMAL,"a_normal");var maxVertexAttribs=GLctx.getParameter(GLctx.MAX_VERTEX_ATTRIBS);for(var i=0;i<GLImmediate.MAX_TEXTURES&&GLImmediate.TEXTURE0+i<maxVertexAttribs;i++){GLctx.bindAttribLocation(this.program,GLImmediate.TEXTURE0+i,"a_texCoord"+i);GLctx.bindAttribLocation(this.program,GLImmediate.TEXTURE0+i,aTexCoordPrefix+i)}GLctx.linkProgram(this.program)}this.textureMatrixVersion=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.positionLocation=GLctx.getAttribLocation(this.program,"a_position");this.texCoordLocations=[];for(var i=0;i<GLImmediate.MAX_TEXTURES;i++){if(!GLImmediate.enabledClientAttributes[GLImmediate.TEXTURE0+i]){this.texCoordLocations[i]=-1;continue}if(useCurrProgram){this.texCoordLocations[i]=GLctx.getAttribLocation(this.program,"a_texCoord"+i)}else{this.texCoordLocations[i]=GLctx.getAttribLocation(this.program,aTexCoordPrefix+i)}}this.colorLocation=GLctx.getAttribLocation(this.program,"a_color");if(!useCurrProgram){var prevBoundProg=GLctx.getParameter(GLctx.CURRENT_PROGRAM);GLctx.useProgram(this.program);{for(var i=0;i<this.usedTexUnitList.length;i++){var texUnitID=this.usedTexUnitList[i];var texSamplerLoc=GLctx.getUniformLocation(this.program,uTexUnitPrefix+texUnitID);GLctx.uniform1i(texSamplerLoc,texUnitID)}}GLctx.vertexAttrib4fv(this.colorLocation,[1,1,1,1]);GLctx.useProgram(prevBoundProg)}this.textureMatrixLocations=[];for(var i=0;i<GLImmediate.MAX_TEXTURES;i++){this.textureMatrixLocations[i]=GLctx.getUniformLocation(this.program,"u_textureMatrix"+i)}this.normalLocation=GLctx.getAttribLocation(this.program,"a_normal");this.modelViewLocation=GLctx.getUniformLocation(this.program,"u_modelView");this.projectionLocation=GLctx.getUniformLocation(this.program,"u_projection");this.hasTextures=hasTextures;this.hasNormal=GLImmediate.enabledClientAttributes[GLImmediate.NORMAL]&&GLImmediate.clientAttributes[GLImmediate.NORMAL].size>0&&this.normalLocation>=0;this.hasColor=this.colorLocation===0||this.colorLocation>0;this.floatType=GLctx.FLOAT;this.fogColorLocation=GLctx.getUniformLocation(this.program,"u_fogColor");this.fogEndLocation=GLctx.getUniformLocation(this.program,"u_fogEnd");this.fogScaleLocation=GLctx.getUniformLocation(this.program,"u_fogScale");this.fogDensityLocation=GLctx.getUniformLocation(this.program,"u_fogDensity");this.hasFog=!!(this.fogColorLocation||this.fogEndLocation||this.fogScaleLocation||this.fogDensityLocation)},prepare:function prepare(){var arrayBuffer;if(!GL.currArrayBuffer){var start=GLImmediate.firstVertex*GLImmediate.stride;var end=GLImmediate.lastVertex*GLImmediate.stride;arrayBuffer=GL.getTempVertexBuffer(end)}else{arrayBuffer=GL.currArrayBuffer}var lastRenderer=GLImmediate.lastRenderer;var canSkip=this==lastRenderer&&arrayBuffer==GLImmediate.lastArrayBuffer&&(GL.currProgram||this.program)==GLImmediate.lastProgram&&GLImmediate.stride==GLImmediate.lastStride&&!GLImmediate.matricesModified;if(!canSkip&&lastRenderer)lastRenderer.cleanup();if(!GL.currArrayBuffer){if(arrayBuffer!=GLImmediate.lastArrayBuffer){GLctx.bindBuffer(GLctx.ARRAY_BUFFER,arrayBuffer);GLImmediate.lastArrayBuffer=arrayBuffer}GLctx.bufferSubData(GLctx.ARRAY_BUFFER,start,GLImmediate.vertexData.subarray(start>>2,end>>2))}if(canSkip)return;GLImmediate.lastRenderer=this;GLImmediate.lastProgram=GL.currProgram||this.program;GLImmediate.lastStride==GLImmediate.stride;GLImmediate.matricesModified=false;if(!GL.currProgram){if(GLImmediate.fixedFunctionProgram!=this.program){GLctx.useProgram(this.program);GLImmediate.fixedFunctionProgram=this.program}}if(this.modelViewLocation&&this.modelViewMatrixVersion!=GLImmediate.matrixVersion[0]){this.modelViewMatrixVersion=GLImmediate.matrixVersion[0];GLctx.uniformMatrix4fv(this.modelViewLocation,false,GLImmediate.matrix[0])}if(this.projectionLocation&&this.projectionMatrixVersion!=GLImmediate.matrixVersion[1]){this.projectionMatrixVersion=GLImmediate.matrixVersion[1];GLctx.uniformMatrix4fv(this.projectionLocation,false,GLImmediate.matrix[1])}var clientAttributes=GLImmediate.clientAttributes;var posAttr=clientAttributes[GLImmediate.VERTEX];GLctx.vertexAttribPointer(this.positionLocation,posAttr.size,posAttr.type,false,GLImmediate.stride,posAttr.offset);GLctx.enableVertexAttribArray(this.positionLocation);if(this.hasNormal){var normalAttr=clientAttributes[GLImmediate.NORMAL];GLctx.vertexAttribPointer(this.normalLocation,normalAttr.size,normalAttr.type,true,GLImmediate.stride,normalAttr.offset);GLctx.enableVertexAttribArray(this.normalLocation)}if(this.hasTextures){for(var i=0;i<GLImmediate.MAX_TEXTURES;i++){var attribLoc=this.texCoordLocations[i];if(attribLoc===undefined||attribLoc<0)continue;var texAttr=clientAttributes[GLImmediate.TEXTURE0+i];if(texAttr.size){GLctx.vertexAttribPointer(attribLoc,texAttr.size,texAttr.type,false,GLImmediate.stride,texAttr.offset);GLctx.enableVertexAttribArray(attribLoc)}else{GLctx.vertexAttrib4f(attribLoc,0,0,0,1);GLctx.disableVertexAttribArray(attribLoc)}var t=2+i;if(this.textureMatrixLocations[i]&&this.textureMatrixVersion[t]!=GLImmediate.matrixVersion[t]){this.textureMatrixVersion[t]=GLImmediate.matrixVersion[t];GLctx.uniformMatrix4fv(this.textureMatrixLocations[i],false,GLImmediate.matrix[t])}}}if(GLImmediate.enabledClientAttributes[GLImmediate.COLOR]){var colorAttr=clientAttributes[GLImmediate.COLOR];GLctx.vertexAttribPointer(this.colorLocation,colorAttr.size,colorAttr.type,true,GLImmediate.stride,colorAttr.offset);GLctx.enableVertexAttribArray(this.colorLocation)}else if(this.hasColor){GLctx.disableVertexAttribArray(this.colorLocation);GLctx.vertexAttrib4fv(this.colorLocation,GLImmediate.clientColor)}if(this.hasFog){if(this.fogColorLocation)GLctx.uniform4fv(this.fogColorLocation,GLEmulation.fogColor);if(this.fogEndLocation)GLctx.uniform1f(this.fogEndLocation,GLEmulation.fogEnd);if(this.fogScaleLocation)GLctx.uniform1f(this.fogScaleLocation,1/(GLEmulation.fogEnd-GLEmulation.fogStart));if(this.fogDensityLocation)GLctx.uniform1f(this.fogDensityLocation,GLEmulation.fogDensity)}},cleanup:function cleanup(){GLctx.disableVertexAttribArray(this.positionLocation);if(this.hasTextures){for(var i=0;i<GLImmediate.MAX_TEXTURES;i++){if(GLImmediate.enabledClientAttributes[GLImmediate.TEXTURE0+i]&&this.texCoordLocations[i]>=0){GLctx.disableVertexAttribArray(this.texCoordLocations[i])}}}if(this.hasColor){GLctx.disableVertexAttribArray(this.colorLocation)}if(this.hasNormal){GLctx.disableVertexAttribArray(this.normalLocation)}if(!GL.currProgram){GLctx.useProgram(null);GLImmediate.fixedFunctionProgram=0}if(!GL.currArrayBuffer){GLctx.bindBuffer(GLctx.ARRAY_BUFFER,null);GLImmediate.lastArrayBuffer=null}GLImmediate.lastRenderer=null;GLImmediate.lastProgram=null;GLImmediate.matricesModified=true}};ret.init();return ret},setupFuncs:function(){GLImmediate.MapTreeLib=GLImmediate.spawnMapTreeLib();GLImmediate.spawnMapTreeLib=null;GLImmediate.TexEnvJIT=GLImmediate.spawnTexEnvJIT();GLImmediate.spawnTexEnvJIT=null;GLImmediate.setupHooks()},setupHooks:function(){if(!GLEmulation.hasRunInit){GLEmulation.init()}var glActiveTexture=_glActiveTexture;_glActiveTexture=_emscripten_glActiveTexture=function _glActiveTexture(texture){GLImmediate.TexEnvJIT.hook_activeTexture(texture);glActiveTexture(texture)};var glEnable=_glEnable;_glEnable=_emscripten_glEnable=function _glEnable(cap){GLImmediate.TexEnvJIT.hook_enable(cap);glEnable(cap)};var glDisable=_glDisable;_glDisable=_emscripten_glDisable=function _glDisable(cap){GLImmediate.TexEnvJIT.hook_disable(cap);glDisable(cap)};var glTexEnvf=typeof _glTexEnvf!="undefined"?_glTexEnvf:function(){};_glTexEnvf=_emscripten_glTexEnvf=function _glTexEnvf(target,pname,param){GLImmediate.TexEnvJIT.hook_texEnvf(target,pname,param)};var glTexEnvi=typeof _glTexEnvi!="undefined"?_glTexEnvi:function(){};_glTexEnvi=_emscripten_glTexEnvi=function _glTexEnvi(target,pname,param){GLImmediate.TexEnvJIT.hook_texEnvi(target,pname,param)};var glTexEnvfv=typeof _glTexEnvfv!="undefined"?_glTexEnvfv:function(){};_glTexEnvfv=_emscripten_glTexEnvfv=function _glTexEnvfv(target,pname,param){GLImmediate.TexEnvJIT.hook_texEnvfv(target,pname,param)};_glGetTexEnviv=function _glGetTexEnviv(target,pname,param){GLImmediate.TexEnvJIT.hook_getTexEnviv(target,pname,param)};_glGetTexEnvfv=function _glGetTexEnvfv(target,pname,param){GLImmediate.TexEnvJIT.hook_getTexEnvfv(target,pname,param)};var glGetIntegerv=_glGetIntegerv;_glGetIntegerv=_emscripten_glGetIntegerv=function _glGetIntegerv(pname,params){switch(pname){case 35725:{var cur=GLctx.getParameter(GLctx.CURRENT_PROGRAM);if(cur==GLImmediate.fixedFunctionProgram){HEAP32[params>>2]=0;return}break}}glGetIntegerv(pname,params)}},initted:false,init:function(){err("WARNING: using emscripten GL immediate mode emulation. This is very limited in what it supports");GLImmediate.initted=true;if(!Module.useWebGL)return;GLImmediate.MAX_TEXTURES=Module["GL_MAX_TEXTURE_IMAGE_UNITS"]||GLctx.getParameter(GLctx.MAX_TEXTURE_IMAGE_UNITS);GLImmediate.TexEnvJIT.init(GLctx,GLImmediate.MAX_TEXTURES);GLImmediate.NUM_ATTRIBUTES=3+GLImmediate.MAX_TEXTURES;GLImmediate.clientAttributes=[];GLEmulation.enabledClientAttribIndices=[];for(var i=0;i<GLImmediate.NUM_ATTRIBUTES;i++){GLImmediate.clientAttributes.push({});GLEmulation.enabledClientAttribIndices.push(false)}GLImmediate.matrix=[];GLImmediate.matrixStack=[];GLImmediate.matrixVersion=[];for(var i=0;i<2+GLImmediate.MAX_TEXTURES;i++){GLImmediate.matrixStack.push([]);GLImmediate.matrixVersion.push(0);GLImmediate.matrix.push(GLImmediate.matrixLib.mat4.create());GLImmediate.matrixLib.mat4.identity(GLImmediate.matrix[i])}GLImmediate.rendererCache=GLImmediate.MapTreeLib.create();GLImmediate.tempData=new Float32Array(GL.MAX_TEMP_BUFFER_SIZE>>2);GLImmediate.indexData=new Uint16Array(GL.MAX_TEMP_BUFFER_SIZE>>1);GLImmediate.vertexDataU8=new Uint8Array(GLImmediate.tempData.buffer);GL.generateTempBuffers(true,GL.currentContext);GLImmediate.clientColor=new Float32Array([1,1,1,1])},prepareClientAttributes:function prepareClientAttributes(count,beginEnd){if(!GLImmediate.modifiedClientAttributes){GLImmediate.vertexCounter=GLImmediate.stride*count/4;return}GLImmediate.modifiedClientAttributes=false;var clientStartPointer=2147483647;var bytes=0;var minStride=2147483647;var maxStride=0;var attributes=GLImmediate.liveClientAttributes;attributes.length=0;for(var i=0;i<3+GLImmediate.MAX_TEXTURES;i++){if(GLImmediate.enabledClientAttributes[i]){var attr=GLImmediate.clientAttributes[i];attributes.push(attr);clientStartPointer=Math.min(clientStartPointer,attr.pointer);attr.sizeBytes=attr.size*GL.byteSizeByType[attr.type-GL.byteSizeByTypeRoot];bytes+=attr.sizeBytes;minStride=Math.min(minStride,attr.stride);maxStride=Math.max(maxStride,attr.stride)}}if((minStride!=maxStride||maxStride<bytes)&&!beginEnd){if(!GLImmediate.restrideBuffer)GLImmediate.restrideBuffer=_malloc(GL.MAX_TEMP_BUFFER_SIZE);var start=GLImmediate.restrideBuffer;bytes=0;for(var i=0;i<attributes.length;i++){var attr=attributes[i];var size=attr.sizeBytes;if(size%4!=0)size+=4-size%4;attr.offset=bytes;bytes+=size}for(var i=0;i<attributes.length;i++){var attr=attributes[i];var srcStride=Math.max(attr.sizeBytes,attr.stride);if((srcStride&3)==0&&(attr.sizeBytes&3)==0){var size4=attr.sizeBytes>>2;var srcStride4=Math.max(attr.sizeBytes,attr.stride)>>2;for(var j=0;j<count;j++){for(var k=0;k<size4;k++){HEAP32[(start+attr.offset+bytes*j>>2)+k]=HEAP32[(attr.pointer>>2)+j*srcStride4+k]}}}else{for(var j=0;j<count;j++){for(var k=0;k<attr.sizeBytes;k++){HEAP8[start+attr.offset+bytes*j+k]=HEAP8[attr.pointer+j*srcStride+k]}}}attr.pointer=start+attr.offset}GLImmediate.stride=bytes;GLImmediate.vertexPointer=start}else{if(GL.currArrayBuffer){GLImmediate.vertexPointer=0}else{GLImmediate.vertexPointer=clientStartPointer}for(var i=0;i<attributes.length;i++){var attr=attributes[i];attr.offset=attr.pointer-GLImmediate.vertexPointer}GLImmediate.stride=Math.max(maxStride,bytes)}if(!beginEnd){GLImmediate.vertexCounter=GLImmediate.stride*count/4}},flush:function flush(numProvidedIndexes,startIndex,ptr){startIndex=startIndex||0;ptr=ptr||0;var renderer=GLImmediate.getRenderer();var numVertexes=4*GLImmediate.vertexCounter/GLImmediate.stride;if(!numVertexes)return;var emulatedElementArrayBuffer=false;var numIndexes=0;if(numProvidedIndexes){numIndexes=numProvidedIndexes;if(!GL.currArrayBuffer&&GLImmediate.firstVertex>GLImmediate.lastVertex){for(var i=0;i<numProvidedIndexes;i++){var currIndex=HEAPU16[ptr+i*2>>1];GLImmediate.firstVertex=Math.min(GLImmediate.firstVertex,currIndex);GLImmediate.lastVertex=Math.max(GLImmediate.lastVertex,currIndex+1)}}if(!GL.currElementArrayBuffer){var indexBuffer=GL.getTempIndexBuffer(numProvidedIndexes<<1);GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,indexBuffer);GLctx.bufferSubData(GLctx.ELEMENT_ARRAY_BUFFER,0,HEAPU16.subarray(ptr>>1,ptr+(numProvidedIndexes<<1)>>1));ptr=0;emulatedElementArrayBuffer=true}}else if(GLImmediate.mode>6){if(GLImmediate.mode!=7)throw"unsupported immediate mode "+GLImmediate.mode;ptr=GLImmediate.firstVertex*3;var numQuads=numVertexes/4;numIndexes=numQuads*6;GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,GL.currentContext.tempQuadIndexBuffer);emulatedElementArrayBuffer=true}renderer.prepare();if(numIndexes){GLctx.drawElements(GLctx.TRIANGLES,numIndexes,GLctx.UNSIGNED_SHORT,ptr)}else{GLctx.drawArrays(GLImmediate.mode,startIndex,numVertexes)}if(emulatedElementArrayBuffer){GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,GL.buffers[GL.currElementArrayBuffer]||null)}}};GLImmediate.matrixLib=function(){var vec3={};var mat3={};var mat4={};var quat4={};var MatrixArray=Float32Array;vec3.create=function(vec){var dest=new MatrixArray(3);if(vec){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2]}else{dest[0]=dest[1]=dest[2]=0}return dest};vec3.set=function(vec,dest){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];return dest};vec3.add=function(vec,vec2,dest){if(!dest||vec===dest){vec[0]+=vec2[0];vec[1]+=vec2[1];vec[2]+=vec2[2];return vec}dest[0]=vec[0]+vec2[0];dest[1]=vec[1]+vec2[1];dest[2]=vec[2]+vec2[2];return dest};vec3.subtract=function(vec,vec2,dest){if(!dest||vec===dest){vec[0]-=vec2[0];vec[1]-=vec2[1];vec[2]-=vec2[2];return vec}dest[0]=vec[0]-vec2[0];dest[1]=vec[1]-vec2[1];dest[2]=vec[2]-vec2[2];return dest};vec3.multiply=function(vec,vec2,dest){if(!dest||vec===dest){vec[0]*=vec2[0];vec[1]*=vec2[1];vec[2]*=vec2[2];return vec}dest[0]=vec[0]*vec2[0];dest[1]=vec[1]*vec2[1];dest[2]=vec[2]*vec2[2];return dest};vec3.negate=function(vec,dest){if(!dest){dest=vec}dest[0]=-vec[0];dest[1]=-vec[1];dest[2]=-vec[2];return dest};vec3.scale=function(vec,val,dest){if(!dest||vec===dest){vec[0]*=val;vec[1]*=val;vec[2]*=val;return vec}dest[0]=vec[0]*val;dest[1]=vec[1]*val;dest[2]=vec[2]*val;return dest};vec3.normalize=function(vec,dest){if(!dest){dest=vec}var x=vec[0],y=vec[1],z=vec[2],len=Math.sqrt(x*x+y*y+z*z);if(!len){dest[0]=0;dest[1]=0;dest[2]=0;return dest}else if(len===1){dest[0]=x;dest[1]=y;dest[2]=z;return dest}len=1/len;dest[0]=x*len;dest[1]=y*len;dest[2]=z*len;return dest};vec3.cross=function(vec,vec2,dest){if(!dest){dest=vec}var x=vec[0],y=vec[1],z=vec[2],x2=vec2[0],y2=vec2[1],z2=vec2[2];dest[0]=y*z2-z*y2;dest[1]=z*x2-x*z2;dest[2]=x*y2-y*x2;return dest};vec3.length=function(vec){var x=vec[0],y=vec[1],z=vec[2];return Math.sqrt(x*x+y*y+z*z)};vec3.dot=function(vec,vec2){return vec[0]*vec2[0]+vec[1]*vec2[1]+vec[2]*vec2[2]};vec3.direction=function(vec,vec2,dest){if(!dest){dest=vec}var x=vec[0]-vec2[0],y=vec[1]-vec2[1],z=vec[2]-vec2[2],len=Math.sqrt(x*x+y*y+z*z);if(!len){dest[0]=0;dest[1]=0;dest[2]=0;return dest}len=1/len;dest[0]=x*len;dest[1]=y*len;dest[2]=z*len;return dest};vec3.lerp=function(vec,vec2,lerp,dest){if(!dest){dest=vec}dest[0]=vec[0]+lerp*(vec2[0]-vec[0]);dest[1]=vec[1]+lerp*(vec2[1]-vec[1]);dest[2]=vec[2]+lerp*(vec2[2]-vec[2]);return dest};vec3.dist=function(vec,vec2){var x=vec2[0]-vec[0],y=vec2[1]-vec[1],z=vec2[2]-vec[2];return Math.sqrt(x*x+y*y+z*z)};vec3.unproject=function(vec,view,proj,viewport,dest){if(!dest){dest=vec}var m=mat4.create();var v=new MatrixArray(4);v[0]=(vec[0]-viewport[0])*2/viewport[2]-1;v[1]=(vec[1]-viewport[1])*2/viewport[3]-1;v[2]=2*vec[2]-1;v[3]=1;mat4.multiply(proj,view,m);if(!mat4.inverse(m)){return null}mat4.multiplyVec4(m,v);if(v[3]===0){return null}dest[0]=v[0]/v[3];dest[1]=v[1]/v[3];dest[2]=v[2]/v[3];return dest};vec3.str=function(vec){return"["+vec[0]+", "+vec[1]+", "+vec[2]+"]"};mat3.create=function(mat){var dest=new MatrixArray(9);if(mat){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8]}return dest};mat3.set=function(mat,dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];return dest};mat3.identity=function(dest){if(!dest){dest=mat3.create()}dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=1;dest[5]=0;dest[6]=0;dest[7]=0;dest[8]=1;return dest};mat3.transpose=function(mat,dest){if(!dest||mat===dest){var a01=mat[1],a02=mat[2],a12=mat[5];mat[1]=mat[3];mat[2]=mat[6];mat[3]=a01;mat[5]=mat[7];mat[6]=a02;mat[7]=a12;return mat}dest[0]=mat[0];dest[1]=mat[3];dest[2]=mat[6];dest[3]=mat[1];dest[4]=mat[4];dest[5]=mat[7];dest[6]=mat[2];dest[7]=mat[5];dest[8]=mat[8];return dest};mat3.toMat4=function(mat,dest){if(!dest){dest=mat4.create()}dest[15]=1;dest[14]=0;dest[13]=0;dest[12]=0;dest[11]=0;dest[10]=mat[8];dest[9]=mat[7];dest[8]=mat[6];dest[7]=0;dest[6]=mat[5];dest[5]=mat[4];dest[4]=mat[3];dest[3]=0;dest[2]=mat[2];dest[1]=mat[1];dest[0]=mat[0];return dest};mat3.str=function(mat){return"["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+", "+mat[4]+", "+mat[5]+", "+mat[6]+", "+mat[7]+", "+mat[8]+"]"};mat4.create=function(mat){var dest=new MatrixArray(16);if(mat){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15]}return dest};mat4.set=function(mat,dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];return dest};mat4.identity=function(dest){if(!dest){dest=mat4.create()}dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=1;dest[6]=0;dest[7]=0;dest[8]=0;dest[9]=0;dest[10]=1;dest[11]=0;dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest};mat4.transpose=function(mat,dest){if(!dest||mat===dest){var a01=mat[1],a02=mat[2],a03=mat[3],a12=mat[6],a13=mat[7],a23=mat[11];mat[1]=mat[4];mat[2]=mat[8];mat[3]=mat[12];mat[4]=a01;mat[6]=mat[9];mat[7]=mat[13];mat[8]=a02;mat[9]=a12;mat[11]=mat[14];mat[12]=a03;mat[13]=a13;mat[14]=a23;return mat}dest[0]=mat[0];dest[1]=mat[4];dest[2]=mat[8];dest[3]=mat[12];dest[4]=mat[1];dest[5]=mat[5];dest[6]=mat[9];dest[7]=mat[13];dest[8]=mat[2];dest[9]=mat[6];dest[10]=mat[10];dest[11]=mat[14];dest[12]=mat[3];dest[13]=mat[7];dest[14]=mat[11];dest[15]=mat[15];return dest};mat4.determinant=function(mat){var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15];return a30*a21*a12*a03-a20*a31*a12*a03-a30*a11*a22*a03+a10*a31*a22*a03+a20*a11*a32*a03-a10*a21*a32*a03-a30*a21*a02*a13+a20*a31*a02*a13+a30*a01*a22*a13-a00*a31*a22*a13-a20*a01*a32*a13+a00*a21*a32*a13+a30*a11*a02*a23-a10*a31*a02*a23-a30*a01*a12*a23+a00*a31*a12*a23+a10*a01*a32*a23-a00*a11*a32*a23-a20*a11*a02*a33+a10*a21*a02*a33+a20*a01*a12*a33-a00*a21*a12*a33-a10*a01*a22*a33+a00*a11*a22*a33};mat4.inverse=function(mat,dest){if(!dest){dest=mat}var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,d=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06,invDet;if(!d){return null}invDet=1/d;dest[0]=(a11*b11-a12*b10+a13*b09)*invDet;dest[1]=(-a01*b11+a02*b10-a03*b09)*invDet;dest[2]=(a31*b05-a32*b04+a33*b03)*invDet;dest[3]=(-a21*b05+a22*b04-a23*b03)*invDet;dest[4]=(-a10*b11+a12*b08-a13*b07)*invDet;dest[5]=(a00*b11-a02*b08+a03*b07)*invDet;dest[6]=(-a30*b05+a32*b02-a33*b01)*invDet;dest[7]=(a20*b05-a22*b02+a23*b01)*invDet;dest[8]=(a10*b10-a11*b08+a13*b06)*invDet;dest[9]=(-a00*b10+a01*b08-a03*b06)*invDet;dest[10]=(a30*b04-a31*b02+a33*b00)*invDet;dest[11]=(-a20*b04+a21*b02-a23*b00)*invDet;dest[12]=(-a10*b09+a11*b07-a12*b06)*invDet;dest[13]=(a00*b09-a01*b07+a02*b06)*invDet;dest[14]=(-a30*b03+a31*b01-a32*b00)*invDet;dest[15]=(a20*b03-a21*b01+a22*b00)*invDet;return dest};mat4.toRotationMat=function(mat,dest){if(!dest){dest=mat4.create()}dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest};mat4.toMat3=function(mat,dest){if(!dest){dest=mat3.create()}dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[4];dest[4]=mat[5];dest[5]=mat[6];dest[6]=mat[8];dest[7]=mat[9];dest[8]=mat[10];return dest};mat4.toInverseMat3=function(mat,dest){var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[4],a11=mat[5],a12=mat[6],a20=mat[8],a21=mat[9],a22=mat[10],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,d=a00*b01+a01*b11+a02*b21,id;if(!d){return null}id=1/d;if(!dest){dest=mat3.create()}dest[0]=b01*id;dest[1]=(-a22*a01+a02*a21)*id;dest[2]=(a12*a01-a02*a11)*id;dest[3]=b11*id;dest[4]=(a22*a00-a02*a20)*id;dest[5]=(-a12*a00+a02*a10)*id;dest[6]=b21*id;dest[7]=(-a21*a00+a01*a20)*id;dest[8]=(a11*a00-a01*a10)*id;return dest};mat4.multiply=function(mat,mat2,dest){if(!dest){dest=mat}var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15],b00=mat2[0],b01=mat2[1],b02=mat2[2],b03=mat2[3],b10=mat2[4],b11=mat2[5],b12=mat2[6],b13=mat2[7],b20=mat2[8],b21=mat2[9],b22=mat2[10],b23=mat2[11],b30=mat2[12],b31=mat2[13],b32=mat2[14],b33=mat2[15];dest[0]=b00*a00+b01*a10+b02*a20+b03*a30;dest[1]=b00*a01+b01*a11+b02*a21+b03*a31;dest[2]=b00*a02+b01*a12+b02*a22+b03*a32;dest[3]=b00*a03+b01*a13+b02*a23+b03*a33;dest[4]=b10*a00+b11*a10+b12*a20+b13*a30;dest[5]=b10*a01+b11*a11+b12*a21+b13*a31;dest[6]=b10*a02+b11*a12+b12*a22+b13*a32;dest[7]=b10*a03+b11*a13+b12*a23+b13*a33;dest[8]=b20*a00+b21*a10+b22*a20+b23*a30;dest[9]=b20*a01+b21*a11+b22*a21+b23*a31;dest[10]=b20*a02+b21*a12+b22*a22+b23*a32;dest[11]=b20*a03+b21*a13+b22*a23+b23*a33;dest[12]=b30*a00+b31*a10+b32*a20+b33*a30;dest[13]=b30*a01+b31*a11+b32*a21+b33*a31;dest[14]=b30*a02+b31*a12+b32*a22+b33*a32;dest[15]=b30*a03+b31*a13+b32*a23+b33*a33;return dest};mat4.multiplyVec3=function(mat,vec,dest){if(!dest){dest=vec}var x=vec[0],y=vec[1],z=vec[2];dest[0]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12];dest[1]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13];dest[2]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14];return dest};mat4.multiplyVec4=function(mat,vec,dest){if(!dest){dest=vec}var x=vec[0],y=vec[1],z=vec[2],w=vec[3];dest[0]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12]*w;dest[1]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13]*w;dest[2]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14]*w;dest[3]=mat[3]*x+mat[7]*y+mat[11]*z+mat[15]*w;return dest};mat4.translate=function(mat,vec,dest){var x=vec[0],y=vec[1],z=vec[2],a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23;if(!dest||mat===dest){mat[12]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12];mat[13]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13];mat[14]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14];mat[15]=mat[3]*x+mat[7]*y+mat[11]*z+mat[15];return mat}a00=mat[0];a01=mat[1];a02=mat[2];a03=mat[3];a10=mat[4];a11=mat[5];a12=mat[6];a13=mat[7];a20=mat[8];a21=mat[9];a22=mat[10];a23=mat[11];dest[0]=a00;dest[1]=a01;dest[2]=a02;dest[3]=a03;dest[4]=a10;dest[5]=a11;dest[6]=a12;dest[7]=a13;dest[8]=a20;dest[9]=a21;dest[10]=a22;dest[11]=a23;dest[12]=a00*x+a10*y+a20*z+mat[12];dest[13]=a01*x+a11*y+a21*z+mat[13];dest[14]=a02*x+a12*y+a22*z+mat[14];dest[15]=a03*x+a13*y+a23*z+mat[15];return dest};mat4.scale=function(mat,vec,dest){var x=vec[0],y=vec[1],z=vec[2];if(!dest||mat===dest){mat[0]*=x;mat[1]*=x;mat[2]*=x;mat[3]*=x;mat[4]*=y;mat[5]*=y;mat[6]*=y;mat[7]*=y;mat[8]*=z;mat[9]*=z;mat[10]*=z;mat[11]*=z;return mat}dest[0]=mat[0]*x;dest[1]=mat[1]*x;dest[2]=mat[2]*x;dest[3]=mat[3]*x;dest[4]=mat[4]*y;dest[5]=mat[5]*y;dest[6]=mat[6]*y;dest[7]=mat[7]*y;dest[8]=mat[8]*z;dest[9]=mat[9]*z;dest[10]=mat[10]*z;dest[11]=mat[11]*z;dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15];return dest};mat4.rotate=function(mat,angle,axis,dest){var x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z),s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22;if(!len){return null}if(len!==1){len=1/len;x*=len;y*=len;z*=len}s=Math.sin(angle);c=Math.cos(angle);t=1-c;a00=mat[0];a01=mat[1];a02=mat[2];a03=mat[3];a10=mat[4];a11=mat[5];a12=mat[6];a13=mat[7];a20=mat[8];a21=mat[9];a22=mat[10];a23=mat[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*s;b22=z*z*t+c;if(!dest){dest=mat}else if(mat!==dest){dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15]}dest[0]=a00*b00+a10*b01+a20*b02;dest[1]=a01*b00+a11*b01+a21*b02;dest[2]=a02*b00+a12*b01+a22*b02;dest[3]=a03*b00+a13*b01+a23*b02;dest[4]=a00*b10+a10*b11+a20*b12;dest[5]=a01*b10+a11*b11+a21*b12;dest[6]=a02*b10+a12*b11+a22*b12;dest[7]=a03*b10+a13*b11+a23*b12;dest[8]=a00*b20+a10*b21+a20*b22;dest[9]=a01*b20+a11*b21+a21*b22;dest[10]=a02*b20+a12*b21+a22*b22;dest[11]=a03*b20+a13*b21+a23*b22;return dest};mat4.rotateX=function(mat,angle,dest){var s=Math.sin(angle),c=Math.cos(angle),a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11];if(!dest){dest=mat}else if(mat!==dest){dest[0]=mat[0];dest[1]=mat[1];dest[2]=mat[2];dest[3]=mat[3];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15]}dest[4]=a10*c+a20*s;dest[5]=a11*c+a21*s;dest[6]=a12*c+a22*s;dest[7]=a13*c+a23*s;dest[8]=a10*-s+a20*c;dest[9]=a11*-s+a21*c;dest[10]=a12*-s+a22*c;dest[11]=a13*-s+a23*c;return dest};mat4.rotateY=function(mat,angle,dest){var s=Math.sin(angle),c=Math.cos(angle),a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11];if(!dest){dest=mat}else if(mat!==dest){dest[4]=mat[4];dest[5]=mat[5];dest[6]=mat[6];dest[7]=mat[7];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15]}dest[0]=a00*c+a20*-s;dest[1]=a01*c+a21*-s;dest[2]=a02*c+a22*-s;dest[3]=a03*c+a23*-s;dest[8]=a00*s+a20*c;dest[9]=a01*s+a21*c;dest[10]=a02*s+a22*c;dest[11]=a03*s+a23*c;return dest};mat4.rotateZ=function(mat,angle,dest){var s=Math.sin(angle),c=Math.cos(angle),a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7];if(!dest){dest=mat}else if(mat!==dest){dest[8]=mat[8];dest[9]=mat[9];dest[10]=mat[10];dest[11]=mat[11];dest[12]=mat[12];dest[13]=mat[13];dest[14]=mat[14];dest[15]=mat[15]}dest[0]=a00*c+a10*s;dest[1]=a01*c+a11*s;dest[2]=a02*c+a12*s;dest[3]=a03*c+a13*s;dest[4]=a00*-s+a10*c;dest[5]=a01*-s+a11*c;dest[6]=a02*-s+a12*c;dest[7]=a03*-s+a13*c;return dest};mat4.frustum=function(left,right,bottom,top,near,far,dest){if(!dest){dest=mat4.create()}var rl=right-left,tb=top-bottom,fn=far-near;dest[0]=near*2/rl;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=near*2/tb;dest[6]=0;dest[7]=0;dest[8]=(right+left)/rl;dest[9]=(top+bottom)/tb;dest[10]=-(far+near)/fn;dest[11]=-1;dest[12]=0;dest[13]=0;dest[14]=-(far*near*2)/fn;dest[15]=0;return dest};mat4.perspective=function(fovy,aspect,near,far,dest){var top=near*Math.tan(fovy*Math.PI/360),right=top*aspect;return mat4.frustum(-right,right,-top,top,near,far,dest)};mat4.ortho=function(left,right,bottom,top,near,far,dest){if(!dest){dest=mat4.create()}var rl=right-left,tb=top-bottom,fn=far-near;dest[0]=2/rl;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=2/tb;dest[6]=0;dest[7]=0;dest[8]=0;dest[9]=0;dest[10]=-2/fn;dest[11]=0;dest[12]=-(left+right)/rl;dest[13]=-(top+bottom)/tb;dest[14]=-(far+near)/fn;dest[15]=1;return dest};mat4.lookAt=function(eye,center,up,dest){if(!dest){dest=mat4.create()}var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];if(eyex===centerx&&eyey===centery&&eyez===centerz){return mat4.identity(dest)}z0=eyex-centerx;z1=eyey-centery;z2=eyez-centerz;len=1/Math.sqrt(z0*z0+z1*z1+z2*z2);z0*=len;z1*=len;z2*=len;x0=upy*z2-upz*z1;x1=upz*z0-upx*z2;x2=upx*z1-upy*z0;len=Math.sqrt(x0*x0+x1*x1+x2*x2);if(!len){x0=0;x1=0;x2=0}else{len=1/len;x0*=len;x1*=len;x2*=len}y0=z1*x2-z2*x1;y1=z2*x0-z0*x2;y2=z0*x1-z1*x0;len=Math.sqrt(y0*y0+y1*y1+y2*y2);if(!len){y0=0;y1=0;y2=0}else{len=1/len;y0*=len;y1*=len;y2*=len}dest[0]=x0;dest[1]=y0;dest[2]=z0;dest[3]=0;dest[4]=x1;dest[5]=y1;dest[6]=z1;dest[7]=0;dest[8]=x2;dest[9]=y2;dest[10]=z2;dest[11]=0;dest[12]=-(x0*eyex+x1*eyey+x2*eyez);dest[13]=-(y0*eyex+y1*eyey+y2*eyez);dest[14]=-(z0*eyex+z1*eyey+z2*eyez);dest[15]=1;return dest};mat4.fromRotationTranslation=function(quat,vec,dest){if(!dest){dest=mat4.create()}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;dest[0]=1-(yy+zz);dest[1]=xy+wz;dest[2]=xz-wy;dest[3]=0;dest[4]=xy-wz;dest[5]=1-(xx+zz);dest[6]=yz+wx;dest[7]=0;dest[8]=xz+wy;dest[9]=yz-wx;dest[10]=1-(xx+yy);dest[11]=0;dest[12]=vec[0];dest[13]=vec[1];dest[14]=vec[2];dest[15]=1;return dest};mat4.str=function(mat){return"["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+", "+mat[4]+", "+mat[5]+", "+mat[6]+", "+mat[7]+", "+mat[8]+", "+mat[9]+", "+mat[10]+", "+mat[11]+", "+mat[12]+", "+mat[13]+", "+mat[14]+", "+mat[15]+"]"};quat4.create=function(quat){var dest=new MatrixArray(4);if(quat){dest[0]=quat[0];dest[1]=quat[1];dest[2]=quat[2];dest[3]=quat[3]}return dest};quat4.set=function(quat,dest){dest[0]=quat[0];dest[1]=quat[1];dest[2]=quat[2];dest[3]=quat[3];return dest};quat4.calculateW=function(quat,dest){var x=quat[0],y=quat[1],z=quat[2];if(!dest||quat===dest){quat[3]=-Math.sqrt(Math.abs(1-x*x-y*y-z*z));return quat}dest[0]=x;dest[1]=y;dest[2]=z;dest[3]=-Math.sqrt(Math.abs(1-x*x-y*y-z*z));return dest};quat4.dot=function(quat,quat2){return quat[0]*quat2[0]+quat[1]*quat2[1]+quat[2]*quat2[2]+quat[3]*quat2[3]};quat4.inverse=function(quat,dest){var q0=quat[0],q1=quat[1],q2=quat[2],q3=quat[3],dot=q0*q0+q1*q1+q2*q2+q3*q3,invDot=dot?1/dot:0;if(!dest||quat===dest){quat[0]*=-invDot;quat[1]*=-invDot;quat[2]*=-invDot;quat[3]*=invDot;return quat}dest[0]=-quat[0]*invDot;dest[1]=-quat[1]*invDot;dest[2]=-quat[2]*invDot;dest[3]=quat[3]*invDot;return dest};quat4.conjugate=function(quat,dest){if(!dest||quat===dest){quat[0]*=-1;quat[1]*=-1;quat[2]*=-1;return quat}dest[0]=-quat[0];dest[1]=-quat[1];dest[2]=-quat[2];dest[3]=quat[3];return dest};quat4.length=function(quat){var x=quat[0],y=quat[1],z=quat[2],w=quat[3];return Math.sqrt(x*x+y*y+z*z+w*w)};quat4.normalize=function(quat,dest){if(!dest){dest=quat}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],len=Math.sqrt(x*x+y*y+z*z+w*w);if(len===0){dest[0]=0;dest[1]=0;dest[2]=0;dest[3]=0;return dest}len=1/len;dest[0]=x*len;dest[1]=y*len;dest[2]=z*len;dest[3]=w*len;return dest};quat4.add=function(quat,quat2,dest){if(!dest||quat===dest){quat[0]+=quat2[0];quat[1]+=quat2[1];quat[2]+=quat2[2];quat[3]+=quat2[3];return quat}dest[0]=quat[0]+quat2[0];dest[1]=quat[1]+quat2[1];dest[2]=quat[2]+quat2[2];dest[3]=quat[3]+quat2[3];return dest};quat4.multiply=function(quat,quat2,dest){if(!dest){dest=quat}var qax=quat[0],qay=quat[1],qaz=quat[2],qaw=quat[3],qbx=quat2[0],qby=quat2[1],qbz=quat2[2],qbw=quat2[3];dest[0]=qax*qbw+qaw*qbx+qay*qbz-qaz*qby;dest[1]=qay*qbw+qaw*qby+qaz*qbx-qax*qbz;dest[2]=qaz*qbw+qaw*qbz+qax*qby-qay*qbx;dest[3]=qaw*qbw-qax*qbx-qay*qby-qaz*qbz;return dest};quat4.multiplyVec3=function(quat,vec,dest){if(!dest){dest=vec}var x=vec[0],y=vec[1],z=vec[2],qx=quat[0],qy=quat[1],qz=quat[2],qw=quat[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;dest[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy;dest[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz;dest[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx;return dest};quat4.scale=function(quat,val,dest){if(!dest||quat===dest){quat[0]*=val;quat[1]*=val;quat[2]*=val;quat[3]*=val;return quat}dest[0]=quat[0]*val;dest[1]=quat[1]*val;dest[2]=quat[2]*val;dest[3]=quat[3]*val;return dest};quat4.toMat3=function(quat,dest){if(!dest){dest=mat3.create()}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;dest[0]=1-(yy+zz);dest[1]=xy+wz;dest[2]=xz-wy;dest[3]=xy-wz;dest[4]=1-(xx+zz);dest[5]=yz+wx;dest[6]=xz+wy;dest[7]=yz-wx;dest[8]=1-(xx+yy);return dest};quat4.toMat4=function(quat,dest){if(!dest){dest=mat4.create()}var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;dest[0]=1-(yy+zz);dest[1]=xy+wz;dest[2]=xz-wy;dest[3]=0;dest[4]=xy-wz;dest[5]=1-(xx+zz);dest[6]=yz+wx;dest[7]=0;dest[8]=xz+wy;dest[9]=yz-wx;dest[10]=1-(xx+yy);dest[11]=0;dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest};quat4.slerp=function(quat,quat2,slerp,dest){if(!dest){dest=quat}var cosHalfTheta=quat[0]*quat2[0]+quat[1]*quat2[1]+quat[2]*quat2[2]+quat[3]*quat2[3],halfTheta,sinHalfTheta,ratioA,ratioB;if(Math.abs(cosHalfTheta)>=1){if(dest!==quat){dest[0]=quat[0];dest[1]=quat[1];dest[2]=quat[2];dest[3]=quat[3]}return dest}halfTheta=Math.acos(cosHalfTheta);sinHalfTheta=Math.sqrt(1-cosHalfTheta*cosHalfTheta);if(Math.abs(sinHalfTheta)<.001){dest[0]=quat[0]*.5+quat2[0]*.5;dest[1]=quat[1]*.5+quat2[1]*.5;dest[2]=quat[2]*.5+quat2[2]*.5;dest[3]=quat[3]*.5+quat2[3]*.5;return dest}ratioA=Math.sin((1-slerp)*halfTheta)/sinHalfTheta;ratioB=Math.sin(slerp*halfTheta)/sinHalfTheta;dest[0]=quat[0]*ratioA+quat2[0]*ratioB;dest[1]=quat[1]*ratioA+quat2[1]*ratioB;dest[2]=quat[2]*ratioA+quat2[2]*ratioB;dest[3]=quat[3]*ratioA+quat2[3]*ratioB;return dest};quat4.str=function(quat){return"["+quat[0]+", "+quat[1]+", "+quat[2]+", "+quat[3]+"]"};return{vec3:vec3,mat3:mat3,mat4:mat4,quat4:quat4}}();function _glMatrixMode(mode){if(mode==5888){GLImmediate.currentMatrix=0}else if(mode==5889){GLImmediate.currentMatrix=1}else if(mode==5890){GLImmediate.useTextureMatrix=true;GLImmediate.currentMatrix=2+GLImmediate.clientActiveTexture}else{throw"Wrong mode "+mode+" passed to glMatrixMode"}}function _glNormalPointer(type,stride,pointer){GLImmediate.setClientAttribute(GLImmediate.NORMAL,3,type,stride,pointer)}function _glTexCoordPointer(size,type,stride,pointer){GLImmediate.setClientAttribute(GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture,size,type,stride,pointer)}function __computeUnpackAlignedImageSize(width,height,sizePerPixel,alignment){function roundedToNextMultipleOf(x,y){return x+y-1&-y}var plainRowSize=width*sizePerPixel;var alignedRowSize=roundedToNextMultipleOf(plainRowSize,alignment);return height*alignedRowSize}function __colorChannelsInGlTextureFormat(format){var colorChannels={5:3,6:4,8:2,29502:3,29504:4};return colorChannels[format-6402]||1}function __heapObjectForWebGLType(type){type-=5120;if(type==1)return HEAPU8;if(type==4)return HEAP32;if(type==6)return HEAPF32;if(type==5||type==28922)return HEAPU32;return HEAPU16}function __heapAccessShiftForWebGLHeap(heap){return 31-Math.clz32(heap.BYTES_PER_ELEMENT)}function emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat){var heap=__heapObjectForWebGLType(type);var shift=__heapAccessShiftForWebGLHeap(heap);var byteSize=1<<shift;var sizePerPixel=__colorChannelsInGlTextureFormat(format)*byteSize;var bytes=__computeUnpackAlignedImageSize(width,height,sizePerPixel,GL.unpackAlignment);return heap.subarray(pixels>>shift,pixels+bytes>>shift)}function _glTexImage2D(target,level,internalFormat,width,height,border,format,type,pixels){GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,pixels?emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat):null)}function _glTexParameteri(x0,x1,x2){GLctx["texParameteri"](x0,x1,x2)}function _glVertexPointer(size,type,stride,pointer){GLImmediate.setClientAttribute(GLImmediate.VERTEX,size,type,stride,pointer)}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest)}FS.staticInit();Module["FS_createFolder"]=FS.createFolder;Module["FS_createPath"]=FS.createPath;Module["FS_createDataFile"]=FS.createDataFile;Module["FS_createPreloadedFile"]=FS.createPreloadedFile;Module["FS_createLazyFile"]=FS.createLazyFile;Module["FS_createLink"]=FS.createLink;Module["FS_createDevice"]=FS.createDevice;Module["FS_unlink"]=FS.unlink;Module["requestFullscreen"]=function Module_requestFullscreen(lockPointer,resizeCanvas,vrDevice){Browser.requestFullscreen(lockPointer,resizeCanvas,vrDevice)};Module["requestAnimationFrame"]=function Module_requestAnimationFrame(func){Browser.requestAnimationFrame(func)};Module["setCanvasSize"]=function Module_setCanvasSize(width,height,noUpdates){Browser.setCanvasSize(width,height,noUpdates)};Module["pauseMainLoop"]=function Module_pauseMainLoop(){Browser.mainLoop.pause()};Module["resumeMainLoop"]=function Module_resumeMainLoop(){Browser.mainLoop.resume()};Module["getUserMedia"]=function Module_getUserMedia(){Browser.getUserMedia()};Module["createContext"]=function Module_createContext(canvas,useWebGL,setInModule,webGLContextAttributes){return Browser.createContext(canvas,useWebGL,setInModule,webGLContextAttributes)};if(ENVIRONMENT_IS_NODE){_emscripten_get_now=function _emscripten_get_now_actual(){var t=process["hrtime"]();return t[0]*1e3+t[1]/1e6}}else if(typeof dateNow!=="undefined"){_emscripten_get_now=dateNow}else _emscripten_get_now=function(){return performance["now"]()};var GLctx;GL.init();embind_init_charCodes();BindingError=Module["BindingError"]=extendError(Error,"BindingError");InternalError=Module["InternalError"]=extendError(Error,"InternalError");init_emval();GLImmediate.setupFuncs();Browser.moduleContextCreatedCallbacks.push(function(){GLImmediate.init()});GLEmulation.init();var ASSERTIONS=false;function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}function intArrayToString(array){var ret=[];for(var i=0;i<array.length;i++){var chr=array[i];if(chr>255){if(ASSERTIONS){assert(false,"Character code "+chr+" ("+String.fromCharCode(chr)+")  at offset "+i+" not in 0x00-0xFF.")}chr&=255}ret.push(String.fromCharCode(chr))}return ret.join("")}var decodeBase64=typeof atob==="function"?atob:function(input){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2)}if(enc4!==64){output=output+String.fromCharCode(chr3)}}while(i<input.length);return output};function intArrayFromBase64(s){if(typeof ENVIRONMENT_IS_NODE==="boolean"&&ENVIRONMENT_IS_NODE){var buf;try{buf=Buffer.from(s,"base64")}catch(_){buf=new Buffer(s,"base64")}return new Uint8Array(buf.buffer,buf.byteOffset,buf.byteLength)}try{var decoded=decodeBase64(s);var bytes=new Uint8Array(decoded.length);for(var i=0;i<decoded.length;++i){bytes[i]=decoded.charCodeAt(i)}return bytes}catch(_){throw new Error("Converting base64 string to bytes failed.")}}function tryParseAsDataURI(filename){if(!isDataURI(filename)){return}return intArrayFromBase64(filename.slice(dataURIPrefix.length))}var asmGlobalArg={"Math":Math,"Int8Array":Int8Array,"Int16Array":Int16Array,"Int32Array":Int32Array,"Uint8Array":Uint8Array,"Uint16Array":Uint16Array,"Float32Array":Float32Array,"Float64Array":Float64Array};var asmLibraryArg={"$":_fd_seek,"A":__embind_register_bool,"B":__embind_register_emval,"C":__embind_register_float,"D":__embind_register_integer,"E":__embind_register_memory_view,"F":__embind_register_std_string,"G":__embind_register_std_wstring,"H":__embind_register_void,"I":__emval_decref,"J":__emval_register,"K":__glGenObject,"L":__heapAccessShiftForWebGLHeap,"M":__heapObjectForWebGLType,"N":__webgl_acquireDrawBuffersExtension,"O":__webgl_acquireInstancedArraysExtension,"P":__webgl_acquireVertexArrayObjectExtension,"Q":_embind_repr,"R":_emscripten_get_heap_size,"S":_emscripten_get_now,"T":_emscripten_memcpy_big,"U":_emscripten_resize_heap,"V":_emscripten_set_main_loop,"W":_emscripten_set_main_loop_timing,"X":_emscripten_webgl_commit_frame,"Y":_emscripten_webgl_do_commit_frame,"Z":_fd_close,"_":_fd_read,"a":abort,"a$":jsStackTrace,"aA":_glHint,"aB":_glIsEnabled,"aC":_glLinkProgram,"aD":_glLoadMatrixf,"aE":_glMatrixMode,"aF":_glNormalPointer,"aG":_glShaderSource,"aH":_glTexCoordPointer,"aI":_glTexImage2D,"aJ":_glTexParameteri,"aK":_glUseProgram,"aL":_glVertexAttribPointer,"aM":_glVertexPointer,"aN":abortOnCannotGrowMemory,"aO":count_emval_handles,"aP":createNamedFunction,"aQ":demangle,"aR":demangleAll,"aS":embind_init_charCodes,"aT":emscriptenWebGLGet,"aU":emscriptenWebGLGetTexPixelData,"aV":extendError,"aW":floatReadValueFromPointer,"aX":getShiftFromSize,"aY":get_first_emval,"aZ":init_emval,"a_":integerReadValueFromPointer,"aa":_fd_write,"ab":_glActiveTexture,"ac":_glAlphaFunc,"ad":_glAttachShader,"ae":_glBindAttribLocation,"af":_glBindBuffer,"ag":_glBindTexture,"ah":_glClear,"ai":_glClearColor,"aj":_glCompileShader,"ak":_glCreateShader,"al":_glDeleteProgram,"am":_glDetachShader,"an":_glDisable,"ao":_glDisableClientState,"ap":_glDisableVertexAttribArray,"aq":_glDrawArrays,"ar":_glDrawElements,"as":_glEnable,"at":_glEnableClientState,"au":_glEnableVertexAttribArray,"av":_glGenTextures,"aw":_glGetBooleanv,"ax":_glGetFloatv,"ay":_glGetIntegerv,"az":_glGetString,"b":setTempRet0,"ba":makeLegalFunctionName,"bb":readLatin1String,"bc":registerType,"bd":simpleReadValueFromPointer,"be":stackTrace,"bf":stringToNewUTF8,"bg":throwBindingError,"bh":throwInternalError,"bi":whenDependentTypesAreResolved,"bj":writeI53ToI64,"bk":tempDoublePtr,"c":getTempRet0,"d":_SDL_Delay,"e":_SDL_GL_SwapBuffers,"f":_SDL_GetTicks,"g":_SDL_Init,"h":_SDL_JoystickEventState,"i":_SDL_JoystickOpen,"j":_SDL_LockSurface,"k":_SDL_PollEvent,"l":_SDL_SetVideoMode,"m":_SDL_ShowCursor,"n":_SDL_WM_SetCaption,"o":___lock,"p":___setErrNo,"q":___syscall221,"r":___syscall5,"s":___syscall54,"t":___unlock,"u":___wasi_fd_close,"v":___wasi_fd_read,"w":___wasi_fd_seek,"x":___wasi_fd_write,"y":__colorChannelsInGlTextureFormat,"z":__computeUnpackAlignedImageSize};// EMSCRIPTEN_START_ASM
var asm=(/** @suppress {uselessCode} */ function(global,env,buffer) {
"use asm";var a=new global.Int8Array(buffer),b=new global.Int16Array(buffer),c=new global.Int32Array(buffer),d=new global.Uint8Array(buffer),e=new global.Uint16Array(buffer),f=new global.Float32Array(buffer),g=new global.Float64Array(buffer),h=env.bk|0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0.0,q=global.Math.imul,r=global.Math.clz32,s=env.a,t=env.b,u=env.c,v=env.d,w=env.e,x=env.f,y=env.g,z=env.h,A=env.i,B=env.j,C=env.k,D=env.l,E=env.m,F=env.n,G=env.o,H=env.p,I=env.q,J=env.r,K=env.s,L=env.t,M=env.u,N=env.v,O=env.w,P=env.x,Q=env.y,R=env.z,S=env.A,T=env.B,U=env.C,V=env.D,W=env.E,X=env.F,Y=env.G,Z=env.H,_=env.I,$=env.J,aa=env.K,ba=env.L,ca=env.M,da=env.N,ea=env.O,fa=env.P,ga=env.Q,ha=env.R,ia=env.S,ja=env.T,ka=env.U,la=env.V,ma=env.W,na=env.X,oa=env.Y,pa=env.Z,qa=env._,ra=env.$,sa=env.aa,ta=env.ab,ua=env.ac,va=env.ad,wa=env.ae,xa=env.af,ya=env.ag,za=env.ah,Aa=env.ai,Ba=env.aj,Ca=env.ak,Da=env.al,Ea=env.am,Fa=env.an,Ga=env.ao,Ha=env.ap,Ia=env.aq,Ja=env.ar,Ka=env.as,La=env.at,Ma=env.au,Na=env.av,Oa=env.aw,Pa=env.ax,Qa=env.ay,Ra=env.az,Sa=env.aA,Ta=env.aB,Ua=env.aC,Va=env.aD,Wa=env.aE,Xa=env.aF,Ya=env.aG,Za=env.aH,_a=env.aI,$a=env.aJ,ab=env.aK,bb=env.aL,cb=env.aM,db=env.aN,eb=env.aO,fb=env.aP,gb=env.aQ,hb=env.aR,ib=env.aS,jb=env.aT,kb=env.aU,lb=env.aV,mb=env.aW,nb=env.aX,ob=env.aY,pb=env.aZ,qb=env.a_,rb=env.a$,sb=env.ba,tb=env.bb,ub=env.bc,vb=env.bd,wb=env.be,xb=env.bf,yb=env.bg,zb=env.bh,Ab=env.bi,Bb=env.bj,Cb=8832,Db=5251712,Eb=0.0;
// EMSCRIPTEN_START_FUNCS
function Ob(a){a=a|0;var b=0;b=Cb;Cb=Cb+a|0;Cb=Cb+15&-16;return b|0}function Pb(){return Cb|0}function Qb(a){a=a|0;Cb=a}function Rb(b){b=b|0;var d=0,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0;d=Cb;Cb=Cb+1056|0;e=d+928|0;g=d+200|0;h=d+184|0;i=d+912|0;j=d+488|0;k=d+368|0;l=d+248|0;m=d+80|0;n=d;o=d+228|0;p=d+204|0;r=d+216|0;ne(4748)|0;gc(l);s=k;t=l;l=s+120|0;do{c[s>>2]=c[t>>2];s=s+4|0;t=t+4|0}while((s|0)<(l|0));Tb(j);u=Oc()|0;vc(i,4776,4781,8,0,0);v=i+12|0;w=$b(4776,c[v>>2]|0,0,0)|0;vc(i,4776,4790,8,0,0);x=i+4|0;y=Zb(4776,c[v>>2]|0,0,c[x>>2]|0)|0;Sc(y);qc(y);vc(i,4776,4799,8,0,0);z=Zb(4776,c[v>>2]|0,0,c[x>>2]|0)|0;Sc(z);qc(z);vc(i,4776,4809,8,0,0);A=Zb(4776,c[v>>2]|0,0,c[x>>2]|0)|0;Sc(A);qc(A);vc(i,4776,4818,8,0,0);i=tc(4776,c[v>>2]|0,0,c[x>>2]|0)|0;c[i>>2]=A;mc(o);c[n>>2]=z;c[n+4>>2]=16;c[n+8>>2]=128;c[n+12>>2]=0;c[n+16>>2]=0;c[n+24>>2]=32;c[n+20>>2]=56;c[n+32>>2]=8421504;c[n+28>>2]=1;c[n+36>>2]=z;c[n+40>>2]=80;c[n+44>>2]=128;z=n+48|0;c[z>>2]=0;c[n+52>>2]=56;c[n+60>>2]=32;c[n+56>>2]=56;c[n+68>>2]=8421504;c[n+64>>2]=1;A=w+80|0;fc(p,0.0,-(+f[w+128>>2]*.5*+f[w+92>>2]),-400.0);c[A>>2]=c[p>>2];c[A+4>>2]=c[p+4>>2];c[A+8>>2]=c[p+8>>2];c[r>>2]=c[p>>2];c[r+4>>2]=c[p+4>>2];c[r+8>>2]=c[p+8>>2];f[r+4>>2]=0.0;c[k+44>>2]=c[r+8>>2];f[k+64>>2]=.03999999910593033;p=j+2|0;if(a[p>>0]|0){Cb=d;return}x=j+24|0;v=k+72|0;B=j+25|0;C=k+76|0;D=j+23|0;E=k+80|0;F=j+22|0;G=k+84|0;H=j+12|0;I=k+88|0;J=j+13|0;K=k+92|0;L=j+18|0;M=j+26|0;N=j+20|0;O=j+17|0;P=j+19|0;Q=j+16|0;R=i+4|0;S=i+8|0;i=w+20|0;T=w+16|0;U=o+8|0;V=w+84|0;W=1;X=0;Y=1;Z=0;do{Cc(j);c[v>>2]=a[x>>0];c[C>>2]=a[B>>0];c[E>>2]=a[D>>0];c[G>>2]=a[F>>0];c[I>>2]=a[H>>0];c[K>>2]=a[J>>0];X=(a[L>>0]|0)==1?(X|0)==0&1:X;W=(a[M>>0]|0)==1?(W|0)==0&1:W;if(!W)jc(k);else ic(k,r);_=(a[N>>0]|0)==1?Y+10|0:Y;Y=((a[O>>0]|0)==1?_+-10|0:_)+((a[P>>0]|0)==1&1)+(((a[Q>>0]|0)==1)<<31>>31)|0;if((a[x>>0]|0)==2)c[R>>2]=(c[R>>2]|0)+-4;if((a[B>>0]|0)==2)c[R>>2]=(c[R>>2]|0)+4;if((a[F>>0]|0)==2)c[S>>2]=(c[S>>2]|0)+-4;if((a[D>>0]|0)==2)c[S>>2]=(c[S>>2]|0)+4;Ic();s=e;t=k;l=s+120|0;do{c[s>>2]=c[t>>2];s=s+4|0;t=t+4|0}while((s|0)<(l|0));Gc(e);if(!X){if((Y|0)>0){_=0;do{f[A>>2]=+(_<<5&480|0);f[V>>2]=+((_<<3&1920)+-100|0);Rc(w);_=_+1|0}while((_|0)!=(Y|0))}Hc()}_=q(c[i>>2]|0,Y)|0;$=q(c[T>>2]|0,Y)|0;c[h>>2]=_;c[h+4>>2]=$;c[h+8>>2]=Z;c[h+12>>2]=u;kd(m,4826,h)|0;Tc(y);Kc(8,8,m);c[g>>2]=(54770-Z|0)*91;kd(m,4864,g)|0;Tc(y);Kc(8,200,m);c[z>>2]=c[U>>2]<<5;lc(o,5,6)|0;Lc(n,2);Jc(b);Z=Fc()|0}while(!(a[p>>0]|0));Cb=d;return}function Sb(){var a=0,b=0,d=0;a=Cb;Cb=Cb+64|0;b=a+32|0;d=a;ne(4874)|0;Dc();Ec(d,4897);c[b>>2]=c[d>>2];c[b+4>>2]=c[d+4>>2];c[b+8>>2]=c[d+8>>2];c[b+12>>2]=c[d+12>>2];c[b+16>>2]=c[d+16>>2];c[b+20>>2]=c[d+20>>2];c[b+24>>2]=c[d+24>>2];c[b+28>>2]=c[d+28>>2];Rb(b);Cb=a;return 0}function Tb(b){b=b|0;a[b>>0]=0;a[b+1>>0]=0;a[b+2>>0]=0;Zg(b+4|0,0,418)|0;return}function Ub(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=Cb;Cb=Cb+112|0;g=f;h=Lg(24)|0;c[h+8>>2]=0;c[h+12>>2]=e;if(d|0){c[h>>2]=1;c[h+4>>2]=0;c[h+20>>2]=d;i=h;Cb=f;return i|0}c[h>>2]=0;Yc(a,g);a=Xd(g,b)|0;c[h+16>>2]=a;if(!a){Mg(h);i=0;Cb=f;return i|0}else{i=h;Cb=f;return i|0}return 0}function Vb(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;if(!(c[a>>2]|0)){e=ee(c[a+16>>2]|0,b,d)|0;return e|0}switch(d|0){case 0:{c[a+4>>2]=b;e=0;return e|0}case 1:{d=a+4|0;c[d>>2]=(c[d>>2]|0)+b;e=0;return e|0}case 2:{c[a+4>>2]=(c[a+12>>2]|0)-b;e=0;return e|0}default:{e=0;return e|0}}return 0}function Wb(a){a=a|0;var b=0;if(!(c[a>>2]|0)){b=le(c[a+16>>2]|0)|0;return b|0}else{b=c[a+4>>2]|0;return b|0}return 0}function Xb(a){a=a|0;var b=0;if(!(c[a>>2]|0)){b=be(c[a+16>>2]|0)|0;return b|0}else{Mg(a);b=0;return b|0}return 0}function Yb(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0;g=f+4|0;h=c[f+20>>2]|0;if(!(c[f>>2]|0)){i=ke(b,d,e,c[f+16>>2]|0)|0;return i|0}f=c[g>>2]|0;if((e|0)>0&(d|0)>0){j=q(e,d)|0;k=0;l=f;m=0;while(1){n=l;l=l+d|0;o=m;p=0;while(1){a[b+o>>0]=a[h+n>>0]|0;p=p+1|0;if((p|0)==(d|0))break;else{n=n+1|0;o=o+1|0}}k=k+1|0;if((k|0)==(e|0))break;else m=m+d|0}r=f+j|0}else r=f;c[g>>2]=r;i=0;return i|0}function Zb(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0;f=Cb;Cb=Cb+16|0;g=f;h=sc(a,b,d,e)|0;do if(!h){i=uc(a,b,d,e)|0;if(i|0){Xc(i);j=i;break}i=Bc(a,b,d,e)|0;if(!i){c[g>>2]=a;me(4902,g)|0;j=0;break}else{Xc(i);j=i;break}}else{Xc(h);j=h}while(0);Cb=f;return j|0}function _b(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;h=Cb;Cb=Cb+160|0;i=h+128|0;j=h+120|0;k=h+112|0;l=h+104|0;m=h;n=h+136|0;o=a+60|0;if((c[o>>2]|0)<=0){Cb=h;return}p=a+64|0;q=a+56|0;a=n+12|0;r=n+4|0;if(!e){e=0;do{s=c[(c[p>>2]|0)+(e<<2)>>2]|0;c[l>>2]=d;c[l+4>>2]=s;kd(m,4931,l)|0;s=c[(c[p>>2]|0)+(e<<2)>>2]|0;c[k>>2]=d;c[k+4>>2]=s;me(4936,k)|0;s=Zb(m,0,0,0)|0;c[(c[q>>2]|0)+(e<<2)>>2]=s;Sc(c[(c[q>>2]|0)+(e<<2)>>2]|0);qc(c[(c[q>>2]|0)+(e<<2)>>2]|0);e=e+1|0}while((e|0)<(c[o>>2]|0));Cb=h;return}else{e=0;do{k=c[(c[p>>2]|0)+(e<<2)>>2]|0;c[j>>2]=d;c[j+4>>2]=k;kd(m,4931,j)|0;k=c[(c[p>>2]|0)+(e<<2)>>2]|0;c[i>>2]=d;c[i+4>>2]=k;me(4936,i)|0;vc(n,b,m,8,f,g);k=Zb(b,c[a>>2]|0,f,c[r>>2]|0)|0;c[(c[q>>2]|0)+(e<<2)>>2]=k;Sc(c[(c[q>>2]|0)+(e<<2)>>2]|0);qc(c[(c[q>>2]|0)+(e<<2)>>2]|0);e=e+1|0}while((e|0)<(c[o>>2]|0));Cb=h;return}}function $b(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return rc(a,b,c,d)|0}function ac(a){a=+a;var b=0,c=0.0,d=0.0,e=0.0,f=0,g=0,h=0.0,i=0.0;b=~~(a*.6366197466850281+.5);c=+(b|0);d=a-c*1.5707963705062866-c*2.5633440682570896e-12;c=d*d;if(!(b&1)){e=d*(c*(c*(.008331796154379845-c*1.9484203949104995e-04)+-.1666664183139801)+1.0);f=b&2;g=(f|0)==0;h=-e;i=g?e:h;return +i}else{e=c*(c*(.041656624525785446-c*1.3605887070298195e-03)+-.49999886751174927)+1.0;f=b&2;g=(f|0)==0;h=-e;i=g?e:h;return +i}return +(0.0)}function bc(a){a=+a;var b=0.0,c=0,d=0.0,e=0.0,f=0,g=0,h=0.0,i=0.0;b=a+1.5707963705062866;c=~~(b*.6366197466850281+.5);a=+(c|0);d=b-a*1.5707963705062866-a*2.5633440682570896e-12;a=d*d;if(!(c&1)){e=d*(a*(a*(.008331796154379845-a*1.9484203949104995e-04)+-.1666664183139801)+1.0);f=c&2;g=(f|0)==0;h=-e;i=g?e:h;return +i}else{e=a*(a*(.041656624525785446-a*1.3605887070298195e-03)+-.49999886751174927)+1.0;f=c&2;g=(f|0)==0;h=-e;i=g?e:h;return +i}return +(0.0)}function cc(a){a=+a;var b=0.0,d=0.0;b=a*.5;d=(c[h>>2]=1597463174-((f[h>>2]=a,c[h>>2]|0)>>>1)&2147483647,+f[h>>2]);a=(1.5-b*d*d)*d;d=a*(1.5-a*(b*a));return +(1.0/(d*(1.5-d*(b*d))))}function dc(a,b){a=a|0;b=b|0;var d=0,e=0,g=0,h=0,i=0.0,j=0.0,k=0.0,l=0,m=0.0,n=0,o=0,p=0;d=Cb;Cb=Cb+128|0;e=d+64|0;g=d;h=a+104|0;i=+f[a+108>>2];do if(i!=0.0){j=+ac(i);k=+bc(i);f[e>>2]=k;f[e+4>>2]=0.0;f[e+8>>2]=-j;f[e+12>>2]=0.0;f[e+16>>2]=0.0;f[e+20>>2]=1.0;f[e+24>>2]=0.0;f[e+28>>2]=0.0;f[e+32>>2]=j;f[e+36>>2]=0.0;f[e+40>>2]=k;l=e+44|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[e+60>>2]=1.0;k=+f[h>>2];if(k!=0.0){j=+ac(k);m=+bc(k);f[g>>2]=1.0;l=g+4|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[g+20>>2]=m;f[g+24>>2]=j;f[g+28>>2]=0.0;f[g+32>>2]=0.0;f[g+36>>2]=-j;f[g+40>>2]=m;l=g+44|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[g+60>>2]=1.0;Pc(e,g,e)}m=+f[a+112>>2];if(m!=0.0){j=+ac(m);k=+bc(m);f[g>>2]=k;f[g+4>>2]=j;f[g+8>>2]=0.0;f[g+12>>2]=0.0;f[g+16>>2]=-j;f[g+20>>2]=k;l=g+24|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[g+40>>2]=1.0;l=g+44|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[g+60>>2]=1.0;Pc(e,g,e);n=1}else n=1}else{k=+f[h>>2];if(k!=0.0){j=+ac(k);m=+bc(k);f[e>>2]=1.0;l=e+4|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[e+20>>2]=m;f[e+24>>2]=j;f[e+28>>2]=0.0;f[e+32>>2]=0.0;f[e+36>>2]=-j;f[e+40>>2]=m;l=e+44|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[e+60>>2]=1.0;m=+f[a+112>>2];if(!(m!=0.0)){n=1;break}j=+ac(m);k=+bc(m);f[g>>2]=k;f[g+4>>2]=j;f[g+8>>2]=0.0;f[g+12>>2]=0.0;f[g+16>>2]=-j;f[g+20>>2]=k;l=g+24|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[g+40>>2]=1.0;l=g+44|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[g+60>>2]=1.0;Pc(e,g,e);n=1;break}else{k=+f[a+112>>2];if(!(k!=0.0)){n=0;break}j=+ac(k);m=+bc(k);f[e>>2]=m;f[e+4>>2]=j;f[e+8>>2]=0.0;f[e+12>>2]=0.0;f[e+16>>2]=-j;f[e+20>>2]=m;l=e+24|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[e+40>>2]=1.0;l=e+44|0;c[l>>2]=0;c[l+4>>2]=0;c[l+8>>2]=0;c[l+12>>2]=0;f[e+60>>2]=1.0;n=1;break}}while(0);g=c[a+80>>2]|0;h=c[a+84>>2]|0;l=c[a+88>>2]|0;o=c[a+96>>2]|0;p=c[a+100>>2]|0;c[b>>2]=c[a+92>>2];a=b+4|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;c[b+20>>2]=o;o=b+24|0;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;c[b+40>>2]=p;f[b+44>>2]=0.0;c[b+48>>2]=g;c[b+52>>2]=h;c[b+56>>2]=l;f[b+60>>2]=1.0;if(!n){Cb=d;return}Pc(b,e,b);Cb=d;return}function ec(b,c){b=b|0;c=c|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;d=Cb;Cb=Cb+112|0;e=d;a[c>>0]=0;f=(Md(b)|0)+1|0;if((f|0)<=0){Cb=d;return}g=f;f=0;a:while(1){h=0;i=0;j=0;while(1){k=a[b+h>>0]|0;if(k<<24>>24<33|k<<24>>24==47)if((j|0)>0){a[e+j>>0]=0;if((i|0)==(f|0))break;l=i+1|0;m=0}else{l=i;m=j}else{a[e+j>>0]=k;l=i;m=j+1|0}h=h+1|0;if((h|0)>=(g|0)){n=19;break a}else{i=l;j=m}}f=f+1|0;j=0;i=0;h=0;while(1){k=a[b+j>>0]|0;if(k<<24>>24<33|k<<24>>24==47)if((h|0)>0){if((i|0)==(f|0)){n=17;break}o=i+1|0;p=0}else{o=i;p=h}else{o=i;p=h+1|0}j=j+1|0;if((j|0)>=(g|0))break;else{i=o;h=p}}if((n|0)==17){n=0;he(c,e)|0;h=c+(Md(c)|0)|0;a[h>>0]=47;a[h+1>>0]=0}g=(Md(b)|0)+1|0;if((g|0)<=0){n=19;break}}if((n|0)==19){Cb=d;return}}function fc(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;f[a>>2]=b;f[a+4>>2]=c;f[a+8>>2]=d;return}function gc(a){a=a|0;var b=0,d=0,e=0,g=0,h=0,i=0;b=Cb;Cb=Cb+96|0;d=b;e=b+84|0;g=b+72|0;h=b+60|0;i=b+48|0;fc(e,0.0,0.0,0.0);c[d>>2]=c[e>>2];c[d+4>>2]=c[e+4>>2];c[d+8>>2]=c[e+8>>2];fc(g,0.0,0.0,-1.0);e=d+12|0;c[e>>2]=c[g>>2];c[e+4>>2]=c[g+4>>2];c[e+8>>2]=c[g+8>>2];fc(h,0.0,1.0,0.0);g=d+24|0;c[g>>2]=c[h>>2];c[g+4>>2]=c[h+4>>2];c[g+8>>2]=c[h+8>>2];fc(i,1.5707963705062866,1.5707963705062866,-400.0);h=d+36|0;c[h>>2]=c[i>>2];c[h+4>>2]=c[i+4>>2];c[h+8>>2]=c[i+8>>2];i=a;h=d;d=i+48|0;do{c[i>>2]=c[h>>2];i=i+4|0;h=h+4|0}while((i|0)<(d|0));f[a+48>>2]=72.0;f[a+52>>2]=1.3333333730697632;f[a+56>>2]=1.0;f[a+60>>2]=1.0e4;f[a+64>>2]=.009999999776482582;f[a+68>>2]=3.009999990463257;Cb=b;return}function hc(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0.0,g=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0;e=+f[b>>2];g=+f[b+4>>2];h=+f[b+8>>2];i=e-+f[c>>2];j=g-+f[c+4>>2];k=h-+f[c+8>>2];l=+cc(i*i+j*j+k*k);if(l!=1.0){m=1.0/l;n=i*m;o=j*m;p=k*m}else{n=i;o=j;p=k}k=+f[d>>2];j=+f[d+4>>2];i=+f[d+8>>2];m=p*j-o*i;l=n*i-p*k;i=o*k-n*j;j=o*i-p*l;k=p*m-n*i;q=n*l-o*m;r=+cc(i*i+(m*m+l*l));if(r!=1.0){s=1.0/r;t=s*m;u=s*l;v=i*s}else{t=m;u=l;v=i}i=+cc(q*q+(j*j+k*k));if(i!=1.0){l=1.0/i;w=j*l;x=k*l;y=q*l}else{w=j;x=k;y=q}f[a>>2]=t;f[a+4>>2]=w;f[a+8>>2]=n;f[a+12>>2]=0.0;f[a+16>>2]=u;f[a+20>>2]=x;f[a+24>>2]=o;f[a+28>>2]=0.0;f[a+32>>2]=v;f[a+36>>2]=y;f[a+40>>2]=p;f[a+44>>2]=0.0;f[a+48>>2]=-(e*t+g*u+h*v);f[a+52>>2]=-(h*y+(g*x+e*w));f[a+56>>2]=-(h*p+(g*o+e*n));f[a+60>>2]=1.0;return}function ic(a,b){a=a|0;b=b|0;var d=0,e=0.0,g=0.0,h=0,i=0.0,j=0,k=0,l=0.0,m=0.0,n=0.0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0.0,y=0.0,z=0,A=0.0,B=0,C=0.0,D=0.0,E=0,F=0.0,G=0.0,H=0.0;if((c[a+72>>2]|0)==2){d=a+36|0;f[d>>2]=+f[a+64>>2]+ +f[d>>2]}if((c[a+76>>2]|0)==2){d=a+36|0;f[d>>2]=+f[d>>2]-+f[a+64>>2]}if((c[a+80>>2]|0)==2){d=a+40|0;f[d>>2]=+f[a+64>>2]+ +f[d>>2]}if((c[a+84>>2]|0)==2){d=a+40|0;f[d>>2]=+f[d>>2]-+f[a+64>>2]}d=a+36|0;e=+f[d>>2];g=e;h=g>6.283185308;i=h?g+-6.283185308:e;j=i<0.0;if(h|j)f[d>>2]=j?i+6.283185308:i;j=a+40|0;i=+f[j>>2];e=i;h=e>6.283185308;g=h?e+-6.283185308:i;k=g<0.0;if(h|k){l=k?g+6.283185308:g;f[j>>2]=l;m=l;n=l}else{m=i;n=e}f[a+28>>2]=!(n>=3.141592654)?1.0:-1.0;if((c[a+88>>2]|0)==2){k=a+44|0;f[k>>2]=+f[a+68>>2]+ +f[k>>2]}if((c[a+92>>2]|0)==2){k=a+44|0;f[k>>2]=+f[k>>2]-+f[a+68>>2];o=k}else o=a+44|0;n=+ac(m);k=a+12|0;f[k>>2]=n*+bc(+f[d>>2]);h=a+16|0;f[h>>2]=+bc(+f[j>>2]);m=n*+ac(+f[d>>2]);n=-m;d=a+20|0;f[d>>2]=n;e=+f[o>>2];if(!(e>0.0)){p=e;q=+f[k>>2];r=p*q;s=+f[b>>2];t=r+s;f[a>>2]=t;u=+f[h>>2];v=p*u;w=b+4|0;x=+f[w>>2];y=v+x;z=a+4|0;f[z>>2]=y;A=p*n;B=b+8|0;C=+f[B>>2];D=A+C;E=a+8|0;f[E>>2]=D;F=q+t;f[k>>2]=F;G=u+y;f[h>>2]=G;H=D-m;f[d>>2]=H;return}i=-e;f[o>>2]=i;p=i;q=+f[k>>2];r=p*q;s=+f[b>>2];t=r+s;f[a>>2]=t;u=+f[h>>2];v=p*u;w=b+4|0;x=+f[w>>2];y=v+x;z=a+4|0;f[z>>2]=y;A=p*n;B=b+8|0;C=+f[B>>2];D=A+C;E=a+8|0;f[E>>2]=D;F=q+t;f[k>>2]=F;G=u+y;f[h>>2]=G;H=D-m;f[d>>2]=H;return}function jc(a){a=a|0;var b=0,d=0.0,e=0.0,g=0,h=0,i=0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0;if((c[a+72>>2]|0)==2){b=a+36|0;f[b>>2]=+f[a+64>>2]+ +f[b>>2]}if((c[a+76>>2]|0)==2){b=a+36|0;f[b>>2]=+f[b>>2]-+f[a+64>>2]}if((c[a+80>>2]|0)==2){b=a+40|0;f[b>>2]=+f[a+64>>2]+ +f[b>>2]}if((c[a+84>>2]|0)==2){b=a+40|0;d=+f[b>>2]-+f[a+64>>2];f[b>>2]=d;e=d;g=b}else{b=a+40|0;e=+f[b>>2];g=b}d=+ac(e);b=a+36|0;h=a+12|0;f[h>>2]=d*+bc(+f[b>>2]);i=a+16|0;f[i>>2]=+bc(+f[g>>2]);e=d*+ac(+f[b>>2]);d=-e;b=a+20|0;f[b>>2]=d;j=+f[a+68>>2];if((c[a+88>>2]|0)==2){g=a+8|0;f[g>>2]=j*d+ +f[g>>2];k=+f[h>>2];f[a>>2]=+f[a>>2]+j*k;l=+f[i>>2];g=a+4|0;f[g>>2]=+f[g>>2]+j*l;g=a+44|0;f[g>>2]=+f[g>>2]-j*(k+l-e)}if((c[a+92>>2]|0)==2){g=a+8|0;l=+f[g>>2]-j*d;f[g>>2]=l;d=+f[h>>2];k=+f[a>>2]-j*d;f[a>>2]=k;m=+f[i>>2];g=a+4|0;n=+f[g>>2]-j*m;f[g>>2]=n;g=a+44|0;f[g>>2]=+f[g>>2]+j*(d+m-e);o=d;p=k;q=m;r=n;s=l;t=p+o;f[h>>2]=t;u=r+q;f[i>>2]=u;v=s-e;f[b>>2]=v;return}else{o=+f[h>>2];p=+f[a>>2];q=+f[i>>2];r=+f[a+4>>2];s=+f[a+8>>2];t=p+o;f[h>>2]=t;u=r+q;f[i>>2]=u;v=s-e;f[b>>2]=v;return}}function kc(a){a=a|0;c[a+28>>2]=0;c[a+56>>2]=0;c[a+52>>2]=0;c[a+60>>2]=0;c[a+276>>2]=0;c[a+44>>2]=0;f[a+80>>2]=0.0;f[a+84>>2]=0.0;f[a+88>>2]=0.0;f[a+104>>2]=0.0;f[a+108>>2]=0.0;f[a+112>>2]=0.0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;c[a+16>>2]=0;c[a+20>>2]=0;f[a+92>>2]=1.0;f[a+96>>2]=1.0;f[a+100>>2]=1.0;c[a+268>>2]=0;return}function lc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0;e=c[a>>2]|0;f=a+4|0;g=a+12|0;if((e|0)!=(c[f>>2]|0)){c[g>>2]=0;c[a+8>>2]=0;c[a+16>>2]=0;c[f>>2]=e;h=2;return h|0}e=(c[g>>2]|0)+1|0;c[g>>2]=e;if((e|0)<(b|0)){b=a+8|0;i=c[b>>2]|0;j=b}else{c[g>>2]=0;b=a+8|0;e=(c[b>>2]|0)+1|0;c[b>>2]=e;i=e;j=b}b=a+16|0;c[b>>2]=0;if((i|0)<(d|0)){h=0;return h|0}c[j>>2]=0;c[g>>2]=0;c[b>>2]=1;h=1;return h|0}function mc(a){a=a|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;c[a+16>>2]=0;return}function nc(b,d){b=b|0;d=d|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;f=c[b+32>>2]|0;g=c[b+16>>2]|0;switch(a[b+1>>0]|0){case 1:case 4:break;default:{h=0;return h|0}}Zg(d|0,0,768)|0;if((g|0)<=0){h=0;return h|0}i=b+6|0;b=0;j=0;k=0;while(1){l=a[f+j>>0]|0;m=a[f+(j+1)>>0]|0;n=a[f+(j+2)>>0]|0;o=0;while(1){if(((a[d+o>>0]|0)==l<<24>>24?(a[d+(o+1)>>0]|0)==m<<24>>24:0)?(a[d+(o+2)>>0]|0)==n<<24>>24:0){p=12;break}o=o+3|0;if(o>>>0>=768){p=9;break}}if((p|0)==9){p=0;if((k|0)>=768){p=10;break}a[d+k>>0]=l;a[d+(k+1)>>0]=m;a[d+(k+2)>>0]=n;q=b;r=k+3|0}else if((p|0)==12){p=0;if((b|0)==0?(m|l|n)<<24>>24==0:0){if((k|0)>=768){p=14;break}a[d+k>>0]=l;a[d+(k+1)>>0]=m;a[d+(k+2)>>0]=n;o=k+3|0;if((k|0)>764){h=o;p=17;break}else{q=1;r=o}}else{q=b;r=k}}j=j+(e[i>>1]|0)|0;if((j|0)>=(g|0)){h=r;p=17;break}else{b=q;k=r}}if((p|0)==10){h=k+3|0;return h|0}else if((p|0)==14){h=k+3|0;return h|0}else if((p|0)==17)return h|0;return 0}function oc(f,g){f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0;h=Cb;Cb=Cb+768|0;i=h;j=f+1|0;k=a[j>>0]|0;l=k<<24>>24==16;if((g|0)==17&l){m=q(e[f+4>>1]|0,e[f+2>>1]|0)|0;n=Lg(m>>>1)|0;o=f+32|0;p=c[o>>2]|0;if(m|0){r=(m+-1|0)>>>1;m=0;s=0;while(1){a[n+s>>0]=(d[p+(m|1)>>0]<<4)+(d[p+m>>0]|0);if((s|0)==(r|0))break;else{m=m+2|0;s=s+1|0}}}Mg(p);c[o>>2]=n;a[j>>0]=17;pc(f);Wc(f);t=1;Cb=h;return t|0}if((g|0)==1&l){n=q(e[f+4>>1]|0,e[f+2>>1]|0)|0;o=Lg(n<<2)|0;p=f+32|0;s=c[p>>2]|0;if(n|0){m=c[f+36>>2]|0;r=0;u=0;while(1){v=(d[s+r>>0]|0)*3|0;w=a[m+v>>0]|0;x=a[m+(v+1)>>0]|0;y=a[m+(v+2)>>0]|0;a[o+u>>0]=w;a[o+(u|1)>>0]=x;a[o+(u|2)>>0]=y;a[o+(u|3)>>0]=((y&w)<<24>>24!=-1|x<<24>>24!=0)<<31>>31;r=r+1|0;if((r|0)==(n|0))break;else u=u+4|0}}Mg(s);c[p>>2]=o;a[j>>0]=1;pc(f);Wc(f);t=1;Cb=h;return t|0}if((g|0)==2&l){l=q(e[f+4>>1]|0,e[f+2>>1]|0)|0;o=Lg(l<<1)|0;p=f+32|0;s=c[p>>2]|0;if(l|0){u=c[f+36>>2]|0;n=0;do{r=(d[s+n>>0]|0)*3|0;m=a[u+r>>0]|0;x=a[u+(r+1)>>0]|0;w=a[u+(r+2)>>0]|0;if(x<<24>>24==0&(w&m)<<24>>24==-1)z=0;else z=(((x&255)>>>3&255)<<5|(m&255)>>>3&255|((w&255)>>>3&255)<<10|32768)&65535;b[o+(n<<1)>>1]=z;n=n+1|0}while((n|0)!=(l|0))}Mg(s);c[p>>2]=o;a[j>>0]=2;pc(f);Wc(f);t=1;Cb=h;return t|0}switch(k<<24>>24){case 1:case 4:break;default:{t=0;Cb=h;return t|0}}if((g|1|0)==17)A=nc(f,i)|0;else A=0;if((g|0)==16&(A|0)<769){k=q(e[f+4>>1]|0,e[f+2>>1]|0)|0;o=Lg(k)|0;a:do if(!k)B=0;else{p=f+6|0;if((A|0)<=0){Zg(o|0,0,k|0)|0;s=e[p>>1]|0;l=0;n=0;while(1){z=n+s|0;l=l+1|0;if((l|0)==(k|0)){B=z;break a}else n=z}}n=c[f+32>>2]|0;l=0;s=0;while(1){z=a[n+s>>0]|0;u=a[n+(s+1)>>0]|0;w=a[n+(s+2)>>0]|0;m=0;while(1){if(((a[i+m>>0]|0)==z<<24>>24?(a[i+(m+1)>>0]|0)==u<<24>>24:0)?(a[i+(m+2)>>0]|0)==w<<24>>24:0){C=m;break}x=m+3|0;if((x|0)<(A|0))m=x;else{C=x;break}}a[o+l>>0]=(C>>>0)/3|0;m=s+(e[p>>1]|0)|0;l=l+1|0;if((l|0)==(k|0)){B=m;break}else s=m}}while(0);b[f+8>>1]=A;k=Lg(A)|0;C=f+36|0;c[C>>2]=k;if((A|0)>0?(a[k>>0]=a[i>>0]|0,(A|0)!=1):0){k=1;do{a[(c[C>>2]|0)+k>>0]=a[i+k>>0]|0;k=k+1|0}while((k|0)!=(A|0));D=B;E=o}else{D=B;E=o}}else{D=0;E=0}b:do switch(g|0){case 2:case 6:case 7:{o=q(e[f+4>>1]|0,e[f+2>>1]|0)|0;B=Lg(o<<1)|0;A=(o|0)!=0;if((g|0)==6){if(!A){F=B;G=61;break b}k=c[f+32>>2]|0;i=e[f+6>>1]|0;C=0;s=D;while(1){b[B+(C<<1)>>1]=((d[k+(s+1)>>0]|0)>>>2&255)<<5|(d[k+s>>0]|0)>>>3&255|((d[k+(s+2)>>0]|0)>>>3&255)<<11;l=s+i|0;C=C+1|0;if((C|0)==(o|0)){H=l;I=B;G=49;break b}else s=l}}if(A){s=f+6|0;C=c[f+32>>2]|0;i=(a[j>>0]|0)==1;k=0;l=D;while(1){p=(d[C+l>>0]|0)>>>3;n=(d[C+(l+1)>>0]|0)>>>3;m=(d[C+(l+2)>>0]|0)>>>3;if(i)if((a[C+(l+3)>>0]|0)>-1)J=0;else J=((n&255)<<5|p&255|(m&255)<<10|32768)&65535;else J=((n&255)<<5|p&255|(m&255)<<10)&65535;b[B+(k<<1)>>1]=J;m=l+(e[s>>1]|0)|0;k=k+1|0;if((k|0)==(o|0)){H=m;I=B;G=49;break}else l=m}}else{H=D;I=B;G=49}break}default:{H=D;I=E;G=49}}while(0);c:do if((G|0)==49){switch(g|0){case 130:case 134:case 135:break;default:{F=I;G=61;break c}}E=q(e[f+4>>1]|0,e[f+2>>1]|0)|0;D=Lg(E<<1)|0;J=(E|0)!=0;if((g|0)==134){if(!J){F=D;G=61;break}l=c[f+32>>2]|0;o=e[f+6>>1]|0;k=0;s=H;while(1){b[D+(k<<1)>>1]=((d[l+(s+1)>>0]|0)>>>2&255)<<5|(d[l+(s+2)>>0]|0)>>>3&255|((d[l+s>>0]|0)>>>3&255)<<11;k=k+1|0;if((k|0)==(E|0)){K=D;break c}else s=s+o|0}}if(J){o=f+6|0;s=c[f+32>>2]|0;k=(a[j>>0]|0)==1;l=0;B=H;while(1){C=(d[s+(B+2)>>0]|0)>>>3;i=(d[s+(B+1)>>0]|0)>>>3;A=(d[s+B>>0]|0)>>>3;if(k)if((a[s+(B+3)>>0]|0)>-1)L=0;else L=((i&255)<<5|C&255|(A&255)<<10|32768)&65535;else L=((i&255)<<5|C&255|(A&255)<<10)&65535;b[D+(l<<1)>>1]=L;l=l+1|0;if((l|0)==(E|0)){K=D;break}else B=B+(e[o>>1]|0)|0}}else{F=D;G=61}}while(0);if((G|0)==61)if(!F){t=0;Cb=h;return t|0}else K=F;F=f+32|0;Mg(c[F>>2]|0);c[F>>2]=K;a[j>>0]=g;pc(f);Wc(f);t=1;Cb=h;return t|0}function pc(d){d=d|0;var f=0;do switch(a[d+1>>0]&127){case 32:{b[d+6>>1]=1;a[d>>0]=8;f=q(e[d+4>>1]|0,e[d+2>>1]|0)|0;break}case 33:{b[d+6>>1]=1;a[d>>0]=8;f=q(e[d+4>>1]|0,e[d+2>>1]|0)|0;break}case 4:{b[d+6>>1]=3;a[d>>0]=24;f=q((e[d+2>>1]|0)*3|0,e[d+4>>1]|0)|0;break}case 1:{b[d+6>>1]=4;a[d>>0]=32;f=q((e[d+2>>1]|0)<<2,e[d+4>>1]|0)|0;break}case 7:{b[d+6>>1]=2;a[d>>0]=16;f=q((e[d+2>>1]|0)<<1,e[d+4>>1]|0)|0;break}case 6:{b[d+6>>1]=2;a[d>>0]=16;f=q((e[d+2>>1]|0)<<1,e[d+4>>1]|0)|0;break}case 2:{b[d+6>>1]=2;a[d>>0]=16;f=q((e[d+2>>1]|0)<<1,e[d+4>>1]|0)|0;break}case 16:{b[d+6>>1]=1;a[d>>0]=8;f=q(e[d+4>>1]|0,e[d+2>>1]|0)|0;break}case 17:{b[d+6>>1]=-1;b[d+8>>1]=48;a[d>>0]=4;f=(q(e[d+4>>1]|0,e[d+2>>1]|0)|0)>>>1;break}case 18:{b[d+6>>1]=-2;a[d>>0]=2;f=(q(e[d+4>>1]|0,e[d+2>>1]|0)|0)>>>2;break}default:{ne(4949)|0;b[d+6>>1]=3;a[d>>0]=24;f=q((e[d+2>>1]|0)*3|0,e[d+4>>1]|0)|0}}while(0);c[d+16>>2]=f;return}function qc(a){a=a|0;var b=0,d=0;b=a+32|0;d=c[b>>2]|0;if(d|0)Mg(d);d=a+36|0;a=c[d>>2]|0;if(a|0)Mg(a);c[b>>2]=0;c[d>>2]=0;return}function rc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0;h=Cb;Cb=Cb+192|0;i=h+112|0;j=h+104|0;k=h+120|0;l=h;m=Ub(b,5043,f,g+e|0)|0;if(!m){n=0;Cb=h;return n|0}Vb(m,e,0)|0;Yb(k,1,72,m)|0;if(id(k,4973,4)|0){be(m)|0;n=0;Cb=h;return n|0}o=k+4|0;p=a[o>>0]|0;r=((p&255)>>>5&2^2)+2<<24>>24;s=r&255;t=((p&255)>>>4&2)+2&255;p=Lg(288)|0;kc(p);u=k+32|0;v=c[u>>2]|0;if((v|0)>0){w=a[o>>0]|0;if(!(w&1)){x=w;y=v}else{w=s*3|0;z=Lg(q(w,v)|0)|0;c[p>>2]=z;Yb(z,s,v*3|0,m)|0;v=c[u>>2]|0;z=q(w,v)|0;w=p+276|0;c[w>>2]=z+(c[w>>2]|0);x=a[o>>0]|0;y=v}if(!(x&2)){A=x;B=y}else{x=r<<1&255;r=Lg(q(y,x)|0)|0;c[p+4>>2]=r;Yb(r,s,y<<1,m)|0;y=c[u>>2]|0;r=q(y,x)|0;x=p+276|0;c[x>>2]=r+(c[x>>2]|0);A=a[o>>0]|0;B=y}if(A&4){A=s*3|0;y=Lg(q(A,B)|0)|0;c[p+8>>2]=y;Yb(y,s,B*3|0,m)|0;B=q(A,c[u>>2]|0)|0;A=p+276|0;c[A>>2]=B+(c[A>>2]|0)}}if(a[o>>0]&8){A=k+36|0;B=c[A>>2]|0;s=t*3|0;y=Lg(q(s,B)|0)|0;c[p+28>>2]=y;Yb(y,t,B*3|0,m)|0;B=q(s,c[A>>2]|0)|0;A=p+276|0;c[A>>2]=B+(c[A>>2]|0)}A=k+40|0;B=c[A>>2]|0;if((B|0)>0?(s=B<<2,c[p+56>>2]=Lg(s)|0,t=Lg(s)|0,c[p+52>>2]=t,y=p+64|0,c[y>>2]=Lg(s)|0,Yb(t,4,B,m)|0,(c[A>>2]|0)>0):0){B=k+6|0;t=0;do{s=d[B>>0]|0;x=Lg(s)|0;c[(c[y>>2]|0)+(t<<2)>>2]=x;Yb(c[(c[y>>2]|0)+(t<<2)>>2]|0,1,s,m)|0;t=t+1|0}while((t|0)<(c[A>>2]|0))}t=a[o>>0]|0;if(t<<24>>24<0){y=k+52|0;B=c[y>>2]|0;s=B<<2;x=Lg(s)|0;c[p+32>>2]=x;r=p+36|0;c[r>>2]=Lg(s)|0;Yb(x,4,B,m)|0;Yb(c[r>>2]|0,4,c[y>>2]|0,m)|0;C=a[o>>0]|0}else C=t;t=k+44|0;if(C&16){C=c[t>>2]|0;y=Lg((C<<2)+4|0)|0;r=p+40|0;c[r>>2]=y;Yb(y,4,C,m)|0;c[(c[r>>2]|0)+(c[t>>2]<<2)>>2]=c[u>>2];r=c[t>>2]|0;C=Lg((r<<6)+64|0)|0;c[p+48>>2]=C;Yb(C,4,r<<4,m)|0}Xb(m)|0;c[p+20>>2]=c[k+36>>2];c[p+16>>2]=c[u>>2];c[p+272>>2]=d[o>>0];c[p+60>>2]=c[A>>2];c[p+24>>2]=c[k+52>>2];c[p+44>>2]=c[t>>2];c[p+116>>2]=c[k+8>>2];c[p+124>>2]=c[k+16>>2];c[p+132>>2]=c[k+24>>2];c[p+120>>2]=c[k+12>>2];c[p+128>>2]=c[k+20>>2];c[p+136>>2]=c[k+28>>2];a[l>>0]=0;if(b|0)ec(b,l);c[j>>2]=l;c[j+4>>2]=b;me(4977,j)|0;_b(p,b,l,e,f,g);Vc(p);c[i>>2]=c[p+276>>2];me(5003,i)|0;n=p;Cb=h;return n|0}function sc(d,f,g,h){d=d|0;f=f|0;g=g|0;h=h|0;var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0;i=Cb;Cb=Cb+64|0;j=i;k=Ub(d,5043,g,h+f|0)|0;if(!k){l=0;Cb=i;return l|0}Vb(k,f,0)|0;Yb(j,1,2,k)|0;if((b[j>>1]|0)==19778){Yb(j+4|0,1,54,k)|0;f=Lg(40)|0;h=f+32|0;c[h>>2]=0;g=f+36|0;c[g>>2]=0;d=f+2|0;b[d>>1]=c[j+20>>2];m=f+4|0;b[m>>1]=c[j+24>>2];n=j+30|0;o=(b[n>>1]|0)+-8<<16>>16;p=(o&65535)>>>3|o<<13&65535;if((p&65535)<4)a[f+1>>0]=17039888>>>((p&65535)<<3);pc(f);p=f+16|0;c[h>>2]=Lg(c[p>>2]|0)|0;Vb(k,c[j+12>>2]|0,0)|0;j=b[n>>1]|0;if(j<<16>>16==8){b[f+8>>1]=768;o=Lg(768)|0;c[g>>2]=o;Yb(o,1,768,k)|0;r=b[n>>1]|0}else r=j;j=f+6|0;o=q(e[j>>1]|0,e[d>>1]|0)|0;if((r&65535)>23){r=c[p>>2]|0;d=Lg(r)|0;Yb(d,1,r,k)|0;r=b[m>>1]|0;if(!((r&65535)<2|(o|0)==0)){m=0;g=r&65535;while(1){r=g;g=g+-1|0;s=q(g,o)|0;t=m;u=0;while(1){v=u+s|0;a[(c[h>>2]|0)+(v+2)>>0]=a[d+t>>0]|0;a[(c[h>>2]|0)+(v+1)>>0]=a[d+(t+1)>>0]|0;a[(c[h>>2]|0)+v>>0]=a[d+(t+2)>>0]|0;w=t+3|0;if((b[n>>1]|0)==32){a[(c[h>>2]|0)+(v+3)>>0]=a[d+w>>0]|0;x=t+4|0}else x=w;u=u+(e[j>>1]|0)|0;if(u>>>0>=o>>>0)break;else t=x}if((r|0)<=2)break;else m=x}}Mg(d)}else Yb(c[h>>2]|0,1,c[p>>2]|0,k)|0;Xb(k)|0;Wc(f);y=f}else{Xb(k)|0;y=0}l=y;Cb=i;return l|0}function tc(a,b,e,f){a=a|0;b=b|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0;g=Cb;Cb=Cb+16|0;h=g;i=Ub(a,5043,e,f+b|0)|0;if(!i){j=0;Cb=g;return j|0}Vb(i,b,0)|0;b=Lg(24)|0;Yb(h,1,2,i)|0;f=(d[h>>0]|0)<<4;c[b+12>>2]=f;e=(d[h+1>>0]|0)<<4;c[b+16>>2]=e;c[b+4>>2]=0;c[b+8>>2]=0;h=q(e,f)|0;f=Lg(h<<1)|0;c[b+20>>2]=f;Yb(f,2,h,i)|0;Xb(i)|0;j=b;Cb=g;return j|0}function uc(d,f,g,h){d=d|0;f=f|0;g=g|0;h=h|0;var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;i=Cb;Cb=Cb+393344|0;j=i+393216|0;k=i;l=Ub(d,5043,g,h+f|0)|0;if(!l){m=0;Cb=i;return m|0}Vb(l,f,0)|0;Yb(j,1,128,l)|0;if((a[j>>0]|0)==10){f=Lg(40)|0;h=f+32|0;c[h>>2]=0;g=f+36|0;c[g>>2]=0;b[f+2>>1]=(e[j+8>>1]|0)+1-(e[j+4>>1]|0);b[f+4>>1]=(e[j+10>>1]|0)+1-(e[j+6>>1]|0);a[f+1>>0]=16;pc(f);j=f+16|0;d=c[j>>2]|0;c[h>>2]=Lg(d)|0;Yb(k,1,d+769|0,l)|0;Xb(l)|0;d=a[k>>0]|0;if((c[j>>2]|0)>0){n=d;o=0;p=1;q=0;while(1){if((n&255)>=193){r=q+2|0;s=a[k+p>>0]|0;t=n&63;u=t&255;if(!(t<<24>>24)){v=o;w=r}else{t=o;x=0;while(1){a[(c[h>>2]|0)+t>>0]=s;x=x+1|0;if((x|0)==(u|0))break;else t=t+1|0}v=o+u|0;w=r}}else{a[(c[h>>2]|0)+o>>0]=n;v=o+1|0;w=p}t=w+1|0;x=a[k+w>>0]|0;if((v|0)<(c[j>>2]|0)){n=x;o=v;p=t;q=w}else{y=x;z=t;break}}}else{y=d;z=1}if(y<<24>>24==12){b[f+8>>1]=768;y=Lg(768)|0;c[g>>2]=y;Yg(y|0,k+z|0,768)|0}Wc(f);A=f}else{Xb(l)|0;A=0}m=A;Cb=i;return m|0}function vc(b,e,f,g,h,i){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;var j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0;j=Cb;Cb=Cb+560|0;k=j+32|0;l=j+16|0;m=j;n=j+40|0;o=b+4|0;p=b+8|0;q=b+12|0;c[b>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;c[b+12>>2]=0;r=Ub(e,5043,h,i)|0;if(!r){Cb=j;return}Vb(r,0,2)|0;i=Wb(r)|0;Vb(r,0,0)|0;h=n+156|0;e=n+134|0;s=n+133|0;t=n+132|0;u=n+131|0;v=n+130|0;w=n+129|0;x=n+128|0;y=n+127|0;z=n+126|0;A=n+125|0;B=n+124|0;a:do if(!(g&1)){C=0;while(1){Yb(n,1,512,r)|0;D=(d[B>>0]<<30)+((d[A>>0]<<27^-2147483648)+((d[z>>0]<<24)+((a[y>>0]<<21)+((a[x>>0]<<18)+((a[w>>0]<<15)+((a[v>>0]<<12)+((a[u>>0]<<9)+((a[t>>0]<<6)+((a[s>>0]<<3)+(a[e>>0]|0))))))))+-920350128))|0;c[o>>2]=D;c[p>>2]=a[h>>0];E=C+512|0;if(!(hd(f,n)|0)){F=E;G=9;break a}H=D+E|0;E=H&511;I=(E|0)==0?0:512-E|0;E=I+H|0;if((E|0)>=(i|0)){G=17;break a}Vb(r,I+D|0,1)|0;C=E}}else{C=0;while(1){Yb(n,1,512,r)|0;E=(d[B>>0]<<30)+((d[A>>0]<<27^-2147483648)+((d[z>>0]<<24)+((a[y>>0]<<21)+((a[x>>0]<<18)+((a[w>>0]<<15)+((a[v>>0]<<12)+((a[u>>0]<<9)+((a[t>>0]<<6)+((a[s>>0]<<3)+(a[e>>0]|0))))))))+-920350128))|0;c[o>>2]=E;D=a[h>>0]|0;c[p>>2]=D;I=C+512|0;c[m>>2]=n;c[m+4>>2]=E;c[m+8>>2]=D;c[m+12>>2]=I;me(5014,m)|0;if(!(hd(f,n)|0)){F=I;G=9;break a}D=c[o>>2]|0;E=D+I|0;I=E&511;H=(I|0)==0?0:512-I|0;I=H+E|0;if((I|0)>=(i|0)){G=17;break a}Vb(r,H+D|0,1)|0;C=I}}while(0);if((G|0)==9){if(g&2|0){i=c[o>>2]|0;m=c[p>>2]|0;c[l>>2]=n;c[l+4>>2]=i;c[l+8>>2]=m;c[l+12>>2]=F;me(5014,l)|0}if(g&4|0){l=c[o>>2]|0;o=Lg(l)|0;c[b>>2]=o;Yb(o,1,l,r)|0}if(g&8|0)c[q>>2]=F;Xb(r)|0}else if((G|0)==17){Xb(r)|0;c[k>>2]=f;me(5027,k)|0}Cb=j;return}function wc(b){b=b|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;e=b+28|0;f=c[e>>2]|0;if(f|0){g=f;return g|0}f=b+36|0;if((c[f>>2]|0)!=2){g=0;return g|0}if((c[b+44>>2]|0)>>>0<29){c[e>>2]=3;c[b+32>>2]=912;g=3;return g|0}h=c[b+40>>2]|0;if((((((((a[h>>0]|0)==-119?(a[h+1>>0]|0)==80:0)?(a[h+2>>0]|0)==78:0)?(a[h+3>>0]|0)==71:0)?(a[h+4>>0]|0)==13:0)?(a[h+5>>0]|0)==10:0)?(a[h+6>>0]|0)==26:0)?(a[h+7>>0]|0)==10:0){if((d[h+13>>0]<<16|d[h+12>>0]<<24|d[h+14>>0]<<8|d[h+15>>0]|0)!=1229472850){c[e>>2]=4;c[b+32>>2]=924;g=4;return g|0}c[b>>2]=d[h+17>>0]<<16|d[h+16>>0]<<24|d[h+18>>0]<<8|d[h+19>>0];c[b+4>>2]=d[h+21>>0]<<16|d[h+20>>0]<<24|d[h+22>>0]<<8|d[h+23>>0];i=a[h+24>>0]|0;c[b+12>>2]=i&255;j=a[h+25>>0]|0;c[b+8>>2]=j&255;a:do switch(j<<24>>24){case 0:{switch(i<<24>>24){case 1:{k=5;l=27;break a;break}case 2:{k=6;l=27;break a;break}case 4:{k=7;l=27;break a;break}case 8:{k=8;l=27;break a;break}default:{l=28;break a}}break}case 2:{if(i<<24>>24==8){k=1;l=27}else{m=i<<24>>24==16?2:0;l=29}break}case 4:{switch(i<<24>>24){case 1:{k=9;l=27;break a;break}case 2:{k=10;l=27;break a;break}case 4:{k=11;l=27;break a;break}case 8:{k=12;l=27;break a;break}default:{l=28;break a}}break}case 6:{if(i<<24>>24==8){k=3;l=27}else{m=i<<24>>24==16?4:0;l=29}break}default:l=28}while(0);if((l|0)==27)c[b+16>>2]=k;else if((l|0)==28){c[b+16>>2]=0;l=30}else if((l|0)==29?(c[b+16>>2]=m,(m|0)==0):0)l=30;if((l|0)==30){c[e>>2]=7;c[b+32>>2]=937;g=7;return g|0}if(a[h+26>>0]|0){c[e>>2]=4;c[b+32>>2]=943;g=4;return g|0}if(a[h+27>>0]|0){c[e>>2]=4;c[b+32>>2]=949;g=4;return g|0}if(!(a[h+28>>0]|0)){c[f>>2]=1;g=0;return g|0}else{c[e>>2]=6;c[b+32>>2]=955;g=6;return g|0}}c[e>>2]=3;c[b+32>>2]=918;g=3;return g|0}function xc(b){b=b|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=0,Ka=0,La=0,Ma=0,Na=0,Oa=0,Pa=0,Qa=0,Ra=0,Sa=0,Ta=0,Ua=0,Va=0,Wa=0,Xa=0,Ya=0,Za=0,_a=0,$a=0,ab=0,bb=0,cb=0,db=0,eb=0,fb=0,gb=0,hb=0,ib=0,jb=0,kb=0,lb=0,mb=0,nb=0,ob=0,pb=0,qb=0,rb=0,sb=0,tb=0,ub=0,vb=0;e=Cb;Cb=Cb+4208|0;f=e+4096|0;g=e+2944|0;h=e+2816|0;i=e+512|0;j=e+256|0;k=e+4196|0;l=e+4184|0;m=e;n=e+4172|0;o=b+28|0;p=c[o>>2]|0;if(p|0){r=p;Cb=e;return r|0}wc(b)|0;p=c[o>>2]|0;if(p|0){r=p;Cb=e;return r|0}p=b+36|0;if((c[p>>2]|0)!=1){r=0;Cb=e;return r|0}s=b+20|0;t=c[s>>2]|0;if(t|0){Mg(t);c[s>>2]=0;c[b+24>>2]=0}t=b+40|0;u=c[t>>2]|0;v=u+33|0;w=b+44|0;x=c[w>>2]|0;y=(x|0)>33;a:do if(y){z=u;A=u+x|0;B=v;C=0;while(1){D=B-z+12|0;if(D>>>0>x>>>0){E=9;break}F=d[B+1>>0]<<16|d[B>>0]<<24|d[B+2>>0]<<8|d[B+3>>0];if((F|0)<0){E=11;break}if((D+F|0)>>>0>x>>>0){E=13;break}D=d[B+4>>0]|0;G=d[B+5>>0]<<16|D<<24|d[B+6>>0]<<8|d[B+7>>0];b:do if((G|0)<1229278788){switch(G|0){case 1229209940:break;default:{E=16;break b}}H=F+C|0}else switch(G|0){case 1229278788:{I=C;break a;break}default:E=16}while(0);if((E|0)==16){E=0;if(!(D&32)){E=17;break}else H=C}B=B+(F+12)|0;if(B>>>0>=A>>>0){I=H;break a}else C=H}if((E|0)==9){c[o>>2]=4;c[b+32>>2]=1007;r=4;Cb=e;return r|0}else if((E|0)==11){c[o>>2]=4;c[b+32>>2]=1014;r=4;Cb=e;return r|0}else if((E|0)==13){c[o>>2]=4;c[b+32>>2]=1020;r=4;Cb=e;return r|0}else if((E|0)==17){c[o>>2]=5;c[b+32>>2]=1033;r=5;Cb=e;return r|0}}else I=0;while(0);H=u+x|0;x=Lg(I)|0;if(!x){c[o>>2]=1;c[b+32>>2]=1043;r=1;Cb=e;return r|0}c:do if(y){u=v;C=0;while(1){A=u+1|0;B=u+2|0;z=u+3|0;G=d[A>>0]<<16|d[u>>0]<<24|d[B>>0]<<8|d[z>>0];J=d[u+5>>0]<<16|d[u+4>>0]<<24|d[u+6>>0]<<8|d[u+7>>0];d:do if((J|0)<1229278788){switch(J|0){case 1229209940:break;default:{K=C;L=G;break d}}Yg(x+C|0,u+8|0,G|0)|0;K=G+C|0;L=d[A>>0]<<16|d[u>>0]<<24|d[B>>0]<<8|d[z>>0]}else switch(J|0){case 1229278788:{break c;break}default:{K=C;L=G}}while(0);u=u+(L+12)|0;if(u>>>0>=H>>>0)break;else C=K}}while(0);K=c[b>>2]|0;H=b+4|0;L=c[H>>2]|0;v=b+12|0;y=c[v>>2]|0;C=b+8|0;switch(c[C>>2]|0){case 0:{M=1;break}case 2:{M=3;break}case 4:{M=2;break}case 6:{M=4;break}default:M=0}u=((q((q(q(y,L)|0,M)|0)+7|0,K)|0)>>>3)+L|0;L=Lg(u)|0;if(!L){Mg(x);c[o>>2]=1;c[b+32>>2]=1073;r=1;Cb=e;return r|0}e:do if(I>>>0>=2){K=a[x>>0]|0;M=K&255;y=d[x+1>>0]|0;if(((M<<8|y)>>>0)%31|0|0){c[o>>2]=4;c[b+32>>2]=653;break}if(K<<24>>24<0|(M&15|0)!=8){c[o>>2]=4;c[b+32>>2]=659;break}if(y&32|0){c[o>>2]=4;c[b+32>>2]=665;break}y=x+2|0;M=b+32|0;K=k+8|0;G=k+4|0;J=l+8|0;z=l+4|0;B=n+8|0;A=n+4|0;F=I+-2|0;D=I+-4|0;N=g+1024|0;O=x+6|0;P=0;Q=0;f:while(1){R=P>>>3;if(R>>>0>=I>>>0){E=44;break}S=d[y+R>>0]|0;R=P&7;T=P+1|0;U=P+2|0;V=P+3|0;W=((d[y+(U>>>3)>>0]|0)>>>(U&7)<<1|(d[y+(T>>>3)>>0]|0)>>>(T&7)&1)&255;switch(W&3){case 3:{E=46;break f;break}case 0:{if(!(V&7))X=V;else{T=V;while(1){U=T+1|0;if(!(U&7)){X=U;break}else T=U}}T=X>>>3;if(T>>>0>=D>>>0){E=51;break f}U=d[y+(T+1)>>0]<<8|d[y+T>>0];Y=T+4|0;if(((d[y+(T+3)>>0]<<8|d[y+(T+2)>>0])+U|0)!=65535){E=53;break f}Z=U+Q|0;if(Z>>>0>=u>>>0){E=55;break f}_=U+Y|0;if(_>>>0>I>>>0){E=57;break f}if(!U){$=Y;aa=Q}else{Yg(L+Q|0,O+T|0,U|0)|0;$=_;aa=Z}ba=c[o>>2]|0;ca=$<<3;da=aa;break}default:{switch(W&3){case 1:{c[k>>2]=16;c[K>>2]=288;c[G>>2]=15;c[l>>2]=2320;c[J>>2]=32;c[z>>2]=15;ea=16;fa=2320;ga=V;break}case 2:{c[k>>2]=i;c[K>>2]=288;c[G>>2]=15;c[l>>2]=j;c[J>>2]=32;c[z>>2]=15;c[n>>2]=m;c[B>>2]=19;c[A>>2]=7;Z=V>>>3;g:do if(Z>>>0<F>>>0){Zg(g|0,0,1152)|0;_=h;U=_+128|0;do{c[_>>2]=0;_=_+4|0}while((_|0)<(U|0));_=a[y+Z>>0]|0;U=P+4|0;T=a[y+(U>>>3)>>0]|0;Y=U&7;U=P+5|0;ha=a[y+(U>>>3)>>0]|0;ia=U&7;U=P+6|0;ja=a[y+(U>>>3)>>0]|0;ka=U&7;U=P+7|0;la=a[y+(U>>>3)>>0]|0;ma=U&7;U=P+8|0;na=a[y+(U>>>3)>>0]|0;oa=P+9|0;pa=a[y+(oa>>>3)>>0]|0;qa=P+10|0;ra=a[y+(qa>>>3)>>0]|0;sa=P+11|0;ta=a[y+(sa>>>3)>>0]|0;ua=P+12|0;va=a[y+(ua>>>3)>>0]|0;wa=P+13|0;xa=P+14|0;ya=P+15|0;za=P+16|0;Aa=P+17|0;Ba=((d[y+(xa>>>3)>>0]|0)>>>(xa&7)<<1&2|(d[y+(wa>>>3)>>0]|0)>>>(wa&7)&1|(d[y+(ya>>>3)>>0]|0)>>>(ya&7)<<2&4|(d[y+(za>>>3)>>0]|0)>>>(za&7)<<3&8)+4|0;za=Aa;ya=Aa;Aa=0;while(1){if(Aa>>>0<Ba>>>0){wa=za+1|0;xa=za+2|0;Ca=za+3|0;Da=Ca;Ea=(d[y+(wa>>>3)>>0]|0)>>>(wa&7)<<1&2|(d[y+(za>>>3)>>0]|0)>>>(za&7)&1|(d[y+(xa>>>3)>>0]|0)>>>(xa&7)<<2&4;Fa=Ca}else{Da=za;Ea=0;Fa=ya}c[f+(c[2576+(Aa<<2)>>2]<<2)>>2]=Ea;Aa=Aa+1|0;if((Aa|0)==19)break;else{za=Da;ya=Fa}}ya=(T&255)>>>Y<<1&2|(_&255)>>>(V&7)&1|(ha&255)>>>ia<<2&4|(ja&255)>>>ka<<3&8|(la&255)>>>ma<<4&16;za=ya+257|0;yc(b,n,f);if(!(c[o>>2]|0)){Aa=ya+258+((pa&255)>>>(oa&7)<<1&2|(na&255)>>>(U&7)&1|(ra&255)>>>(qa&7)<<2&4|(ta&255)>>>(sa&7)<<3&8|(va&255)>>>(ua&7)<<4&16)|0;do if(Aa){Ba=-258-ya|0;Ca=0;xa=0;wa=Fa;Ga=0;h:while(1){Ha=wa&7;Ia=wa>>>3;if((Ha|0)==0&Ia>>>0>I>>>0){Ja=wa;E=75;break}Ka=wa;La=Ha;Ha=Ia;Ia=0;while(1){Ma=Ka+1|0;Na=c[m+(((d[y+Ha>>0]|0)>>>La&1|Ia<<1)<<2)>>2]|0;if(Na>>>0<19)break;Ia=Na+-19|0;if(Ia>>>0>=19){E=78;break h}La=Ma&7;Ha=Ma>>>3;if((La|0)==0&Ha>>>0>I>>>0){Ja=Ma;E=75;break h}else Ka=Ma}if(Ca|0){Oa=Ma;break g}i:do if(Na>>>0<16){c[(Ga>>>0<za>>>0?g+(Ga<<2)|0:h+(Ga-za<<2)|0)>>2]=Na;Pa=xa;Qa=0;Ra=Ma;Sa=Ga+1|0}else switch(Na|0){case 16:{Ha=Ma>>>3;if(Ha>>>0>=I>>>0){E=88;break h}La=Ka+2|0;Ia=Ka+3|0;Ta=((d[y+(La>>>3)>>0]|0)>>>(La&7)<<1&2|(d[y+Ha>>0]|0)>>>(Ma&7)&1)+3|0;Ha=Ga+-1|0;La=c[(Ha>>>0<za>>>0?g+(Ha<<2)|0:h+(Ba+Ga<<2)|0)>>2]|0;Ha=Ga;Ua=0;while(1){if(Ha>>>0>=Aa>>>0)break;c[(Ha>>>0<za>>>0?g+(Ha<<2)|0:h+(Ha-za<<2)|0)>>2]=La;Va=Ha+1|0;Ua=Ua+1|0;if(Ua>>>0>=Ta>>>0){Pa=xa;Qa=0;Ra=Ia;Sa=Va;break i}else Ha=Va}c[o>>2]=4;c[M>>2]=372;Pa=4;Qa=4;Ra=Ia;Sa=Ha;break i;break}case 17:{Ta=Ma>>>3;if(Ta>>>0>=I>>>0){E=94;break h}Ua=Ka+2|0;La=Ka+3|0;Va=Ka+4|0;Wa=((d[y+(Ua>>>3)>>0]|0)>>>(Ua&7)<<1&2|(d[y+Ta>>0]|0)>>>(Ma&7)&1|(d[y+(La>>>3)>>0]|0)>>>(La&7)<<2&4)+3|0;La=Ga;Ta=0;while(1){if(La>>>0>=Aa>>>0)break;c[(La>>>0<za>>>0?g+(La<<2)|0:h+(La-za<<2)|0)>>2]=0;Ua=La+1|0;Ta=Ta+1|0;if(Ta>>>0>=Wa>>>0){Pa=xa;Qa=0;Ra=Va;Sa=Ua;break i}else La=Ua}c[o>>2]=4;c[M>>2]=397;Pa=4;Qa=4;Ra=Va;Sa=La;break i;break}case 18:{Wa=Ma>>>3;if(Wa>>>0>=I>>>0){E=101;break h}Ta=Ka+2|0;Ha=Ka+3|0;Ia=Ka+4|0;Ua=Ka+5|0;Xa=Ka+6|0;Ya=Ka+7|0;Za=Ka+8|0;_a=((d[y+(Ta>>>3)>>0]|0)>>>(Ta&7)<<1&2|(d[y+Wa>>0]|0)>>>(Ma&7)&1|(d[y+(Ha>>>3)>>0]|0)>>>(Ha&7)<<2&4|(d[y+(Ia>>>3)>>0]|0)>>>(Ia&7)<<3&8|(d[y+(Ua>>>3)>>0]|0)>>>(Ua&7)<<4&16|(d[y+(Xa>>>3)>>0]|0)>>>(Xa&7)<<5&32|(d[y+(Ya>>>3)>>0]|0)>>>(Ya&7)<<6&64)+11|0;if(!_a){Pa=xa;Qa=0;Ra=Za;Sa=Ga;break i}Ya=Ga;Xa=0;while(1){if(Ya>>>0>=Aa>>>0)break;c[(Ya>>>0<za>>>0?g+(Ya<<2)|0:h+(Ya-za<<2)|0)>>2]=0;Ua=Ya+1|0;Xa=Xa+1|0;if(Xa>>>0>=_a>>>0){Pa=xa;Qa=0;Ra=Za;Sa=Ua;break i}else Ya=Ua}c[o>>2]=4;c[M>>2]=422;Pa=4;Qa=4;Ra=Za;Sa=Ya;break i;break}default:{E=102;break h}}while(0);if(Sa>>>0<Aa>>>0){Ca=Qa;xa=Pa;wa=Ra;Ga=Sa}else{E=104;break}}if((E|0)==75){E=0;c[o>>2]=4;c[M>>2]=278;Oa=Ja;break g}else if((E|0)==78){E=0;c[o>>2]=4;c[M>>2]=291;Oa=Ma;break g}else if((E|0)==88){E=0;c[o>>2]=4;c[M>>2]=356;Oa=Ma;break g}else if((E|0)==94){E=0;c[o>>2]=4;c[M>>2]=386;Oa=Ma;break g}else if((E|0)==101){E=0;c[o>>2]=4;c[M>>2]=412;Oa=Ma;break g}else if((E|0)==102){E=0;c[o>>2]=4;c[M>>2]=433;Oa=Ma;break g}else if((E|0)==104){E=0;if(Pa|0){Oa=Ra;break g}if(!(c[N>>2]|0)){$a=Ra;break}yc(b,k,g);if(c[o>>2]|0){Oa=Ra;break g}yc(b,l,h);Oa=Ra;break g}}else $a=Fa;while(0);c[o>>2]=4;c[M>>2]=439;Oa=$a}else Oa=Fa}else{c[o>>2]=4;c[M>>2]=308;Oa=V}while(0);ea=i;fa=j;ga=Oa;break}default:{ea=0;fa=0;ga=V}}Z=ga&7;W=ga>>>3;j:do if((Z|0)==0&W>>>0>I>>>0){ab=278;bb=ga;cb=Q;E=143}else{Aa=Z;za=ga;ya=Q;ua=W;while(1){va=za;sa=Aa;ta=ua;qa=0;while(1){db=va+1|0;eb=c[ea+(((d[y+ta>>0]|0)>>>sa&1|qa<<1)<<2)>>2]|0;if(eb>>>0<288)break;qa=eb+-288|0;if(qa>>>0>=288){ab=291;bb=db;cb=ya;E=143;break j}sa=db&7;ta=db>>>3;if((sa|0)==0&ta>>>0>I>>>0){ab=278;bb=db;cb=ya;E=143;break j}else va=db}va=c[o>>2]|0;if((eb|0)==256|(va|0)!=0){fb=va;gb=db;hb=ya;break j}do if(eb>>>0<256){if(ya>>>0>=u>>>0){ab=489;bb=db;cb=ya;E=143;break j}a[L+ya>>0]=eb;ib=db;jb=ya+1|0}else{if(eb>>>0>=286){ib=db;jb=ya;break}va=eb+-257|0;ta=db>>>3;if(ta>>>0>=I>>>0){ab=506;bb=db;cb=ya;E=143;break j}sa=c[2656+(va<<2)>>2]|0;qa=c[2784+(va<<2)>>2]|0;if((eb+-265|0)>>>0>19){kb=db;lb=0;mb=ta}else{ta=db;va=0;ra=0;while(1){ra=((d[y+(ta>>>3)>>0]|0)>>>(ta&7)&1)<<va|ra;va=va+1|0;if((va|0)==(sa|0))break;else ta=ta+1|0}ta=sa+db|0;kb=ta;lb=ra;mb=ta>>>3}ta=lb+qa|0;va=kb&7;if((va|0)==0&mb>>>0>I>>>0){ab=278;bb=kb;cb=ya;E=143;break j}U=kb;na=va;va=mb;oa=0;while(1){nb=U+1|0;ob=c[fa+(((d[y+va>>0]|0)>>>na&1|oa<<1)<<2)>>2]|0;if(ob>>>0<32)break;oa=ob+-32|0;if(oa>>>0>=32){ab=291;bb=nb;cb=ya;E=143;break j}na=nb&7;va=nb>>>3;if((na|0)==0&va>>>0>I>>>0){ab=278;bb=nb;cb=ya;E=143;break j}else U=nb}if(ob>>>0>29){ab=519;bb=nb;cb=ya;E=143;break j}if(nb>>>3>>>0>=I>>>0){ab=530;bb=nb;cb=ya;E=143;break j}U=c[2912+(ob<<2)>>2]|0;va=c[3040+(ob<<2)>>2]|0;if(ob>>>0<4){pb=nb;qb=0}else{na=nb;oa=0;qa=0;while(1){qa=((d[y+(na>>>3)>>0]|0)>>>(na&7)&1)<<oa|qa;oa=oa+1|0;if((oa|0)==(U|0))break;else na=na+1|0}pb=U+nb|0;qb=qa}na=ya-va-qb|0;oa=ta+ya|0;if(oa>>>0>=u>>>0){ab=541;bb=pb;cb=ya;E=143;break j}if(!ta){ib=pb;jb=ya;break}ra=ya+1|0;a[L+ya>>0]=a[L+na>>0]|0;if((ta|0)==1){ib=pb;jb=ra;break}sa=ra;ra=na;pa=1;while(1){ma=ra+1|0;ra=ma>>>0<ya>>>0?ma:na;a[L+sa>>0]=a[L+ra>>0]|0;pa=pa+1|0;if((pa|0)==(ta|0)){ib=pb;jb=oa;break}else sa=sa+1|0}}while(0);Aa=ib&7;ua=ib>>>3;if((Aa|0)==0&ua>>>0>I>>>0){ab=278;bb=ib;cb=jb;E=143;break}else{za=ib;ya=jb}}}while(0);if((E|0)==143){E=0;c[o>>2]=4;c[M>>2]=ab;fb=4;gb=bb;hb=cb}ba=fb;ca=gb;da=hb}}if(ba|0)break e;if(!(1<<R&S)){P=ca;Q=da}else{E=147;break}}if((E|0)==44){c[o>>2]=4;c[M>>2]=616;break}else if((E|0)==46){c[o>>2]=4;c[M>>2]=626;break}else if((E|0)==51){c[o>>2]=4;c[M>>2]=570;break}else if((E|0)==53){c[o>>2]=4;c[M>>2]=581;break}else if((E|0)==55){c[o>>2]=4;c[M>>2]=586;break}else if((E|0)==57){c[o>>2]=4;c[M>>2]=592;break}else if((E|0)==147){Mg(x);Q=c[H>>2]|0;P=c[b>>2]|0;y=c[v>>2]|0;N=c[C>>2]|0;switch(N|0){case 0:{rb=1;break}case 2:{rb=3;break}case 4:{rb=2;break}case 6:{rb=4;break}default:rb=0}F=((q(q(q(P,Q)|0,y)|0,rb)|0)+7|0)>>>3;A=b+24|0;c[A>>2]=F;B=Lg(F)|0;c[s>>2]=B;if(!B){Mg(L);c[A>>2]=0;c[o>>2]=1;c[M>>2]=1094;r=1;Cb=e;return r|0}switch(N|0){case 0:{sb=1;break}case 2:{sb=3;break}case 4:{sb=2;break}case 6:{sb=4;break}default:sb=0}N=q(sb,y)|0;do if(N){if(N>>>0>=8){zc(b,B,L,P,Q,N);break}y=q(N,P)|0;F=y+7&-8;if((y|0)==(F|0)){zc(b,B,L,P,Q,N);break}zc(b,L,L,P,Q,N);if(!(c[o>>2]|0)){if((Q|0)==0|(y|0)==0)break;z=0;J=0;G=0;while(1){K=z;O=J;D=0;while(1){W=1<<(O&7^7);if(!(1<<(K&7^7)&d[L+(K>>>3)>>0])){Z=B+(O>>>3)|0;tb=(W^255)&d[Z>>0];ub=Z}else{Z=B+(O>>>3)|0;tb=W|d[Z>>0];ub=Z}a[ub>>0]=tb;D=D+1|0;if((D|0)==(y|0))break;else{K=K+1|0;O=O+1|0}}G=G+1|0;if((G|0)==(Q|0))break;else{z=z+F|0;J=J+y|0}}}}else{c[o>>2]=4;c[M>>2]=818}while(0);Mg(L);if(!(c[o>>2]|0))vb=p;else{Mg(c[s>>2]|0);c[s>>2]=0;vb=A}c[vb>>2]=0;M=b+48|0;if(a[M>>0]|0)Mg(c[t>>2]|0);c[t>>2]=0;c[w>>2]=0;a[M>>0]=0;r=c[o>>2]|0;Cb=e;return r|0}}else{c[o>>2]=4;c[b+32>>2]=647}while(0);Mg(x);Mg(L);r=c[o>>2]|0;Cb=e;return r|0}function yc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0;e=Cb;Cb=Cb+1280|0;f=e+128|0;g=e+64|0;h=e;i=g;j=i+60|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=h;j=i+64|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=b+8|0;j=c[i>>2]|0;if(!j)k=0;else{l=0;do{m=g+(c[d+(l<<2)>>2]<<2)|0;c[m>>2]=(c[m>>2]|0)+1;l=l+1|0}while(l>>>0<j>>>0);k=j}l=c[b+4>>2]|0;if(l|0){m=0;n=1;do{m=(c[g+(n+-1<<2)>>2]|0)+m<<1;c[h+(n<<2)>>2]=m;n=n+1|0}while(n>>>0<=l>>>0)}if(k|0){l=0;do{n=c[d+(l<<2)>>2]|0;m=h+(n<<2)|0;if(n|0){n=c[m>>2]|0;c[m>>2]=n+1;c[f+(l<<2)>>2]=n}l=l+1|0}while((l|0)!=(k|0))}if(!(j&2147483647))o=j;else{j=c[b>>2]|0;k=0;do{c[j+(k<<2)>>2]=32767;k=k+1|0;l=c[i>>2]|0}while(k>>>0<l<<1>>>0);o=l}if(!o){Cb=e;return}k=o;o=0;j=0;l=0;a:while(1){h=d+(o<<2)|0;n=c[h>>2]|0;b:do if(!n){p=k;q=j;r=l}else{if(l>>>0>(k+-2|0)>>>0){s=25;break a}m=c[f+(o<<2)>>2]|0;g=c[b>>2]|0;t=n;u=k;v=0;w=j;x=l;while(1){y=g+((m>>>(t+~v|0)&1|x<<1)<<2)|0;z=c[y>>2]|0;do if((z|0)==32767){A=v+1|0;if((A|0)==(t|0)){c[y>>2]=o;B=A;C=w;D=0;break}else{E=w+1|0;c[y>>2]=u+E;B=A;C=E;D=E;break}}else{B=v+1|0;C=w;D=z-u|0}while(0);t=c[h>>2]|0;u=c[i>>2]|0;if(t>>>0<=B>>>0){p=u;q=C;r=D;break b}if(D>>>0>(u+-2|0)>>>0){s=25;break a}else{v=B;w=C;x=D}}}while(0);o=o+1|0;if(o>>>0>=p>>>0)break;else{k=p;j=q;l=r}}if((s|0)==25){c[a+28>>2]=4;c[a+32>>2]=245;Cb=e;return}if(!(p&2147483647)){Cb=e;return}a=c[b>>2]|0;b=p;p=0;while(1){s=a+(p<<2)|0;if((c[s>>2]|0)==32767){c[s>>2]=0;F=c[i>>2]|0}else F=b;p=p+1|0;if(p>>>0>=F<<1>>>0)break;else b=F}Cb=e;return}function zc(b,e,f,g,h,i){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;var j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0;j=(i+7|0)>>>3;k=((q(i,g)|0)+7|0)>>>3;if(!h)return;g=k+1|0;i=b+28|0;l=b+32|0;b=(k|0)==0;m=(j|0)==0;n=(k|0)!=0;o=(j|0)!=0;p=j>>>0<k>>>0;r=0;s=0;do{t=q(s,k)|0;u=q(s,g)|0;v=r;r=e+t|0;t=f+(u+1)|0;a:do switch(a[f+u>>0]|0){case 0:{if(!b){w=0;do{a[r+w>>0]=a[t+w>>0]|0;w=w+1|0}while((w|0)!=(k|0))}break}case 1:{if(!m){w=0;do{a[r+w>>0]=a[t+w>>0]|0;w=w+1|0}while((w|0)!=(j|0))}if(p){w=j;do{a[r+w>>0]=(d[r+(w-j)>>0]|0)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(k|0))}break}case 2:{if(!v){if(!n)break a;w=0;do{a[r+w>>0]=a[t+w>>0]|0;w=w+1|0}while((w|0)!=(k|0))}else{if(!n)break a;w=0;do{a[r+w>>0]=(d[v+w>>0]|0)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(k|0))}break}case 3:{if(!v){if(o){w=0;do{a[r+w>>0]=a[t+w>>0]|0;w=w+1|0}while((w|0)!=(j|0))}if(!p)break a;w=j;do{a[r+w>>0]=((d[r+(w-j)>>0]|0)>>>1&255)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(k|0))}else{if(o){w=0;do{a[r+w>>0]=((d[v+w>>0]|0)>>>1&255)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(j|0))}if(!p)break a;w=j;do{a[r+w>>0]=(((d[v+w>>0]|0)+(d[r+(w-j)>>0]|0)|0)>>>1)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(k|0))}break}case 4:{if(!v){if(o){w=0;do{a[r+w>>0]=a[t+w>>0]|0;w=w+1|0}while((w|0)!=(j|0))}if(!p)break a;w=j;do{a[r+w>>0]=(d[r+(w-j)>>0]|0)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(k|0))}else{if(o){w=0;do{a[r+w>>0]=(d[v+w>>0]|0)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(j|0))}if(!p)break a;w=j;do{x=w-j|0;y=d[r+x>>0]|0;z=d[v+w>>0]|0;A=d[v+x>>0]|0;x=z+y-A|0;B=(x|0)>(y|0)?x-y|0:y-x|0;C=(x|0)>(z|0)?x-z|0:z-x|0;D=(x|0)>(A|0)?x-A|0:A-x|0;a[r+w>>0]=((B|0)>(C|0)|(B|0)>(D|0)?((C|0)>(D|0)?A:z):y)+(d[t+w>>0]|0);w=w+1|0}while((w|0)!=(k|0))}break}default:{c[i>>2]=4;c[l>>2]=748}}while(0);s=s+1|0}while((c[i>>2]|0)==0&s>>>0<h>>>0);return}function Ac(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;g=Lg(52)|0;if(!g){h=0;return h|0}c[g+20>>2]=0;c[g+24>>2]=0;c[g+4>>2]=0;c[g>>2]=0;c[g+8>>2]=6;c[g+12>>2]=8;c[g+16>>2]=3;c[g+36>>2]=2;i=g+28|0;c[i>>2]=0;j=g+32|0;c[j>>2]=0;k=g+40|0;c[k>>2]=0;l=g+44|0;c[l>>2]=0;m=g+48|0;a[m>>0]=0;n=Ub(b,5043,f,e+d|0)|0;if(!n){c[i>>2]=2;c[j>>2]=1175;h=g;return h|0}if(!e){Vb(n,0,2)|0;o=Wb(n)|0}else o=e;Vb(n,d,0)|0;d=Lg(o)|0;if(!d){Xb(n)|0;c[i>>2]=1;c[j>>2]=1193;h=g;return h|0}else{Yb(d,1,o,n)|0;Xb(n)|0;c[k>>2]=d;c[l>>2]=o;a[m>>0]=1;h=g;return h|0}return 0}function Bc(d,e,f,g){d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0;h=Cb;Cb=Cb+16|0;i=h;j=Ac(d,e,g,f)|0;f=c[j+28>>2]|0;if(f|0){g=c[j+32>>2]|0;c[i>>2]=d;c[i+4>>2]=f;c[i+8>>2]=g;me(5046,i)|0;k=0;Cb=h;return k|0}xc(j)|0;i=Lg(40)|0;g=i+32|0;c[g>>2]=0;c[i+36>>2]=0;b[i+2>>1]=c[j>>2];b[i+4>>1]=c[j+4>>2];switch(c[j+8>>2]|0){case 0:{l=32;break}case 2:{l=4;break}case 4:{l=33;break}case 6:{l=1;break}default:l=0}a[i+1>>0]=l;pc(i);c[g>>2]=c[j+20>>2];if(a[j+48>>0]|0)Mg(c[j+40>>2]|0);Mg(j);Wc(i);k=i;Cb=h;return k|0}function Cc(b){b=b|0;var d=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;d=Cb;Cb=Cb+32|0;f=d;a[b>>0]=0;g=b+1|0;a[g>>0]=0;h=b+2|0;a[h>>0]=0;i=0;do{j=b+12+i|0;switch(a[j>>0]|0){case 1:{k=2;l=4;break}case 3:{k=0;l=4;break}default:{}}if((l|0)==4){l=0;a[j>>0]=k}i=i+1|0}while((i|0)!=410);a:do if((C(f|0)|0)==1){i=f+4|0;k=b+4|0;l=f+6|0;j=b+8|0;m=f+2|0;n=f+8|0;while(1){b:do switch(a[f>>0]|0){case 4:{c[k>>2]=e[i>>1];c[j>>2]=e[l>>1];break}case 12:{a[h>>0]=1;break}case 5:{switch(a[m>>0]|0){case 3:{a[b>>0]=1;break b;break}case 1:{a[g>>0]=1;break b;break}default:break b}break}case 6:{switch(a[m>>0]|0){case 3:{a[b>>0]=2;break b;break}case 1:{a[g>>0]=2;break b;break}default:break b}break}case 2:{a[(c[n>>2]|0)+(b+12)>>0]=1;break}case 3:{a[(c[n>>2]|0)+(b+12)>>0]=3;break}default:{}}while(0);if((C(f|0)|0)!=1)break a}}while(0);a[b+26>>0]=a[b+116>>0]|0;a[b+27>>0]=a[b+118>>0]|0;a[b+12>>0]=a[b+127>>0]|0;a[b+13>>0]=a[b+112>>0]|0;a[b+14>>0]=a[b+114>>0]|0;a[b+15>>0]=a[b+115>>0]|0;a[b+22>>0]=a[b+285>>0]|0;a[b+23>>0]=a[b+286>>0]|0;a[b+25>>0]=a[b+287>>0]|0;a[b+24>>0]=a[b+288>>0]|0;a[b+16>>0]=a[b+132>>0]|0;a[b+19>>0]=a[b+111>>0]|0;a[b+17>>0]=a[b+130>>0]|0;a[b+20>>0]=a[b+110>>0]|0;a[b+18>>0]=a[b+113>>0]|0;a[b+21>>0]=a[b+126>>0]|0;Cb=d;return}function Dc(){y(544)|0;E(0)|0;z(1)|0;c[2008]=A(0)|0;return}function Ec(a,b){a=a|0;b=b|0;F(b|0,0);D(640,480,24,2)|0;Mc();return}function Fc(){var a=0,b=0;a=x()|0;b=a-(c[2009]|0)|0;a=(b|0)>0?b:0;if((a|0)<=16)v(17-a|0);c[2009]=x()|0;return a|0}function Gc(a){a=a|0;var b=0,d=0,e=0,g=0,h=0,i=0,j=0;b=Cb;Cb=Cb+112|0;d=b+88|0;e=b+76|0;g=b+64|0;h=b;Qc(6928,+f[a+48>>2],+f[a+52>>2],+f[a+56>>2],+f[a+60>>2]);i=a+12|0;j=a+24|0;c[g>>2]=c[a>>2];c[g+4>>2]=c[a+4>>2];c[g+8>>2]=c[a+8>>2];c[e>>2]=c[i>>2];c[e+4>>2]=c[i+4>>2];c[e+8>>2]=c[i+8>>2];c[d>>2]=c[j>>2];c[d+4>>2]=c[j+4>>2];c[d+8>>2]=c[j+8>>2];hc(h,g,e,d);Pc(6928,h,6928);Ka(2929);Wa(5889);Va(6928);Wa(5888);Cb=b;return}function Hc(){var a=0,b=0,d=0;a=Cb;Cb=Cb+64|0;b=a;Fa(2929);Wa(5889);f[b>>2]=1.0;d=b+4|0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;f[b+20>>2]=1.0;d=b+24|0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;f[b+40>>2]=1.0;d=b+44|0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;f[b+60>>2]=1.0;Va(b|0);Wa(5888);Va(b|0);Cb=a;return}function Ic(){za(16640);return}function Jc(a){a=a|0;w();return}function Kc(b,c,d){b=b|0;c=c|0;d=d|0;var e=0,g=0,h=0,i=0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0,p=0.0,q=0.0,r=0.0,s=0,t=0.0,u=0.0,v=0,w=0,x=0.0,y=0.0,z=0.0,A=0,B=0.0,C=0,D=0.0,E=0,F=0,G=0,H=0;e=Cb;Cb=Cb+64e3|0;g=e+32e3|0;h=e;i=(0|0)==0;j=i?.004166666883975267:.008333333767950535;k=i?3.1250000465661287e-03:6.2500000931322575e-03;l=+((i?b:~~(+(b|0)*2.0))|0);m=k*16.0;n=j*16.0;b=0;o=0;p=+((i?c:~~(+(c|0)*2.0))|0);a:while(1){q=1.0-j*p;r=q-n;c=b;s=o;t=l;b:while(1){i=c;u=t;c:while(1){v=i+1|0;w=a[d+i>>0]|0;switch(w<<24>>24){case 10:{break b;break}case 32:break;default:break c}i=v;u=u+16.0}i=w<<24>>24;if((s|0)>7999|w<<24>>24==0)break a;x=k*u+-1.0;y=+(i<<4&240|0)*.00390625;z=+(i&240|0)*.00390625;f[h+(s<<2)>>2]=y;i=s+1|0;f[h+(i<<2)>>2]=z;A=s+2|0;f[h+(A<<2)>>2]=y;B=z+.0625;C=s+3|0;f[h+(C<<2)>>2]=B;D=y+.0625;E=s+4|0;f[h+(E<<2)>>2]=D;F=s+5|0;f[h+(F<<2)>>2]=B;G=s+6|0;f[h+(G<<2)>>2]=D;H=s+7|0;f[h+(H<<2)>>2]=z;f[g+(s<<2)>>2]=x;f[g+(i<<2)>>2]=q;f[g+(A<<2)>>2]=x;f[g+(C<<2)>>2]=r;z=m+x;f[g+(E<<2)>>2]=z;f[g+(F<<2)>>2]=r;f[g+(G<<2)>>2]=z;f[g+(H<<2)>>2]=q;c=v;s=s+8|0;t=u+16.0}b=v;o=s;p=p+16.0}La(32884);La(32888);cb(2,5126,0,g|0);Za(2,5126,0,h|0);Ia(7,0,s>>1|0);Ga(32888);Ga(32884);Cb=e;return}function Lc(a,b){a=a|0;b=b|0;var d=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0;d=Cb;Cb=Cb+128|0;g=d+64|0;h=d;La(32884);La(32888);cb(2,5126,0,g|0);Za(2,5126,0,h|0);if((b|0)<=0){Ga(32888);Ga(32884);Cb=d;return}i=h+4|0;j=h+8|0;k=h+12|0;l=h+16|0;m=h+20|0;n=h+24|0;o=h+28|0;p=g+4|0;q=g+8|0;r=g+12|0;s=g+16|0;t=g+20|0;u=g+24|0;v=g+28|0;w=0;do{x=a+(w*36|0)+28|0;y=c[x>>2]|0;z=y&127;c[x>>2]=z;if((y&4|0)==0?(A=0,B=c[a+(w*36|0)+4>>2]<<A,C=c[a+(w*36|0)+8>>2]<<A,D=c[a+(w*36|0)+12>>2]<<A,E=c[a+(w*36|0)+16>>2]<<A,F=c[a+(w*36|0)+20>>2]<<A,G=c[a+(w*36|0)+24>>2]<<A,!((C+F|0)<1|((B|0)>639|(C|0)>479|(B+G|0)<1))):0){c[x>>2]=z|128;H=+(B|0)*3.1250000465661287e-03+-1.0;I=1.0-+(C|0)*.004166666883975267;J=+(G|0);K=+(F|0);F=c[a+(w*36|0)>>2]|0;if(!F){L=0.0;M=0.0}else{ya(3553,c[F+20>>2]|0);L=1.0/+(e[F+4>>1]|0);M=1.0/+(e[F+2>>1]|0)}F=0==0;N=F?M:M*.5;O=F?L:L*.5;P=N*+(D|0);Q=O*+(E|0);f[h>>2]=P;f[i>>2]=Q;f[j>>2]=P;R=Q+O*K;f[k>>2]=R;O=P+N*J;f[l>>2]=O;f[m>>2]=R;f[n>>2]=O;f[o>>2]=Q;Q=J*3.1250000465661287e-03;J=K*.004166666883975267;K=(y&1|0)==0?0.0:Q;O=(y&2|0)==0?0.0:J;R=H+K;f[g>>2]=R;N=I-O;f[p>>2]=N;f[q>>2]=R;R=O+(I-J);f[r>>2]=R;J=Q+H-K;f[s>>2]=J;f[t>>2]=R;f[u>>2]=J;f[v>>2]=N;Ia(7,0,4)}w=w+1|0}while((w|0)!=(b|0));Ga(32888);Ga(32884);Cb=d;return}function Mc(){Aa(.5,.5,.5,0.0);Ka(3553);Ka(3008);ua(514,1.0);return}function Nc(a){a=a|0;return}function Oc(){return 0}function Pc(a,b,c){a=a|0;b=b|0;c=c|0;var d=0,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0.0,u=0.0,v=0.0,w=0.0;d=b+4|0;e=b+8|0;g=b+12|0;h=b+16|0;i=b+20|0;j=b+24|0;k=b+28|0;l=b+32|0;m=b+36|0;n=b+40|0;o=b+44|0;p=b+48|0;q=b+52|0;r=b+56|0;s=b+60|0;t=+f[c>>2];u=+f[c+16>>2];v=+f[c+32>>2];w=+f[c+48>>2];f[a>>2]=t*+f[b>>2]+u*+f[d>>2]+v*+f[e>>2]+w*+f[g>>2];f[a+16>>2]=t*+f[h>>2]+u*+f[i>>2]+v*+f[j>>2]+w*+f[k>>2];f[a+32>>2]=t*+f[l>>2]+u*+f[m>>2]+v*+f[n>>2]+w*+f[o>>2];f[a+48>>2]=t*+f[p>>2]+u*+f[q>>2]+v*+f[r>>2]+w*+f[s>>2];w=+f[c+4>>2];v=+f[c+20>>2];u=+f[c+36>>2];t=+f[c+52>>2];f[a+4>>2]=w*+f[b>>2]+v*+f[d>>2]+u*+f[e>>2]+t*+f[g>>2];f[a+20>>2]=w*+f[h>>2]+v*+f[i>>2]+u*+f[j>>2]+t*+f[k>>2];f[a+36>>2]=w*+f[l>>2]+v*+f[m>>2]+u*+f[n>>2]+t*+f[o>>2];f[a+52>>2]=w*+f[p>>2]+v*+f[q>>2]+u*+f[r>>2]+t*+f[s>>2];t=+f[c+8>>2];u=+f[c+24>>2];v=+f[c+40>>2];w=+f[c+56>>2];f[a+8>>2]=t*+f[b>>2]+u*+f[d>>2]+v*+f[e>>2]+w*+f[g>>2];f[a+24>>2]=t*+f[h>>2]+u*+f[i>>2]+v*+f[j>>2]+w*+f[k>>2];f[a+40>>2]=t*+f[l>>2]+u*+f[m>>2]+v*+f[n>>2]+w*+f[o>>2];f[a+56>>2]=t*+f[p>>2]+u*+f[q>>2]+v*+f[r>>2]+w*+f[s>>2];w=+f[c+12>>2];v=+f[c+28>>2];u=+f[c+44>>2];t=+f[c+60>>2];f[a+12>>2]=w*+f[b>>2]+v*+f[d>>2]+u*+f[e>>2]+t*+f[g>>2];f[a+28>>2]=w*+f[h>>2]+v*+f[i>>2]+u*+f[j>>2]+t*+f[k>>2];f[a+44>>2]=w*+f[l>>2]+v*+f[m>>2]+u*+f[n>>2]+t*+f[o>>2];f[a+60>>2]=w*+f[p>>2]+v*+f[q>>2]+u*+f[r>>2]+t*+f[s>>2];return}function Qc(a,b,d,e,g){a=a|0;b=+b;d=+d;e=+e;g=+g;var h=0;d=g-e;f[a>>2]=2.25;h=a+4|0;c[h>>2]=0;c[h+4>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;f[a+20>>2]=3.75;h=a+24|0;c[h>>2]=0;c[h+4>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;f[a+40>>2]=-(e+g)/d;f[a+44>>2]=-1.0;f[a+48>>2]=0.0;f[a+52>>2]=0.0;f[a+56>>2]=-(e*2.0*g)/d;f[a+60>>2]=0.0;return}function Rc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;b=Cb;Cb=Cb+64|0;d=b;Ka(2884);dc(a,d);Va(d|0);d=c[a>>2]|0;e=a+272|0;f=((c[e>>2]|0)>>>4&2)+5123|0;La(32884);cb(3,5126,0,d|0);d=c[e>>2]|0;if(!(d&2))g=d;else{La(32888);Za(2,5126,0,c[a+4>>2]|0);g=c[e>>2]|0}if(!(g&4))h=g;else{La(32885);Xa(5126,0,c[a+8>>2]|0);h=c[e>>2]|0}if(!(h&4096)){g=a+60|0;d=c[g>>2]|0;if(d){if((d|0)>0){d=a+56|0;i=a+52|0;j=a+20|0;k=a+28|0;l=0;do{ya(3553,c[(c[(c[d>>2]|0)+(l<<2)>>2]|0)+20>>2]|0);m=c[i>>2]|0;n=c[m+(l<<2)>>2]|0;l=l+1|0;if((l|0)<(c[g>>2]|0))o=c[m+(l<<2)>>2]|0;else o=(c[j>>2]|0)*3|0;m=o-n|0;if(!(c[e>>2]&8))Ia(4,n|0,m|0);else Ja(4,m|0,f|0,(c[k>>2]|0)+(n<<1)|0)}while((l|0)<(c[g>>2]|0))}}else{p=h;q=8}}else{ya(3553,0);p=c[e>>2]|0;q=8}do if((q|0)==8){h=(c[a+20>>2]|0)*3|0;if(!(p&8)){Ia(4,0,h|0);break}else{Ja(4,h|0,f|0,c[a+28>>2]|0);break}}while(0);a=c[e>>2]|0;if(!(a&4))r=a;else{Ga(32885);r=c[e>>2]|0}if(!(r&2)){Ga(32884);Fa(2884);Cb=b;return}Ga(32888);Ga(32884);Fa(2884);Cb=b;return}function Sc(a){a=a|0;var b=0;if(!a)return;b=a+20|0;Na(1,b|0);ya(3553,c[b>>2]|0);_a(3553,0,e[a+10>>1]|0|0,e[a+2>>1]|0|0,e[a+4>>1]|0|0,0,c[a+28>>2]|0,e[a+12>>1]|0|0,c[a+32>>2]|0);$a(3553,10240,9728);$a(3553,10241,9728);return}function Tc(a){a=a|0;if(!a)return;ya(3553,c[a+20>>2]|0);return}function Uc(a){a=a|0;return}function Vc(a){a=a|0;var d=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;d=c[a+16>>2]|0;c[a+276>>2]=((c[a+20>>2]|0)*6|0)+(d*20|0);g=a+272|0;if(!(c[g>>2]&64))return;h=c[a>>2]|0;i=Lg(d*12|0)|0;j=a+4|0;k=c[j>>2]|0;l=Lg(d<<3)|0;if(!d)if(!k)m=h;else n=6;else{o=0;p=0;q=0;while(1){f[l+(p<<2)>>2]=+(e[k+(p<<1)>>1]|0)*.000030517578125;r=p|1;f[l+(r<<2)>>2]=+(e[k+(r<<1)>>1]|0)*.000030517578125;f[i+(q<<2)>>2]=+(b[h+(q<<1)>>1]|0)*.0625;r=q+1|0;f[i+(r<<2)>>2]=+(b[h+(r<<1)>>1]|0)*.0625;r=q+2|0;f[i+(r<<2)>>2]=+(b[h+(r<<1)>>1]|0)*.0625;o=o+1|0;if((o|0)==(d|0)){n=6;break}else{p=p+2|0;q=q+3|0}}}if((n|0)==6){Mg(k);m=c[a>>2]|0}if(m|0)Mg(m);c[j>>2]=l;c[a>>2]=i;c[g>>2]=c[g>>2]^64;return}function Wc(d){d=d|0;var e=0,f=0,g=0;switch(a[d+1>>0]|0){case 16:case 32:{e=5121;f=6409;g=1;break}case 33:{e=5121;f=6410;g=1;break}case 4:{e=5121;f=6407;g=3;break}case 1:{e=5121;f=6408;g=4;break}case 7:{e=-31898;f=6407;g=3;break}case 2:{e=-31898;f=6408;g=4;break}default:return}b[d+10>>1]=g;c[d+28>>2]=f;b[d+12>>1]=e;return}function Xc(b){b=b|0;switch(a[b+1>>0]|0){case 16:{oc(b,2)|0;return}case 1:{oc(b,2)|0;return}default:return}}function Yc(a,b){a=a|0;b=b|0;Pd(b,a)|0;return}function Zc(a){a=a|0;return (M(cd(c[a+60>>2]|0)|0)|0)&65535|0}function _c(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;e=Cb;Cb=Cb+32|0;f=e;g=e+16|0;h=a+28|0;i=c[h>>2]|0;c[f>>2]=i;j=a+20|0;k=(c[j>>2]|0)-i|0;c[f+4>>2]=k;c[f+8>>2]=b;c[f+12>>2]=d;b=a+60|0;i=f;f=2;l=k+d|0;while(1){if(!(ad(P(c[b>>2]|0,i|0,f|0,g|0)|0)|0))m=c[g>>2]|0;else{c[g>>2]=-1;m=-1}if((l|0)==(m|0)){n=6;break}if((m|0)<0){n=8;break}k=c[i+4>>2]|0;o=m>>>0>k>>>0;p=o?i+8|0:i;q=m-(o?k:0)|0;c[p>>2]=(c[p>>2]|0)+q;k=p+4|0;c[k>>2]=(c[k>>2]|0)-q;i=p;f=f+(o<<31>>31)|0;l=l-m|0}if((n|0)==6){m=c[a+44>>2]|0;c[a+16>>2]=m+(c[a+48>>2]|0);l=m;c[h>>2]=l;c[j>>2]=l;r=d}else if((n|0)==8){c[a+16>>2]=0;c[h>>2]=0;c[j>>2]=0;c[a>>2]=c[a>>2]|32;if((f|0)==2)r=0;else r=d-(c[i+4>>2]|0)|0}Cb=e;return r|0}function $c(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=Cb;Cb=Cb+16|0;g=f;if(!(ad(O(c[a+60>>2]|0,b|0,d|0,e&255|0,g|0)|0)|0)){e=g;h=c[e+4>>2]|0;i=c[e>>2]|0}else{e=g;c[e>>2]=-1;c[e+4>>2]=-1;h=-1;i=-1}t(h|0);Cb=f;return i|0}function ad(a){a=a|0;var b=0;if(!(a<<16>>16))b=0;else{c[(bd()|0)>>2]=a&65535;b=-1}return b|0}function bd(){return 8104}function cd(a){a=a|0;return a|0}function dd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;f=Cb;Cb=Cb+32|0;g=f;h=f+16|0;c[g>>2]=d;i=g+4|0;j=b+48|0;k=c[j>>2]|0;c[i>>2]=e-((k|0)!=0&1);l=b+44|0;c[g+8>>2]=c[l>>2];c[g+12>>2]=k;if(!(ad(N(c[b+60>>2]|0,g|0,2,h|0)|0)|0)){g=c[h>>2]|0;if((g|0)>=1){k=c[i>>2]|0;if(g>>>0>k>>>0){i=c[l>>2]|0;l=b+4|0;c[l>>2]=i;m=i;c[b+8>>2]=m+(g-k);if(!(c[j>>2]|0))n=e;else{c[l>>2]=m+1;a[d+(e+-1)>>0]=a[m>>0]|0;n=e}}else n=g}else{o=g;p=4}}else{c[h>>2]=-1;o=-1;p=4}if((p|0)==4){c[b>>2]=o&48^16|c[b>>2];n=o}Cb=f;return n|0}function ed(a){a=a|0;return 0}function fd(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;t(0);return 0}function gd(b){b=b|0;var d=0,e=0,f=0;d=b+74|0;e=a[d>>0]|0;a[d>>0]=e+255|e;e=b+20|0;d=b+28|0;if((c[e>>2]|0)>>>0>(c[d>>2]|0)>>>0)Hb[c[b+36>>2]&7](b,0,0)|0;c[b+16>>2]=0;c[d>>2]=0;c[e>>2]=0;e=c[b>>2]|0;if(!(e&4)){d=(c[b+44>>2]|0)+(c[b+48>>2]|0)|0;c[b+8>>2]=d;c[b+4>>2]=d;f=e<<27>>31}else{c[b>>2]=e|32;f=-1}return f|0}function hd(b,c){b=b|0;c=c|0;var d=0,e=0,f=0,g=0;d=a[b>>0]|0;e=a[c>>0]|0;if(d<<24>>24==0?1:d<<24>>24!=e<<24>>24){f=e;g=d}else{d=b;b=c;do{d=d+1|0;b=b+1|0;c=a[d>>0]|0;e=a[b>>0]|0}while(!(c<<24>>24==0?1:c<<24>>24!=e<<24>>24));f=e;g=c}return (g&255)-(f&255)|0}function id(b,c,e){b=b|0;c=c|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;if(!e)f=0;else{g=a[b>>0]|0;a:do if(!(g<<24>>24)){h=0;i=c}else{j=g;k=b;l=e;m=c;while(1){l=l+-1|0;n=a[m>>0]|0;if(!(j<<24>>24==n<<24>>24&((l|0)!=0&n<<24>>24!=0))){h=j;i=m;break a}k=k+1|0;n=m+1|0;j=a[k>>0]|0;if(!(j<<24>>24)){h=0;i=n;break}else m=n}}while(0);f=(h&255)-(d[i>>0]|0)|0}return f|0}function jd(a){a=a|0;return (a+-48|0)>>>0<10|0}function kd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=Cb;Cb=Cb+16|0;f=e;c[f>>2]=d;d=ld(a,b,f)|0;Cb=e;return d|0}function ld(a,b,c){a=a|0;b=b|0;c=c|0;return md(a,2147483647,b,c)|0}function md(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0;g=Cb;Cb=Cb+160|0;h=g+144|0;i=g;Yg(i|0,3792,144)|0;if((d+-1|0)>>>0>2147483646)if(!d){j=1;k=h;l=4}else{c[(bd()|0)>>2]=61;m=-1}else{j=d;k=b;l=4}if((l|0)==4){l=-2-k|0;b=j>>>0>l>>>0?l:j;c[i+48>>2]=b;j=i+20|0;c[j>>2]=k;c[i+44>>2]=k;l=k+b|0;k=i+16|0;c[k>>2]=l;c[i+28>>2]=l;l=nd(i,e,f)|0;if(!b)m=l;else{b=c[j>>2]|0;a[b+(((b|0)==(c[k>>2]|0))<<31>>31)>>0]=0;m=l}}Cb=g;return m|0}function nd(a,b,c){a=a|0;b=b|0;c=c|0;return qd(a,b,c,1,1)|0}function od(b,e,f,g,h,i){b=b|0;e=+e;f=f|0;g=g|0;h=h|0;i=i|0;var j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0.0,v=0,w=0,x=0,y=0,z=0,A=0.0,B=0,C=0,D=0,E=0,F=0.0,G=0,H=0,I=0,J=0.0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0.0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0.0,ia=0.0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0;j=Cb;Cb=Cb+560|0;k=j+32|0;l=j+536|0;m=j;n=m;o=j+540|0;c[l>>2]=0;p=o+12|0;r=Id(e)|0;s=u()|0;if((s|0)<0){t=-e;v=Id(t)|0;w=u()|0;x=v;y=1;z=5080;A=t}else{w=s;x=r;y=(h&2049|0)!=0&1;z=(h&2048|0)==0?((h&1|0)==0?5081:5086):5083;A=e}do if(0==0&(w&2146435072|0)==2146435072){r=(i&32|0)!=0;x=y+3|0;Bd(b,32,f,x,h&-65537);ud(b,z,y);ud(b,A!=A|0.0!=0.0?(r?5107:5111):r?5099:5103,3);Bd(b,32,f,x,h^8192);B=x}else{e=+Jd(A,l)*2.0;x=e!=0.0;if(x)c[l>>2]=(c[l>>2]|0)+-1;r=i|32;if((r|0)==97){s=i&32;v=(s|0)==0?z:z+9|0;C=y|2;D=12-g|0;do if(!(g>>>0>11|(D|0)==0)){E=D;t=8.0;do{E=E+-1|0;t=t*16.0}while((E|0)!=0);if((a[v>>0]|0)==45){F=-(t+(-e-t));break}else{F=e+t-t;break}}else F=e;while(0);D=c[l>>2]|0;E=(D|0)<0?0-D|0:D;G=zd(E,((E|0)<0)<<31>>31,p)|0;if((G|0)==(p|0)){E=o+11|0;a[E>>0]=48;H=E}else H=G;a[H+-1>>0]=(D>>31&2)+43;D=H+-2|0;a[D>>0]=i+15;G=(g|0)<1;E=(h&8|0)==0;I=m;J=F;while(1){K=~~J;L=I+1|0;a[I>>0]=s|d[3632+K>>0];J=(J-+(K|0))*16.0;if((L-n|0)==1?!(E&(G&J==0.0)):0){a[L>>0]=46;M=I+2|0}else M=L;if(!(J!=0.0))break;else I=M}I=M;if((g|0)!=0?(-2-n+I|0)<(g|0):0){G=p;E=D;N=g+2+G-E|0;O=G;P=E}else{E=p;G=D;N=E-n-G+I|0;O=E;P=G}G=N+C|0;Bd(b,32,f,G,h);ud(b,v,C);Bd(b,48,f,G,h^65536);E=I-n|0;ud(b,m,E);I=O-P|0;Bd(b,48,N-(E+I)|0,0,0);ud(b,D,I);Bd(b,32,f,G,h^8192);B=G;break}G=(g|0)<0?6:g;if(x){I=(c[l>>2]|0)+-28|0;c[l>>2]=I;Q=I;R=e*268435456.0}else{Q=c[l>>2]|0;R=e}I=(Q|0)<0?k:k+288|0;J=R;E=I;do{s=~~J>>>0;c[E>>2]=s;E=E+4|0;J=(J-+(s>>>0))*1.0e9}while(J!=0.0);x=I;if((Q|0)>0){D=Q;C=I;v=E;while(1){s=(D|0)<29?D:29;L=v+-4|0;if(L>>>0>=C>>>0){K=0;S=L;do{L=Wg(c[S>>2]|0,0,s|0)|0;T=Qg(L|0,u()|0,K|0,0)|0;L=u()|0;K=Ug(T|0,L|0,1e9,0)|0;U=Pg(K|0,u()|0,1e9,0)|0;V=Rg(T|0,L|0,U|0,u()|0)|0;u()|0;c[S>>2]=V;S=S+-4|0}while(S>>>0>=C>>>0);if(K){S=C+-4|0;c[S>>2]=K;W=S}else W=C}else W=C;a:do if(v>>>0>W>>>0){S=v;while(1){V=S+-4|0;if(c[V>>2]|0){X=S;break a}if(V>>>0>W>>>0)S=V;else{X=V;break}}}else X=v;while(0);K=(c[l>>2]|0)-s|0;c[l>>2]=K;if((K|0)>0){D=K;C=W;v=X}else{Y=K;Z=W;_=X;break}}}else{Y=Q;Z=I;_=E}if((Y|0)<0){v=((G+25|0)/9|0)+1|0;C=(r|0)==102;D=Y;K=Z;S=_;while(1){V=0-D|0;U=(V|0)<9?V:9;if(K>>>0<S>>>0){V=(1<<U)+-1|0;L=1e9>>>U;T=0;$=K;do{aa=c[$>>2]|0;c[$>>2]=(aa>>>U)+T;T=q(aa&V,L)|0;$=$+4|0}while($>>>0<S>>>0);$=(c[K>>2]|0)==0?K+4|0:K;if(!T){ba=$;ca=S}else{c[S>>2]=T;ba=$;ca=S+4|0}}else{ba=(c[K>>2]|0)==0?K+4|0:K;ca=S}$=C?I:ba;L=(ca-$>>2|0)>(v|0)?$+(v<<2)|0:ca;D=(c[l>>2]|0)+U|0;c[l>>2]=D;if((D|0)>=0){da=ba;ea=L;break}else{K=ba;S=L}}}else{da=Z;ea=_}if(da>>>0<ea>>>0){S=(x-da>>2)*9|0;K=c[da>>2]|0;if(K>>>0<10)fa=S;else{D=S;S=10;while(1){S=S*10|0;v=D+1|0;if(K>>>0<S>>>0){fa=v;break}else D=v}}}else fa=0;D=(r|0)==103;S=(G|0)!=0;K=G-((r|0)==102?0:fa)+((S&D)<<31>>31)|0;if((K|0)<(((ea-x>>2)*9|0)+-9|0)){v=K+9216|0;K=(v|0)/9|0;C=I+4+(K+-1024<<2)|0;E=v-(K*9|0)|0;if((E|0)<8){K=10;v=E;while(1){E=K*10|0;if((v|0)<7){K=E;v=v+1|0}else{ga=E;break}}}else ga=10;v=c[C>>2]|0;K=(v>>>0)/(ga>>>0)|0;r=v-(q(K,ga)|0)|0;E=(C+4|0)==(ea|0);if(!(E&(r|0)==0)){t=(K&1|0)==0?9007199254740992.0:9007199254740994.0;K=ga>>>1;J=r>>>0<K>>>0?.5:E&(r|0)==(K|0)?1.0:1.5;if(!y){ha=t;ia=J}else{K=(a[z>>0]|0)==45;ha=K?-t:t;ia=K?-J:J}K=v-r|0;c[C>>2]=K;if(ha+ia!=ha){r=K+ga|0;c[C>>2]=r;if(r>>>0>999999999){r=da;K=C;while(1){v=K+-4|0;c[K>>2]=0;if(v>>>0<r>>>0){E=r+-4|0;c[E>>2]=0;ja=E}else ja=r;E=(c[v>>2]|0)+1|0;c[v>>2]=E;if(E>>>0>999999999){r=ja;K=v}else{ka=ja;la=v;break}}}else{ka=da;la=C}K=(x-ka>>2)*9|0;r=c[ka>>2]|0;if(r>>>0<10){ma=ka;na=la;oa=K}else{v=K;K=10;while(1){K=K*10|0;E=v+1|0;if(r>>>0<K>>>0){ma=ka;na=la;oa=E;break}else v=E}}}else{ma=da;na=C;oa=fa}}else{ma=da;na=C;oa=fa}v=na+4|0;pa=ma;qa=oa;ra=ea>>>0>v>>>0?v:ea}else{pa=da;qa=fa;ra=ea}v=0-qa|0;b:do if(ra>>>0>pa>>>0){K=ra;while(1){r=K+-4|0;if(c[r>>2]|0){sa=1;ta=K;break b}if(r>>>0>pa>>>0)K=r;else{sa=0;ta=r;break}}}else{sa=0;ta=ra}while(0);do if(D){C=G+((S^1)&1)|0;if((C|0)>(qa|0)&(qa|0)>-5){ua=C+-1-qa|0;va=i+-1|0}else{ua=C+-1|0;va=i+-2|0}if(!(h&8)){if(sa?(C=c[ta+-4>>2]|0,(C|0)!=0):0)if(!((C>>>0)%10|0)){K=10;U=0;while(1){K=K*10|0;T=U+1|0;if((C>>>0)%(K>>>0)|0|0){wa=T;break}else U=T}}else wa=0;else wa=9;U=((ta-x>>2)*9|0)+-9|0;if((va|32|0)==102){K=U-wa|0;C=(K|0)>0?K:0;xa=(ua|0)<(C|0)?ua:C;ya=va;break}else{C=U+qa-wa|0;U=(C|0)>0?C:0;xa=(ua|0)<(U|0)?ua:U;ya=va;break}}else{xa=ua;ya=va}}else{xa=G;ya=i}while(0);G=(xa|0)!=0;x=G?1:h>>>3&1;S=(ya|32|0)==102;if(S){za=0;Aa=(qa|0)>0?qa:0}else{D=(qa|0)<0?v:qa;U=zd(D,((D|0)<0)<<31>>31,p)|0;D=p;if((D-U|0)<2){C=U;while(1){K=C+-1|0;a[K>>0]=48;if((D-K|0)<2)C=K;else{Ba=K;break}}}else Ba=U;a[Ba+-1>>0]=(qa>>31&2)+43;C=Ba+-2|0;a[C>>0]=ya;za=C;Aa=D-C|0}C=y+1+xa+x+Aa|0;Bd(b,32,f,C,h);ud(b,z,y);Bd(b,48,f,C,h^65536);if(S){v=pa>>>0>I>>>0?I:pa;K=m+9|0;T=K;r=m+8|0;E=v;do{L=zd(c[E>>2]|0,0,K)|0;if((E|0)==(v|0))if((L|0)==(K|0)){a[r>>0]=48;Ca=r}else Ca=L;else if(L>>>0>m>>>0){Zg(m|0,48,L-n|0)|0;$=L;while(1){V=$+-1|0;if(V>>>0>m>>>0)$=V;else{Ca=V;break}}}else Ca=L;ud(b,Ca,T-Ca|0);E=E+4|0}while(E>>>0<=I>>>0);if(!((h&8|0)==0&(G^1)))ud(b,5115,1);if(E>>>0<ta>>>0&(xa|0)>0){I=E;T=xa;while(1){r=zd(c[I>>2]|0,0,K)|0;if(r>>>0>m>>>0){Zg(m|0,48,r-n|0)|0;v=r;while(1){S=v+-1|0;if(S>>>0>m>>>0)v=S;else{Da=S;break}}}else Da=r;ud(b,Da,(T|0)<9?T:9);I=I+4|0;v=T+-9|0;if(!(I>>>0<ta>>>0&(T|0)>9)){Ea=v;break}else T=v}}else Ea=xa;Bd(b,48,Ea+9|0,9,0)}else{T=sa?ta:pa+4|0;if(pa>>>0<T>>>0&(xa|0)>-1){I=m+9|0;K=(h&8|0)==0;E=I;G=0-n|0;v=m+8|0;L=pa;S=xa;while(1){x=zd(c[L>>2]|0,0,I)|0;if((x|0)==(I|0)){a[v>>0]=48;Fa=v}else Fa=x;do if((L|0)==(pa|0)){x=Fa+1|0;ud(b,Fa,1);if(K&(S|0)<1){Ga=x;break}ud(b,5115,1);Ga=x}else{if(Fa>>>0<=m>>>0){Ga=Fa;break}Zg(m|0,48,Fa+G|0)|0;x=Fa;while(1){D=x+-1|0;if(D>>>0>m>>>0)x=D;else{Ga=D;break}}}while(0);r=E-Ga|0;ud(b,Ga,(S|0)>(r|0)?r:S);x=S-r|0;L=L+4|0;if(!(L>>>0<T>>>0&(x|0)>-1)){Ha=x;break}else S=x}}else Ha=xa;Bd(b,48,Ha+18|0,18,0);ud(b,za,p-za|0)}Bd(b,32,f,C,h^8192);B=C}while(0);Cb=j;return ((B|0)<(f|0)?f:B)|0}function pd(a,b){a=a|0;b=b|0;var d=0,e=0.0;d=(c[b>>2]|0)+(8-1)&~(8-1);e=+g[d>>3];c[b>>2]=d+8;g[a>>3]=e;return}function qd(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;h=Cb;Cb=Cb+224|0;i=h+208|0;j=h+160|0;k=h+80|0;l=h;m=j;n=m+40|0;do{c[m>>2]=0;m=m+4|0}while((m|0)<(n|0));c[i>>2]=c[e>>2];if((rd(0,d,i,k,j,f,g)|0)<0)o=-1;else{if((c[b+76>>2]|0)>-1)p=sd(b)|0;else p=0;e=c[b>>2]|0;m=e&32;if((a[b+74>>0]|0)<1)c[b>>2]=e&-33;e=b+48|0;if(!(c[e>>2]|0)){n=b+44|0;q=c[n>>2]|0;c[n>>2]=l;r=b+28|0;c[r>>2]=l;s=b+20|0;c[s>>2]=l;c[e>>2]=80;t=b+16|0;c[t>>2]=l+80;l=rd(b,d,i,k,j,f,g)|0;if(!q)u=l;else{Hb[c[b+36>>2]&7](b,0,0)|0;v=(c[s>>2]|0)==0?-1:l;c[n>>2]=q;c[e>>2]=0;c[t>>2]=0;c[r>>2]=0;c[s>>2]=0;u=v}}else u=rd(b,d,i,k,j,f,g)|0;g=c[b>>2]|0;c[b>>2]=g|m;if(p|0)td(b);o=(g&32|0)==0?u:-1}Cb=h;return o|0}function rd(d,e,f,h,i,j,k){d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;var l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0;l=Cb;Cb=Cb+64|0;m=l+56|0;n=l+40|0;o=l;p=l+48|0;q=l+60|0;c[m>>2]=e;e=(d|0)!=0;r=o+40|0;s=r;t=o+39|0;o=p+4|0;v=0;w=0;x=0;a:while(1){y=v;z=w;while(1){do if((y|0)>-1)if((z|0)>(2147483647-y|0)){c[(bd()|0)>>2]=61;A=-1;break}else{A=z+y|0;break}else A=y;while(0);B=c[m>>2]|0;C=a[B>>0]|0;if(!(C<<24>>24)){D=92;break a}E=C;C=B;b:while(1){switch(E<<24>>24){case 37:{D=10;break b;break}case 0:{F=C;break b;break}default:{}}G=C+1|0;c[m>>2]=G;E=a[G>>0]|0;C=G}c:do if((D|0)==10){D=0;E=C;G=C;while(1){if((a[E+1>>0]|0)!=37){F=G;break c}H=G+1|0;E=E+2|0;c[m>>2]=E;if((a[E>>0]|0)!=37){F=H;break}else G=H}}while(0);z=F-B|0;if(e)ud(d,B,z);if(!z)break;else y=A}y=(jd(a[(c[m>>2]|0)+1>>0]|0)|0)==0;z=c[m>>2]|0;if(!y?(a[z+2>>0]|0)==36:0){I=3;J=(a[z+1>>0]|0)+-48|0;K=1}else{I=1;J=-1;K=x}y=z+I|0;c[m>>2]=y;z=a[y>>0]|0;C=(z<<24>>24)+-32|0;if(C>>>0>31|(1<<C&75913|0)==0){L=z;M=0;N=y}else{z=0;G=y;y=C;while(1){C=1<<y|z;E=G+1|0;c[m>>2]=E;H=a[E>>0]|0;y=(H<<24>>24)+-32|0;if(y>>>0>31|(1<<y&75913|0)==0){L=H;M=C;N=E;break}else{z=C;G=E}}}if(L<<24>>24==42){if((jd(a[N+1>>0]|0)|0)!=0?(G=c[m>>2]|0,(a[G+2>>0]|0)==36):0){z=G+1|0;c[i+((a[z>>0]|0)+-48<<2)>>2]=10;O=1;P=G+3|0;Q=c[h+((a[z>>0]|0)+-48<<3)>>2]|0}else{if(K|0){R=-1;break}if(e){z=(c[f>>2]|0)+(4-1)&~(4-1);G=c[z>>2]|0;c[f>>2]=z+4;S=G}else S=0;O=0;P=(c[m>>2]|0)+1|0;Q=S}c[m>>2]=P;G=(Q|0)<0;T=P;U=G?M|8192:M;V=O;W=G?0-Q|0:Q}else{G=vd(m)|0;if((G|0)<0){R=-1;break}T=c[m>>2]|0;U=M;V=K;W=G}do if((a[T>>0]|0)==46){G=T+1|0;if((a[G>>0]|0)!=42){c[m>>2]=G;G=vd(m)|0;X=c[m>>2]|0;Y=G;break}if(jd(a[T+2>>0]|0)|0?(G=c[m>>2]|0,(a[G+3>>0]|0)==36):0){z=G+2|0;c[i+((a[z>>0]|0)+-48<<2)>>2]=10;y=c[h+((a[z>>0]|0)+-48<<3)>>2]|0;z=G+4|0;c[m>>2]=z;X=z;Y=y;break}if(V|0){R=-1;break a}if(e){y=(c[f>>2]|0)+(4-1)&~(4-1);z=c[y>>2]|0;c[f>>2]=y+4;Z=z}else Z=0;z=(c[m>>2]|0)+2|0;c[m>>2]=z;X=z;Y=Z}else{X=T;Y=-1}while(0);z=X;y=0;while(1){if(((a[z>>0]|0)+-65|0)>>>0>57){R=-1;break a}G=z;z=z+1|0;c[m>>2]=z;_=a[(a[G>>0]|0)+-65+(3168+(y*58|0))>>0]|0;$=_&255;if(($+-1|0)>>>0>=8)break;else y=$}if(!(_<<24>>24)){R=-1;break}G=(J|0)>-1;do if(_<<24>>24==19)if(G){R=-1;break a}else D=54;else{if(G){c[i+(J<<2)>>2]=$;E=h+(J<<3)|0;C=c[E+4>>2]|0;H=n;c[H>>2]=c[E>>2];c[H+4>>2]=C;D=54;break}if(!e){R=0;break a}wd(n,$,f,k);aa=c[m>>2]|0;D=55}while(0);if((D|0)==54){D=0;if(e){aa=z;D=55}else ba=0}d:do if((D|0)==55){D=0;G=a[aa+-1>>0]|0;C=(y|0)!=0&(G&15|0)==3?G&-33:G;G=U&-65537;H=(U&8192|0)==0?U:G;e:do switch(C|0){case 110:{switch((y&255)<<24>>24){case 0:{c[c[n>>2]>>2]=A;ba=0;break d;break}case 1:{c[c[n>>2]>>2]=A;ba=0;break d;break}case 2:{E=c[n>>2]|0;c[E>>2]=A;c[E+4>>2]=((A|0)<0)<<31>>31;ba=0;break d;break}case 3:{b[c[n>>2]>>1]=A;ba=0;break d;break}case 4:{a[c[n>>2]>>0]=A;ba=0;break d;break}case 6:{c[c[n>>2]>>2]=A;ba=0;break d;break}case 7:{E=c[n>>2]|0;c[E>>2]=A;c[E+4>>2]=((A|0)<0)<<31>>31;ba=0;break d;break}default:{ba=0;break d}}break}case 112:{ca=H|8;da=Y>>>0>8?Y:8;ea=120;D=67;break}case 88:case 120:{ca=H;da=Y;ea=C;D=67;break}case 111:{E=n;fa=yd(c[E>>2]|0,c[E+4>>2]|0,r)|0;E=s-fa|0;ga=fa;ha=H;ia=(H&8|0)==0|(Y|0)>(E|0)?Y:E+1|0;ja=0;ka=5063;D=73;break}case 105:case 100:{E=n;fa=c[E>>2]|0;la=c[E+4>>2]|0;if((la|0)<0){E=Rg(0,0,fa|0,la|0)|0;ma=u()|0;na=n;c[na>>2]=E;c[na+4>>2]=ma;oa=E;pa=ma;qa=1;ra=5063;D=72;break e}else{oa=fa;pa=la;qa=(H&2049|0)!=0&1;ra=(H&2048|0)==0?((H&1|0)==0?5063:5065):5064;D=72;break e}break}case 117:{la=n;oa=c[la>>2]|0;pa=c[la+4>>2]|0;qa=0;ra=5063;D=72;break}case 99:{a[t>>0]=c[n>>2];sa=t;ta=G;ua=1;va=0;wa=5063;xa=s;break}case 115:{la=c[n>>2]|0;fa=(la|0)==0?5073:la;la=Ad(fa,0,Y)|0;ma=(la|0)==0;sa=fa;ta=G;ua=ma?Y:la-fa|0;va=0;wa=5063;xa=ma?fa+Y|0:la;break}case 67:{c[p>>2]=c[n>>2];c[o>>2]=0;c[n>>2]=p;ya=-1;D=79;break}case 83:{if(!Y){Bd(d,32,W,0,H);za=0;D=89}else{ya=Y;D=79}break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{ba=Gb[j&1](d,+g[n>>3],W,Y,H,C)|0;break d;break}default:{sa=B;ta=H;ua=Y;va=0;wa=5063;xa=s}}while(0);f:do if((D|0)==67){D=0;C=n;G=xd(c[C>>2]|0,c[C+4>>2]|0,r,ea&32)|0;C=n;la=(ca&8|0)==0|(c[C>>2]|0)==0&(c[C+4>>2]|0)==0;ga=G;ha=ca;ia=da;ja=la?0:2;ka=la?5063:5063+(ea>>>4)|0;D=73}else if((D|0)==72){D=0;ga=zd(oa,pa,r)|0;ha=H;ia=Y;ja=qa;ka=ra;D=73}else if((D|0)==79){D=0;la=0;G=c[n>>2]|0;while(1){C=c[G>>2]|0;if(!C){Aa=la;break}fa=Cd(q,C)|0;Ba=(fa|0)<0;if(Ba|fa>>>0>(ya-la|0)>>>0){D=83;break}C=fa+la|0;if(ya>>>0>C>>>0){la=C;G=G+4|0}else{Aa=C;break}}if((D|0)==83){D=0;if(Ba){R=-1;break a}else Aa=la}Bd(d,32,W,Aa,H);if(!Aa){za=0;D=89}else{G=0;C=c[n>>2]|0;while(1){fa=c[C>>2]|0;if(!fa){za=Aa;D=89;break f}ma=Cd(q,fa)|0;G=ma+G|0;if((G|0)>(Aa|0)){za=Aa;D=89;break f}ud(d,q,ma);if(G>>>0>=Aa>>>0){za=Aa;D=89;break}else C=C+4|0}}}while(0);if((D|0)==73){D=0;C=n;G=(c[C>>2]|0)!=0|(c[C+4>>2]|0)!=0;C=(ia|0)!=0|G;la=s-ga+((G^1)&1)|0;sa=C?ga:r;ta=(ia|0)>-1?ha&-65537:ha;ua=C?((ia|0)>(la|0)?ia:la):0;va=ja;wa=ka;xa=s}else if((D|0)==89){D=0;Bd(d,32,W,za,H^8192);ba=(W|0)>(za|0)?W:za;break}la=xa-sa|0;C=(ua|0)<(la|0)?la:ua;G=C+va|0;ma=(W|0)<(G|0)?G:W;Bd(d,32,ma,G,ta);ud(d,wa,va);Bd(d,48,ma,G,ta^65536);Bd(d,48,C,la,0);ud(d,sa,la);Bd(d,32,ma,G,ta^8192);ba=ma}while(0);v=A;w=ba;x=V}g:do if((D|0)==92)if(!d)if(!x)R=0;else{V=1;while(1){ba=c[i+(V<<2)>>2]|0;if(!ba)break;wd(h+(V<<3)|0,ba,f,k);ba=V+1|0;if(ba>>>0<10)V=ba;else{R=1;break g}}ba=V;while(1){if(c[i+(ba<<2)>>2]|0){R=-1;break g}ba=ba+1|0;if(ba>>>0>=10){R=1;break}}}else R=A;while(0);Cb=l;return R|0}function sd(a){a=a|0;return 1}function td(a){a=a|0;return}function ud(a,b,d){a=a|0;b=b|0;d=d|0;if(!(c[a>>2]&32))Gd(b,d,a)|0;return}function vd(b){b=b|0;var d=0,e=0,f=0,g=0,h=0;if(!(jd(a[c[b>>2]>>0]|0)|0))d=0;else{e=0;while(1){f=c[b>>2]|0;g=(e*10|0)+-48+(a[f>>0]|0)|0;h=f+1|0;c[b>>2]=h;if(!(jd(a[h>>0]|0)|0)){d=g;break}else e=g}}return d|0}function wd(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0,k=0.0;a:do if(b>>>0<=20)do switch(b|0){case 9:{f=(c[d>>2]|0)+(4-1)&~(4-1);h=c[f>>2]|0;c[d>>2]=f+4;c[a>>2]=h;break a;break}case 10:{h=(c[d>>2]|0)+(4-1)&~(4-1);f=c[h>>2]|0;c[d>>2]=h+4;h=a;c[h>>2]=f;c[h+4>>2]=((f|0)<0)<<31>>31;break a;break}case 11:{f=(c[d>>2]|0)+(4-1)&~(4-1);h=c[f>>2]|0;c[d>>2]=f+4;f=a;c[f>>2]=h;c[f+4>>2]=0;break a;break}case 12:{f=(c[d>>2]|0)+(8-1)&~(8-1);h=f;i=c[h>>2]|0;j=c[h+4>>2]|0;c[d>>2]=f+8;f=a;c[f>>2]=i;c[f+4>>2]=j;break a;break}case 13:{j=(c[d>>2]|0)+(4-1)&~(4-1);f=c[j>>2]|0;c[d>>2]=j+4;j=(f&65535)<<16>>16;f=a;c[f>>2]=j;c[f+4>>2]=((j|0)<0)<<31>>31;break a;break}case 14:{j=(c[d>>2]|0)+(4-1)&~(4-1);f=c[j>>2]|0;c[d>>2]=j+4;j=a;c[j>>2]=f&65535;c[j+4>>2]=0;break a;break}case 15:{j=(c[d>>2]|0)+(4-1)&~(4-1);f=c[j>>2]|0;c[d>>2]=j+4;j=(f&255)<<24>>24;f=a;c[f>>2]=j;c[f+4>>2]=((j|0)<0)<<31>>31;break a;break}case 16:{j=(c[d>>2]|0)+(4-1)&~(4-1);f=c[j>>2]|0;c[d>>2]=j+4;j=a;c[j>>2]=f&255;c[j+4>>2]=0;break a;break}case 17:{j=(c[d>>2]|0)+(8-1)&~(8-1);k=+g[j>>3];c[d>>2]=j+8;g[a>>3]=k;break a;break}case 18:{Kb[e&1](a,d);break a;break}default:break a}while(0);while(0);return}function xd(b,c,e,f){b=b|0;c=c|0;e=e|0;f=f|0;var g=0,h=0;if((b|0)==0&(c|0)==0)g=e;else{h=b;b=c;c=e;while(1){e=c+-1|0;a[e>>0]=d[3632+(h&15)>>0]|0|f;h=Vg(h|0,b|0,4)|0;b=u()|0;if((h|0)==0&(b|0)==0){g=e;break}else c=e}}return g|0}function yd(b,c,d){b=b|0;c=c|0;d=d|0;var e=0,f=0;if((b|0)==0&(c|0)==0)e=d;else{f=b;b=c;c=d;while(1){d=c+-1|0;a[d>>0]=f&7|48;f=Vg(f|0,b|0,3)|0;b=u()|0;if((f|0)==0&(b|0)==0){e=d;break}else c=d}}return e|0}function zd(b,c,d){b=b|0;c=c|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;if(c>>>0>0|(c|0)==0&b>>>0>4294967295){e=b;f=c;c=d;do{g=e;e=Ug(e|0,f|0,10,0)|0;h=f;f=u()|0;i=Pg(e|0,f|0,10,0)|0;j=Rg(g|0,h|0,i|0,u()|0)|0;u()|0;c=c+-1|0;a[c>>0]=j&255|48}while(h>>>0>9|(h|0)==9&g>>>0>4294967295);k=c;l=e}else{k=d;l=b}if(!l)m=k;else{b=k;k=l;while(1){l=k;k=(k>>>0)/10|0;d=b+-1|0;a[d>>0]=l-(k*10|0)|48;if(l>>>0<10){m=d;break}else b=d}}return m|0}function Ad(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0;f=d&255;g=(e|0)!=0;a:do if(g&(b&3|0)!=0){h=d&255;i=e;j=b;while(1){if((a[j>>0]|0)==h<<24>>24){k=i;l=j;m=6;break a}n=j+1|0;o=i+-1|0;p=(o|0)!=0;if(p&(n&3|0)!=0){i=o;j=n}else{r=o;s=n;t=p;m=5;break}}}else{r=e;s=b;t=g;m=5}while(0);if((m|0)==5)if(t){k=r;l=s;m=6}else m=16;b:do if((m|0)==6){s=d&255;if((a[l>>0]|0)==s<<24>>24)if(!k){m=16;break}else{u=l;break}r=q(f,16843009)|0;c:do if(k>>>0>3){t=k;g=l;while(1){b=c[g>>2]^r;if((b&-2139062144^-2139062144)&b+-16843009|0){v=g;w=t;break c}b=g+4|0;e=t+-4|0;if(e>>>0>3){t=e;g=b}else{x=e;y=b;m=11;break}}}else{x=k;y=l;m=11}while(0);if((m|0)==11)if(!x){m=16;break}else{v=y;w=x}r=w;g=v;while(1){if((a[g>>0]|0)==s<<24>>24){u=g;break b}r=r+-1|0;if(!r){m=16;break}else g=g+1|0}}while(0);if((m|0)==16)u=0;return u|0}function Bd(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;var f=0,g=0,h=0;f=Cb;Cb=Cb+256|0;g=f;if((c|0)>(d|0)&(e&73728|0)==0){e=c-d|0;Zg(g|0,b<<24>>24|0,(e>>>0<256?e:256)|0)|0;if(e>>>0>255){b=c-d|0;d=e;do{ud(a,g,256);d=d+-256|0}while(d>>>0>255);h=b&255}else h=e;ud(a,g,h)}Cb=f;return}function Cd(a,b){a=a|0;b=b|0;var c=0;if(!a)c=0;else c=Dd(a,b,0)|0;return c|0}function Dd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;do if(b){if(d>>>0<128){a[b>>0]=d;f=1;break}if(!(c[c[(Ed()|0)+176>>2]>>2]|0))if((d&-128|0)==57216){a[b>>0]=d;f=1;break}else{c[(bd()|0)>>2]=25;f=-1;break}if(d>>>0<2048){a[b>>0]=d>>>6|192;a[b+1>>0]=d&63|128;f=2;break}if(d>>>0<55296|(d&-8192|0)==57344){a[b>>0]=d>>>12|224;a[b+1>>0]=d>>>6&63|128;a[b+2>>0]=d&63|128;f=3;break}if((d+-65536|0)>>>0<1048576){a[b>>0]=d>>>18|240;a[b+1>>0]=d>>>12&63|128;a[b+2>>0]=d>>>6&63|128;a[b+3>>0]=d&63|128;f=4;break}else{c[(bd()|0)>>2]=25;f=-1;break}}else f=1;while(0);return f|0}function Ed(){return Fd()|0}function Fd(){return 4368}function Gd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;f=e+16|0;g=c[f>>2]|0;if(!g)if(!(Hd(e)|0)){h=c[f>>2]|0;i=5}else j=0;else{h=g;i=5}a:do if((i|0)==5){g=e+20|0;f=c[g>>2]|0;k=f;if((h-f|0)>>>0<d>>>0){j=Hb[c[e+36>>2]&7](e,b,d)|0;break}b:do if((a[e+75>>0]|0)<0|(d|0)==0){l=k;m=0;n=d;o=b}else{f=d;while(1){p=f+-1|0;if((a[b+p>>0]|0)==10)break;if(!p){l=k;m=0;n=d;o=b;break b}else f=p}p=Hb[c[e+36>>2]&7](e,b,f)|0;if(p>>>0<f>>>0){j=p;break a}l=c[g>>2]|0;m=f;n=d-f|0;o=b+f|0}while(0);Yg(l|0,o|0,n|0)|0;c[g>>2]=(c[g>>2]|0)+n;j=m+n|0}while(0);return j|0}function Hd(b){b=b|0;var d=0,e=0,f=0;d=b+74|0;e=a[d>>0]|0;a[d>>0]=e+255|e;e=c[b>>2]|0;if(!(e&8)){c[b+8>>2]=0;c[b+4>>2]=0;d=c[b+44>>2]|0;c[b+28>>2]=d;c[b+20>>2]=d;c[b+16>>2]=d+(c[b+48>>2]|0);f=0}else{c[b>>2]=e|32;f=-1}return f|0}function Id(a){a=+a;var b=0;g[h>>3]=a;b=c[h>>2]|0;t(c[h+4>>2]|0);return b|0}function Jd(a,b){a=+a;b=b|0;var d=0,e=0,f=0,i=0.0,j=0,k=0.0,l=0.0;g[h>>3]=a;d=c[h>>2]|0;e=c[h+4>>2]|0;f=Vg(d|0,e|0,52)|0;u()|0;switch(f&2047){case 0:{if(a!=0.0){i=+Jd(a*18446744073709551616.0,b);j=(c[b>>2]|0)+-64|0;k=i}else{j=0;k=a}c[b>>2]=j;l=k;break}case 2047:{l=a;break}default:{c[b>>2]=(f&2047)+-1022;c[h>>2]=d;c[h+4>>2]=e&-2146435073|1071644672;l=+g[h>>3]}}return +l}function Kd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;e=a+20|0;f=c[e>>2]|0;g=(c[a+16>>2]|0)-f|0;a=g>>>0>d>>>0?d:g;Yg(f|0,b|0,a|0)|0;c[e>>2]=(c[e>>2]|0)+a;return d|0}function Ld(a){a=a|0;var b=0;if(a>>>0>4294963200){c[(bd()|0)>>2]=0-a;b=-1}else b=a;return b|0}function Md(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0;d=b;a:do if(!(d&3)){e=b;f=5}else{g=d;h=b;while(1){if(!(a[h>>0]|0)){i=g;break a}j=h+1|0;g=j;if(!(g&3)){e=j;f=5;break}else h=j}}while(0);if((f|0)==5){f=e;while(1){k=c[f>>2]|0;if(!((k&-2139062144^-2139062144)&k+-16843009))f=f+4|0;else break}if(!((k&255)<<24>>24))l=f;else{k=f;while(1){f=k+1|0;if(!(a[f>>0]|0)){l=f;break}else k=f}}i=l}return i-d|0}function Nd(b,c){b=b|0;c=c|0;var d=0;d=Od(b,c)|0;return ((a[d>>0]|0)==(c&255)<<24>>24?d:0)|0}function Od(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;e=d&255;a:do if(!e)f=b+(Md(b)|0)|0;else{if(!(b&3))g=b;else{h=d&255;i=b;while(1){j=a[i>>0]|0;if(j<<24>>24==0?1:j<<24>>24==h<<24>>24){f=i;break a}j=i+1|0;if(!(j&3)){g=j;break}else i=j}}i=q(e,16843009)|0;h=c[g>>2]|0;b:do if(!((h&-2139062144^-2139062144)&h+-16843009)){j=h;k=g;while(1){l=j^i;if((l&-2139062144^-2139062144)&l+-16843009|0){m=k;break b}l=k+4|0;j=c[l>>2]|0;if((j&-2139062144^-2139062144)&j+-16843009|0){m=l;break}else k=l}}else m=g;while(0);i=d&255;h=m;while(1){k=a[h>>0]|0;if(k<<24>>24==0?1:k<<24>>24==i<<24>>24){f=h;break}else h=h+1|0}}while(0);return f|0}function Pd(a,b){a=a|0;b=b|0;Qd(a,b)|0;return a|0}function Qd(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;e=d;a:do if(!((e^b)&3)){if(!(e&3)){f=b;g=d}else{h=b;i=d;while(1){j=a[i>>0]|0;a[h>>0]=j;if(!(j<<24>>24)){k=h;break a}j=i+1|0;l=h+1|0;if(!(j&3)){f=l;g=j;break}else{h=l;i=j}}}i=c[g>>2]|0;if(!((i&-2139062144^-2139062144)&i+-16843009)){h=i;i=f;j=g;while(1){l=j+4|0;m=i+4|0;c[i>>2]=h;h=c[l>>2]|0;if((h&-2139062144^-2139062144)&h+-16843009|0){n=m;o=l;break}else{i=m;j=l}}}else{n=f;o=g}p=n;q=o;r=10}else{p=b;q=d;r=10}while(0);if((r|0)==10){r=a[q>>0]|0;a[p>>0]=r;if(!(r<<24>>24))k=p;else{r=p;p=q;while(1){p=p+1|0;q=r+1|0;d=a[p>>0]|0;a[q>>0]=d;if(!(d<<24>>24)){k=q;break}else r=q}}}return k|0}function Rd(a,b){a=a|0;b=b|0;var c=0;c=Md(a)|0;return ((Sd(a,1,c,b)|0)!=(c|0))<<31>>31|0}function Sd(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0;f=q(d,b)|0;g=(b|0)==0?0:d;if((c[e+76>>2]|0)>-1){d=(sd(e)|0)==0;h=Gd(a,f,e)|0;if(d)i=h;else{td(e);i=h}}else i=Gd(a,f,e)|0;if((i|0)==(f|0))j=g;else j=(i>>>0)/(b>>>0)|0;return j|0}function Td(a){a=a|0;var b=0,d=0,e=0;if(c[a+68>>2]|0){b=c[a+132>>2]|0;d=a+128|0;if(b|0)c[b+128>>2]=c[d>>2];a=c[d>>2]|0;if(!a)e=(Ud()|0)+220|0;else e=a+132|0;c[e>>2]=b}return}function Ud(){return Fd()|0}function Vd(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;f=Cb;Cb=Cb+16|0;g=f;h=e&255;a[g>>0]=h;i=b+16|0;j=c[i>>2]|0;if(!j)if(!(Hd(b)|0)){k=c[i>>2]|0;l=4}else m=-1;else{k=j;l=4}do if((l|0)==4){j=b+20|0;i=c[j>>2]|0;if(i>>>0<k>>>0?(n=e&255,(n|0)!=(a[b+75>>0]|0)):0){c[j>>2]=i+1;a[i>>0]=h;m=n;break}if((Hb[c[b+36>>2]&7](b,g,1)|0)==1)m=d[g>>0]|0;else m=-1}while(0);Cb=f;return m|0}function Wd(a){a=a|0;var b=0,c=0,d=0;b=(Md(a)|0)+1|0;c=Lg(b)|0;if(!c)d=0;else d=Yg(c|0,a|0,b|0)|0;return d|0}function Xd(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=Cb;Cb=Cb+16|0;f=e;if(Nd(5117,a[d>>0]|0)|0){g=Yd(d)|0|32768;c[f>>2]=b;c[f+4>>2]=g;c[f+8>>2]=438;g=Ld(J(5,f|0)|0)|0;if((g|0)>=0){f=Zd(g,d)|0;if(!f){M(g|0)|0;h=0}else h=f}else h=0}else{c[(bd()|0)>>2]=28;h=0}Cb=e;return h|0}function Yd(b){b=b|0;var c=0,d=0,e=0,f=0;c=(Nd(b,43)|0)==0;d=a[b>>0]|0;e=c?d<<24>>24!=114&1:2;c=(Nd(b,120)|0)==0;f=c?e:e|128;e=(Nd(b,101)|0)==0;b=e?f:f|524288;f=d<<24>>24==114?b:b|64;b=d<<24>>24==119?f|512:f;return (d<<24>>24==97?b|1024:b)|0}function Zd(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;e=Cb;Cb=Cb+48|0;f=e+24|0;g=e+8|0;h=e;i=e+40|0;if(Nd(5117,a[d>>0]|0)|0){j=Lg(1176)|0;if(!j)k=0;else{Zg(j|0,0,144)|0;l=(Nd(d,43)|0)==0;m=a[d>>0]|0;if(l)c[j>>2]=m<<24>>24==114?8:4;if(m<<24>>24==97){c[h>>2]=b;c[h+4>>2]=3;m=I(221,h|0)|0;if(!(m&1024)){c[g>>2]=b;c[g+4>>2]=4;c[g+8>>2]=m|1024;I(221,g|0)|0}g=c[j>>2]|128;c[j>>2]=g;n=g}else n=c[j>>2]|0;c[j+60>>2]=b;c[j+44>>2]=j+152;c[j+48>>2]=1024;g=j+75|0;a[g>>0]=-1;if((n&8|0)==0?(c[f>>2]=b,c[f+4>>2]=21523,c[f+8>>2]=i,(K(54,f|0)|0)==0):0)a[g>>0]=10;c[j+32>>2]=5;c[j+36>>2]=1;c[j+40>>2]=2;c[j+12>>2]=2;if(!(c[2011]|0))c[j+76>>2]=-1;_d(j)|0;k=j}}else{c[(bd()|0)>>2]=28;k=0}Cb=e;return k|0}function _d(a){a=a|0;var b=0,d=0;b=$d()|0;c[a+56>>2]=c[b>>2];d=c[b>>2]|0;if(d|0)c[d+52>>2]=a;c[b>>2]=a;ae();return a|0}function $d(){G(8108);return 8116}function ae(){L(8108);return}function be(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0;if((c[a+76>>2]|0)>-1)b=sd(a)|0;else b=0;Td(a);d=(c[a>>2]&1|0)!=0;if(!d){e=$d()|0;f=c[a+52>>2]|0;g=a+56|0;if(f|0)c[f+56>>2]=c[g>>2];h=c[g>>2]|0;if(h|0)c[h+52>>2]=f;if((c[e>>2]|0)==(a|0))c[e>>2]=h;ae()}h=ce(a)|0;e=Fb[c[a+12>>2]&3](a)|0|h;h=c[a+96>>2]|0;if(h|0)Mg(h);if(d){if(b|0)td(a)}else Mg(a);return e|0}function ce(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0;do if(a){if((c[a+76>>2]|0)<=-1){b=de(a)|0;break}d=(sd(a)|0)==0;e=de(a)|0;if(d)b=e;else{td(a);b=e}}else{if(!(c[1091]|0))f=0;else f=ce(c[1091]|0)|0;e=c[($d()|0)>>2]|0;if(!e)g=f;else{d=e;e=f;while(1){if((c[d+76>>2]|0)>-1)h=sd(d)|0;else h=0;if((c[d+20>>2]|0)>>>0>(c[d+28>>2]|0)>>>0)i=de(d)|0|e;else i=e;if(h|0)td(d);d=c[d+56>>2]|0;if(!d){g=i;break}else e=i}}ae();b=g}while(0);return b|0}function de(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0;b=a+20|0;d=a+28|0;if((c[b>>2]|0)>>>0>(c[d>>2]|0)>>>0?(Hb[c[a+36>>2]&7](a,0,0)|0,(c[b>>2]|0)==0):0)e=-1;else{f=a+4|0;g=c[f>>2]|0;h=a+8|0;i=c[h>>2]|0;if(g>>>0<i>>>0){j=g-i|0;Ib[c[a+40>>2]&3](a,j,((j|0)<0)<<31>>31,1)|0;u()|0}c[a+16>>2]=0;c[d>>2]=0;c[b>>2]=0;c[h>>2]=0;c[f>>2]=0;e=0}return e|0}function ee(a,b,c){a=a|0;b=b|0;c=c|0;return fe(a,b,((b|0)<0)<<31>>31,c)|0}function fe(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;if((c[a+76>>2]|0)>-1){f=(sd(a)|0)==0;g=ge(a,b,d,e)|0;if(f)h=g;else{td(a);h=g}}else h=ge(a,b,d,e)|0;return h|0}function ge(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0;if((e|0)==1){f=(c[a+8>>2]|0)-(c[a+4>>2]|0)|0;g=Rg(b|0,d|0,f|0,((f|0)<0)<<31>>31|0)|0;h=g;i=u()|0}else{h=b;i=d}d=a+20|0;b=a+28|0;if((c[d>>2]|0)>>>0>(c[b>>2]|0)>>>0?(Hb[c[a+36>>2]&7](a,0,0)|0,(c[d>>2]|0)==0):0)j=-1;else{c[a+16>>2]=0;c[b>>2]=0;c[d>>2]=0;Ib[c[a+40>>2]&3](a,h,i,e)|0;if((u()|0)<0)j=-1;else{c[a+8>>2]=0;c[a+4>>2]=0;c[a>>2]=c[a>>2]&-17;j=0}}return j|0}function he(a,b){a=a|0;b=b|0;Pd(a+(Md(a)|0)|0,b)|0;return a|0}function ie(a){a=a|0;var b=0,d=0,e=0,f=0,g=0;if((c[a+76>>2]|0)>-1){b=(sd(a)|0)==0;d=je(a)|0;e=u()|0;if(b){f=e;g=d}else{td(a);f=e;g=d}}else{d=je(a)|0;f=u()|0;g=d}t(f|0);return g|0}function je(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0;if(!(c[a>>2]&128))b=1;else b=(c[a+20>>2]|0)>>>0>(c[a+28>>2]|0)>>>0?2:1;d=Ib[c[a+40>>2]&3](a,0,0,b)|0;b=u()|0;if((b|0)<0){e=b;f=d}else{g=(c[a+8>>2]|0)-(c[a+4>>2]|0)|0;h=Rg(d|0,b|0,g|0,((g|0)<0)<<31>>31|0)|0;g=u()|0;b=(c[a+20>>2]|0)-(c[a+28>>2]|0)|0;a=Qg(h|0,g|0,b|0,((b|0)<0)<<31>>31|0)|0;e=u()|0;f=a}t(e|0);return f|0}function ke(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;g=q(e,d)|0;h=(d|0)==0?0:e;if((c[f+76>>2]|0)>-1)i=sd(f)|0;else i=0;e=f+74|0;j=a[e>>0]|0;a[e>>0]=j+255|j;j=f+4|0;e=c[j>>2]|0;k=(c[f+8>>2]|0)-e|0;if((k|0)>0){l=k>>>0<g>>>0?k:g;Yg(b|0,e|0,l|0)|0;c[j>>2]=(c[j>>2]|0)+l;m=b+l|0;n=g-l|0}else{m=b;n=g}a:do if(!n)o=13;else{b=f+32|0;l=m;j=n;while(1){if(gd(f)|0)break;e=Hb[c[b>>2]&7](f,l,j)|0;if((e+1|0)>>>0<2)break;k=j-e|0;if(!k){o=13;break a}else{l=l+e|0;j=k}}if(i|0)td(f);p=((g-j|0)>>>0)/(d>>>0)|0}while(0);if((o|0)==13)if(!i)p=h;else{td(f);p=h}return p|0}function le(a){a=a|0;var b=0,d=0;b=ie(a)|0;a=u()|0;if((a|0)>0|(a|0)==0&b>>>0>2147483647){c[(bd()|0)>>2]=61;d=-1}else d=b;return d|0}function me(a,b){a=a|0;b=b|0;var d=0,e=0;d=Cb;Cb=Cb+16|0;e=d;c[e>>2]=b;b=nd(c[1090]|0,a,e)|0;Cb=d;return b|0}function ne(b){b=b|0;var d=0,e=0,f=0,g=0,h=0;d=c[1090]|0;if((c[d+76>>2]|0)>-1)e=sd(d)|0;else e=0;do if((Rd(b,d)|0)<0)f=-1;else{if((a[d+75>>0]|0)!=10?(g=d+20|0,h=c[g>>2]|0,h>>>0<(c[d+16>>2]|0)>>>0):0){c[g>>2]=h+1;a[h>>0]=10;f=0;break}f=(Vd(d,10)|0)>>31}while(0);if(e|0)td(d);return f|0}function oe(){pe();return}function pe(){qe(8616);return}function qe(a){a=a|0;var b=0;b=Cb;Cb=Cb+16|0;c[b>>2]=a;re();Cb=b;return}function re(){Z(se()|0,5121);S(te()|0,5126,1,1,0);ue(5131);ve(5136);we(5148);xe(5162);ye(5168);ze(5183);Ae(5187);Be(5200);Ce(5205);De(5219);Ee(5225);X(Fe()|0,5232);X(Ge()|0,5244);Y(He()|0,4,5277);Y(Ie()|0,2,5290);Y(Je()|0,4,5305);T(Ke()|0,5320);Le(5336);Me(5366);Ne(5403);Oe(5442);Pe(5473);Qe(5513);Re(5542);Se(5580);Te(5610);Me(5649);Ne(5681);Oe(5714);Pe(5747);Qe(5781);Re(5814);Ue(5848);Ve(5879);We(5911);return}function se(){return hg()|0}function te(){return gg()|0}function ue(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=eg()|0;V(a|0,c[d>>2]|0,1,-128<<24>>24|0,127<<24>>24|0);Cb=b;return}function ve(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=cg()|0;V(a|0,c[d>>2]|0,1,-128<<24>>24|0,127<<24>>24|0);Cb=b;return}function we(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=ag()|0;V(a|0,c[d>>2]|0,1,0,255);Cb=b;return}function xe(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=_f()|0;V(a|0,c[d>>2]|0,2,-32768<<16>>16|0,32767<<16>>16|0);Cb=b;return}function ye(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Yf()|0;V(a|0,c[d>>2]|0,2,0,65535);Cb=b;return}function ze(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Wf()|0;V(a|0,c[d>>2]|0,4,-2147483648,2147483647);Cb=b;return}function Ae(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Uf()|0;V(a|0,c[d>>2]|0,4,0,-1);Cb=b;return}function Be(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Sf()|0;V(a|0,c[d>>2]|0,4,-2147483648,2147483647);Cb=b;return}function Ce(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Qf()|0;V(a|0,c[d>>2]|0,4,0,-1);Cb=b;return}function De(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Of()|0;U(a|0,c[d>>2]|0,4);Cb=b;return}function Ee(a){a=a|0;var b=0,d=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Mf()|0;U(a|0,c[d>>2]|0,8);Cb=b;return}function Fe(){return Lf()|0}function Ge(){return Kf()|0}function He(){return Jf()|0}function Ie(){return If()|0}function Je(){return Hf()|0}function Ke(){return Gf()|0}function Le(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Df()|0;e=Ef()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Me(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Af()|0;e=Bf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Ne(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=xf()|0;e=yf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Oe(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=uf()|0;e=vf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Pe(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=rf()|0;e=sf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Qe(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=of()|0;e=pf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Re(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=lf()|0;e=mf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Se(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=hf()|0;e=jf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Te(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=ef()|0;e=ff()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Ue(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=bf()|0;e=cf()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Ve(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=_e()|0;e=$e()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function We(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b;c[d>>2]=a;a=Xe()|0;e=Ye()|0;W(a|0,e|0,c[d>>2]|0);Cb=b;return}function Xe(){return Ze()|0}function Ye(){return 7}function Ze(){return 3936}function _e(){return af()|0}function $e(){return 7}function af(){return 3944}function bf(){return df()|0}function cf(){return 6}function df(){return 3952}function ef(){return gf()|0}function ff(){return 5}function gf(){return 3960}function hf(){return kf()|0}function jf(){return 4}function kf(){return 3968}function lf(){return nf()|0}function mf(){return 5}function nf(){return 3976}function of(){return qf()|0}function pf(){return 4}function qf(){return 3984}function rf(){return tf()|0}function sf(){return 3}function tf(){return 3992}function uf(){return wf()|0}function vf(){return 2}function wf(){return 4e3}function xf(){return zf()|0}function yf(){return 1}function zf(){return 4008}function Af(){return Cf()|0}function Bf(){return 0}function Cf(){return 4016}function Df(){return Ff()|0}function Ef(){return 0}function Ff(){return 4024}function Gf(){return 4032}function Hf(){return 4040}function If(){return 4072}function Jf(){return 4096}function Kf(){return 4120}function Lf(){return 4144}function Mf(){return Nf()|0}function Nf(){return 4336}function Of(){return Pf()|0}function Pf(){return 4328}function Qf(){return Rf()|0}function Rf(){return 4320}function Sf(){return Tf()|0}function Tf(){return 4312}function Uf(){return Vf()|0}function Vf(){return 4304}function Wf(){return Xf()|0}function Xf(){return 4296}function Yf(){return Zf()|0}function Zf(){return 4288}function _f(){return $f()|0}function $f(){return 4280}function ag(){return bg()|0}function bg(){return 4264}function cg(){return dg()|0}function dg(){return 4272}function eg(){return fg()|0}function fg(){return 4256}function gg(){return 4248}function hg(){return 4240}function ig(a){a=a|0;var b=0,d=0,e=0;b=Cb;Cb=Cb+16|0;d=b+4|0;e=b;c[e>>2]=a;c[d>>2]=c[e>>2];e=Wd(c[(c[d>>2]|0)+4>>2]|0)|0;Cb=b;return e|0}function jg(a){a=a|0;return}function kg(a){a=a|0;jg(a);Ag(a);return}function lg(a){a=a|0;return}function mg(a){a=a|0;return}function ng(d,e,f){d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;g=Cb;Cb=Cb+64|0;h=g;if(!(rg(d,e,0)|0))if((e|0)!=0?(i=vg(e,4184,4168,0)|0,(i|0)!=0):0){c[h>>2]=i;c[h+4>>2]=0;c[h+8>>2]=d;c[h+12>>2]=-1;d=h+16|0;e=h+24|0;j=h+48|0;k=d;l=k+36|0;do{c[k>>2]=0;k=k+4|0}while((k|0)<(l|0));b[d+36>>1]=0;a[d+38>>0]=0;c[j>>2]=1;Lb[c[(c[i>>2]|0)+28>>2]&3](i,h,c[f>>2]|0,1);if((c[e>>2]|0)==1){c[f>>2]=c[d>>2];m=1}else m=0;n=m}else n=0;else n=1;Cb=g;return n|0}function og(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;if(rg(a,c[b+8>>2]|0,g)|0)ug(0,b,d,e,f);return}function pg(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;do if(!(rg(b,c[d+8>>2]|0,g)|0)){if(rg(b,c[d>>2]|0,g)|0){if((c[d+16>>2]|0)!=(e|0)?(h=d+20|0,(c[h>>2]|0)!=(e|0)):0){c[d+32>>2]=f;c[h>>2]=e;h=d+40|0;c[h>>2]=(c[h>>2]|0)+1;if((c[d+36>>2]|0)==1?(c[d+24>>2]|0)==2:0)a[d+54>>0]=1;c[d+44>>2]=4;break}if((f|0)==1)c[d+32>>2]=1}}else tg(0,d,e,f);while(0);return}function qg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;if(rg(a,c[b+8>>2]|0,0)|0)sg(0,b,d,e);return}function rg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;if(d)e=(hd(c[a+4>>2]|0,c[b+4>>2]|0)|0)==0;else e=(a|0)==(b|0);return e|0}function sg(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0;b=d+16|0;g=c[b>>2]|0;do if(g){if((g|0)!=(e|0)){h=d+36|0;c[h>>2]=(c[h>>2]|0)+1;c[d+24>>2]=2;a[d+54>>0]=1;break}h=d+24|0;if((c[h>>2]|0)==2)c[h>>2]=f}else{c[b>>2]=e;c[d+24>>2]=f;c[d+36>>2]=1}while(0);return}function tg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;if((c[b+4>>2]|0)==(d|0)?(d=b+28|0,(c[d>>2]|0)!=1):0)c[d>>2]=e;return}function ug(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0;a[d+53>>0]=1;do if((c[d+4>>2]|0)==(f|0)){a[d+52>>0]=1;b=d+16|0;h=c[b>>2]|0;if(!h){c[b>>2]=e;c[d+24>>2]=g;c[d+36>>2]=1;if(!((g|0)==1?(c[d+48>>2]|0)==1:0))break;a[d+54>>0]=1;break}if((h|0)!=(e|0)){h=d+36|0;c[h>>2]=(c[h>>2]|0)+1;a[d+54>>0]=1;break}h=d+24|0;b=c[h>>2]|0;if((b|0)==2){c[h>>2]=g;i=g}else i=b;if((i|0)==1?(c[d+48>>2]|0)==1:0)a[d+54>>0]=1}while(0);return}function vg(d,e,f,g){d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;h=Cb;Cb=Cb+64|0;i=h;j=c[d>>2]|0;k=d+(c[j+-8>>2]|0)|0;l=c[j+-4>>2]|0;c[i>>2]=f;c[i+4>>2]=d;c[i+8>>2]=e;c[i+12>>2]=g;g=i+16|0;e=i+20|0;d=i+24|0;j=i+28|0;m=i+32|0;n=i+40|0;o=g;p=o+36|0;do{c[o>>2]=0;o=o+4|0}while((o|0)<(p|0));b[g+36>>1]=0;a[g+38>>0]=0;a:do if(rg(l,f,0)|0){c[i+48>>2]=1;Nb[c[(c[l>>2]|0)+20>>2]&3](l,i,k,k,1,0);q=(c[d>>2]|0)==1?k:0}else{Mb[c[(c[l>>2]|0)+24>>2]&3](l,i,k,1,0);switch(c[i+36>>2]|0){case 0:{q=(c[n>>2]|0)==1&(c[j>>2]|0)==1&(c[m>>2]|0)==1?c[e>>2]|0:0;break a;break}case 1:break;default:{q=0;break a}}if((c[d>>2]|0)!=1?!((c[n>>2]|0)==0&(c[j>>2]|0)==1&(c[m>>2]|0)==1):0){q=0;break}q=c[g>>2]|0}while(0);Cb=h;return q|0}function wg(a){a=a|0;jg(a);Ag(a);return}function xg(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;if(rg(a,c[b+8>>2]|0,g)|0)ug(0,b,d,e,f);else{h=c[a+8>>2]|0;Nb[c[(c[h>>2]|0)+20>>2]&3](h,b,d,e,f,g)}return}function yg(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0;a:do if(!(rg(b,c[d+8>>2]|0,g)|0)){if(!(rg(b,c[d>>2]|0,g)|0)){h=c[b+8>>2]|0;Mb[c[(c[h>>2]|0)+24>>2]&3](h,d,e,f,g);break}if((c[d+16>>2]|0)!=(e|0)?(h=d+20|0,(c[h>>2]|0)!=(e|0)):0){c[d+32>>2]=f;i=d+44|0;do if((c[i>>2]|0)!=4){j=d+52|0;a[j>>0]=0;k=d+53|0;a[k>>0]=0;l=c[b+8>>2]|0;Nb[c[(c[l>>2]|0)+20>>2]&3](l,d,e,e,1,g);if(a[k>>0]|0){k=(a[j>>0]|0)==0;c[i>>2]=3;if(k)break;else break a}else{c[i>>2]=4;break}}while(0);c[h>>2]=e;i=d+40|0;c[i>>2]=(c[i>>2]|0)+1;if((c[d+36>>2]|0)!=1)break;if((c[d+24>>2]|0)!=2)break;a[d+54>>0]=1;break}if((f|0)==1)c[d+32>>2]=1}else tg(0,d,e,f);while(0);return}function zg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;if(rg(a,c[b+8>>2]|0,0)|0)sg(0,b,d,e);else{f=c[a+8>>2]|0;Lb[c[(c[f>>2]|0)+28>>2]&3](f,b,d,e)}return}function Ag(a){a=a|0;Mg(a);return}function Bg(a){a=a|0;return}function Cg(a){a=a|0;jg(a);Ag(a);return}function Dg(a,b,c){a=a|0;b=b|0;c=c|0;return rg(a,b,0)|0}function Eg(a){a=a|0;jg(a);Ag(a);return}function Fg(b,d,e,f,g,h){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0;if(rg(b,c[d+8>>2]|0,h)|0)ug(0,d,e,f,g);else{i=d+52|0;j=a[i>>0]|0;k=d+53|0;l=a[k>>0]|0;m=c[b+12>>2]|0;n=b+16+(m<<3)|0;a[i>>0]=0;a[k>>0]=0;Jg(b+16|0,d,e,f,g,h);o=a[i>>0]|0;p=o|j;j=a[k>>0]|0;q=j|l;a:do if((m|0)>1){l=d+24|0;r=b+8|0;s=d+54|0;t=j;u=o;v=q;w=p;x=b+24|0;while(1){y=v&1;z=w&1;if(a[s>>0]|0){A=y;B=z;break a}if(!(u<<24>>24)){if(t<<24>>24?(c[r>>2]&1|0)==0:0){A=y;B=z;break a}}else{if((c[l>>2]|0)==1){A=y;B=z;break a}if(!(c[r>>2]&2)){A=y;B=z;break a}}a[i>>0]=0;a[k>>0]=0;Jg(x,d,e,f,g,h);u=a[i>>0]|0;C=u|z;t=a[k>>0]|0;z=t|y;x=x+8|0;if(x>>>0>=n>>>0){A=z;B=C;break}else{v=z;w=C}}}else{A=q;B=p}while(0);a[i>>0]=B<<24>>24!=0&1;a[k>>0]=A<<24>>24!=0&1}return}function Gg(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;a:do if(!(rg(b,c[d+8>>2]|0,g)|0)){if(!(rg(b,c[d>>2]|0,g)|0)){h=c[b+12>>2]|0;i=b+16+(h<<3)|0;Kg(b+16|0,d,e,f,g);j=b+24|0;if((h|0)<=1)break;h=c[b+8>>2]|0;if((h&2|0)==0?(k=d+36|0,(c[k>>2]|0)!=1):0){if(!(h&1)){h=d+54|0;l=j;while(1){if(a[h>>0]|0)break a;if((c[k>>2]|0)==1)break a;Kg(l,d,e,f,g);l=l+8|0;if(l>>>0>=i>>>0)break a}}l=d+24|0;h=d+54|0;m=j;while(1){if(a[h>>0]|0)break a;if((c[k>>2]|0)==1?(c[l>>2]|0)==1:0)break a;Kg(m,d,e,f,g);m=m+8|0;if(m>>>0>=i>>>0)break a}}m=d+54|0;l=j;while(1){if(a[m>>0]|0)break a;Kg(l,d,e,f,g);l=l+8|0;if(l>>>0>=i>>>0)break a}}if((c[d+16>>2]|0)!=(e|0)?(i=d+20|0,(c[i>>2]|0)!=(e|0)):0){c[d+32>>2]=f;l=d+44|0;if((c[l>>2]|0)!=4){m=b+16+(c[b+12>>2]<<3)|0;j=d+52|0;k=d+53|0;h=d+54|0;n=b+8|0;o=d+24|0;p=0;q=0;r=b+16|0;b:while(1){if(r>>>0>=m>>>0){s=18;break}a[j>>0]=0;a[k>>0]=0;Jg(r,d,e,e,1,g);if(a[h>>0]|0){s=18;break}do if(a[k>>0]|0){if(!(a[j>>0]|0))if(!(c[n>>2]&1)){t=p;s=19;break b}else{u=p;v=1;break}if((c[o>>2]|0)==1){t=1;s=19;break b}if(!(c[n>>2]&2)){t=1;s=19;break b}else{u=1;v=1}}else{u=p;v=q}while(0);p=u;q=v;r=r+8|0}if((s|0)==18)if(q){t=p;s=19}else{w=4;x=p}if((s|0)==19){w=3;x=t}c[l>>2]=w;if(x&1)break}c[i>>2]=e;r=d+40|0;c[r>>2]=(c[r>>2]|0)+1;if((c[d+36>>2]|0)!=1)break;if((c[d+24>>2]|0)!=2)break;a[d+54>>0]=1;break}if((f|0)==1)c[d+32>>2]=1}else tg(0,d,e,f);while(0);return}function Hg(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0;a:do if(!(rg(b,c[d+8>>2]|0,0)|0)){g=c[b+12>>2]|0;h=b+16+(g<<3)|0;Ig(b+16|0,d,e,f);if((g|0)>1){g=d+54|0;i=b+24|0;do{Ig(i,d,e,f);if(a[g>>0]|0)break a;i=i+8|0}while(i>>>0<h>>>0)}}else sg(0,d,e,f);while(0);return}function Ig(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;f=c[a+4>>2]|0;if(d){g=f>>8;if(!(f&1))h=g;else h=c[(c[d>>2]|0)+g>>2]|0}else h=0;g=c[a>>2]|0;Lb[c[(c[g>>2]|0)+28>>2]&3](g,b,d+h|0,(f&2|0)==0?2:e);return}function Jg(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0;h=c[a+4>>2]|0;i=h>>8;if(!(h&1))j=i;else j=c[(c[e>>2]|0)+i>>2]|0;i=c[a>>2]|0;Nb[c[(c[i>>2]|0)+20>>2]&3](i,b,d,e+j|0,(h&2|0)==0?2:f,g);return}function Kg(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0;g=c[a+4>>2]|0;h=g>>8;if(!(g&1))i=h;else i=c[(c[d>>2]|0)+h>>2]|0;h=c[a>>2]|0;Mb[c[(c[h>>2]|0)+24>>2]&3](h,b,d+i|0,(g&2|0)==0?2:e,f);return}
function Lg(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0;b=Cb;Cb=Cb+16|0;d=b;do if(a>>>0<245){e=a>>>0<11?16:a+11&-8;f=e>>>3;g=c[2030]|0;h=g>>>f;if(h&3|0){i=(h&1^1)+f|0;j=8160+(i<<1<<2)|0;k=j+8|0;l=c[k>>2]|0;m=l+8|0;n=c[m>>2]|0;if((n|0)==(j|0))c[2030]=g&~(1<<i);else{c[n+12>>2]=j;c[k>>2]=n}n=i<<3;c[l+4>>2]=n|3;i=l+n+4|0;c[i>>2]=c[i>>2]|1;o=m;Cb=b;return o|0}m=c[2032]|0;if(e>>>0>m>>>0){if(h|0){i=2<<f;n=h<<f&(i|0-i);i=(n&0-n)+-1|0;n=i>>>12&16;f=i>>>n;i=f>>>5&8;h=f>>>i;f=h>>>2&4;l=h>>>f;h=l>>>1&2;k=l>>>h;l=k>>>1&1;j=(i|n|f|h|l)+(k>>>l)|0;l=8160+(j<<1<<2)|0;k=l+8|0;h=c[k>>2]|0;f=h+8|0;n=c[f>>2]|0;if((n|0)==(l|0)){i=g&~(1<<j);c[2030]=i;p=i}else{c[n+12>>2]=l;c[k>>2]=n;p=g}n=j<<3;j=n-e|0;c[h+4>>2]=e|3;k=h+e|0;c[k+4>>2]=j|1;c[h+n>>2]=j;if(m|0){n=c[2035]|0;h=m>>>3;l=8160+(h<<1<<2)|0;i=1<<h;if(!(p&i)){c[2030]=p|i;q=l+8|0;r=l}else{i=l+8|0;q=i;r=c[i>>2]|0}c[q>>2]=n;c[r+12>>2]=n;c[n+8>>2]=r;c[n+12>>2]=l}c[2032]=j;c[2035]=k;o=f;Cb=b;return o|0}f=c[2031]|0;if(f){k=(f&0-f)+-1|0;j=k>>>12&16;l=k>>>j;k=l>>>5&8;n=l>>>k;l=n>>>2&4;i=n>>>l;n=i>>>1&2;h=i>>>n;i=h>>>1&1;s=c[8424+((k|j|l|n|i)+(h>>>i)<<2)>>2]|0;i=(c[s+4>>2]&-8)-e|0;h=s;n=s;while(1){s=c[h+16>>2]|0;if(!s){l=c[h+20>>2]|0;if(!l)break;else t=l}else t=s;s=(c[t+4>>2]&-8)-e|0;l=s>>>0<i>>>0;i=l?s:i;h=t;n=l?t:n}h=n+e|0;if(h>>>0>n>>>0){l=c[n+24>>2]|0;s=c[n+12>>2]|0;do if((s|0)==(n|0)){j=n+20|0;k=c[j>>2]|0;if(!k){u=n+16|0;v=c[u>>2]|0;if(!v){w=0;break}else{x=v;y=u}}else{x=k;y=j}j=x;k=y;while(1){u=j+20|0;v=c[u>>2]|0;if(!v){z=j+16|0;A=c[z>>2]|0;if(!A)break;else{B=A;C=z}}else{B=v;C=u}j=B;k=C}c[k>>2]=0;w=j}else{u=c[n+8>>2]|0;c[u+12>>2]=s;c[s+8>>2]=u;w=s}while(0);do if(l|0){s=c[n+28>>2]|0;u=8424+(s<<2)|0;if((n|0)==(c[u>>2]|0)){c[u>>2]=w;if(!w){c[2031]=f&~(1<<s);break}}else{s=l+16|0;c[((c[s>>2]|0)==(n|0)?s:l+20|0)>>2]=w;if(!w)break}c[w+24>>2]=l;s=c[n+16>>2]|0;if(s|0){c[w+16>>2]=s;c[s+24>>2]=w}s=c[n+20>>2]|0;if(s|0){c[w+20>>2]=s;c[s+24>>2]=w}}while(0);if(i>>>0<16){l=i+e|0;c[n+4>>2]=l|3;f=n+l+4|0;c[f>>2]=c[f>>2]|1}else{c[n+4>>2]=e|3;c[h+4>>2]=i|1;c[h+i>>2]=i;if(m|0){f=c[2035]|0;l=m>>>3;s=8160+(l<<1<<2)|0;u=1<<l;if(!(u&g)){c[2030]=u|g;D=s+8|0;E=s}else{u=s+8|0;D=u;E=c[u>>2]|0}c[D>>2]=f;c[E+12>>2]=f;c[f+8>>2]=E;c[f+12>>2]=s}c[2032]=i;c[2035]=h}o=n+8|0;Cb=b;return o|0}else F=e}else F=e}else F=e}else if(a>>>0<=4294967231){s=a+11|0;f=s&-8;u=c[2031]|0;if(u){l=0-f|0;v=s>>>8;if(v)if(f>>>0>16777215)G=31;else{s=(v+1048320|0)>>>16&8;z=v<<s;v=(z+520192|0)>>>16&4;A=z<<v;z=(A+245760|0)>>>16&2;H=14-(v|s|z)+(A<<z>>>15)|0;G=f>>>(H+7|0)&1|H<<1}else G=0;H=c[8424+(G<<2)>>2]|0;a:do if(!H){I=l;J=0;K=0;L=61}else{z=l;A=0;s=f<<((G|0)==31?0:25-(G>>>1)|0);v=H;M=0;while(1){N=(c[v+4>>2]&-8)-f|0;if(N>>>0<z>>>0)if(!N){O=0;P=v;Q=v;L=65;break a}else{R=N;S=v}else{R=z;S=M}N=c[v+20>>2]|0;v=c[v+16+(s>>>31<<2)>>2]|0;T=(N|0)==0|(N|0)==(v|0)?A:N;if(!v){I=R;J=T;K=S;L=61;break}else{z=R;A=T;s=s<<1;M=S}}}while(0);if((L|0)==61){if((J|0)==0&(K|0)==0){H=2<<G;l=(H|0-H)&u;if(!l){F=f;break}H=(l&0-l)+-1|0;l=H>>>12&16;e=H>>>l;H=e>>>5&8;n=e>>>H;e=n>>>2&4;h=n>>>e;n=h>>>1&2;i=h>>>n;h=i>>>1&1;U=c[8424+((H|l|e|n|h)+(i>>>h)<<2)>>2]|0;V=0}else{U=J;V=K}if(!U){W=I;X=V}else{O=I;P=U;Q=V;L=65}}if((L|0)==65){h=O;i=P;n=Q;while(1){e=(c[i+4>>2]&-8)-f|0;l=e>>>0<h>>>0;H=l?e:h;e=l?i:n;l=c[i+16>>2]|0;if(!l)Y=c[i+20>>2]|0;else Y=l;if(!Y){W=H;X=e;break}else{h=H;i=Y;n=e}}}if(((X|0)!=0?W>>>0<((c[2032]|0)-f|0)>>>0:0)?(n=X+f|0,n>>>0>X>>>0):0){i=c[X+24>>2]|0;h=c[X+12>>2]|0;do if((h|0)==(X|0)){e=X+20|0;H=c[e>>2]|0;if(!H){l=X+16|0;g=c[l>>2]|0;if(!g){Z=0;break}else{_=g;$=l}}else{_=H;$=e}e=_;H=$;while(1){l=e+20|0;g=c[l>>2]|0;if(!g){m=e+16|0;M=c[m>>2]|0;if(!M)break;else{aa=M;ba=m}}else{aa=g;ba=l}e=aa;H=ba}c[H>>2]=0;Z=e}else{l=c[X+8>>2]|0;c[l+12>>2]=h;c[h+8>>2]=l;Z=h}while(0);do if(i){h=c[X+28>>2]|0;l=8424+(h<<2)|0;if((X|0)==(c[l>>2]|0)){c[l>>2]=Z;if(!Z){l=u&~(1<<h);c[2031]=l;ca=l;break}}else{l=i+16|0;c[((c[l>>2]|0)==(X|0)?l:i+20|0)>>2]=Z;if(!Z){ca=u;break}}c[Z+24>>2]=i;l=c[X+16>>2]|0;if(l|0){c[Z+16>>2]=l;c[l+24>>2]=Z}l=c[X+20>>2]|0;if(l){c[Z+20>>2]=l;c[l+24>>2]=Z;ca=u}else ca=u}else ca=u;while(0);b:do if(W>>>0<16){u=W+f|0;c[X+4>>2]=u|3;i=X+u+4|0;c[i>>2]=c[i>>2]|1}else{c[X+4>>2]=f|3;c[n+4>>2]=W|1;c[n+W>>2]=W;i=W>>>3;if(W>>>0<256){u=8160+(i<<1<<2)|0;l=c[2030]|0;h=1<<i;if(!(l&h)){c[2030]=l|h;da=u+8|0;ea=u}else{h=u+8|0;da=h;ea=c[h>>2]|0}c[da>>2]=n;c[ea+12>>2]=n;c[n+8>>2]=ea;c[n+12>>2]=u;break}u=W>>>8;if(u)if(W>>>0>16777215)fa=31;else{h=(u+1048320|0)>>>16&8;l=u<<h;u=(l+520192|0)>>>16&4;i=l<<u;l=(i+245760|0)>>>16&2;g=14-(u|h|l)+(i<<l>>>15)|0;fa=W>>>(g+7|0)&1|g<<1}else fa=0;g=8424+(fa<<2)|0;c[n+28>>2]=fa;l=n+16|0;c[l+4>>2]=0;c[l>>2]=0;l=1<<fa;if(!(ca&l)){c[2031]=ca|l;c[g>>2]=n;c[n+24>>2]=g;c[n+12>>2]=n;c[n+8>>2]=n;break}l=c[g>>2]|0;c:do if((c[l+4>>2]&-8|0)==(W|0))ga=l;else{g=W<<((fa|0)==31?0:25-(fa>>>1)|0);i=l;while(1){ha=i+16+(g>>>31<<2)|0;h=c[ha>>2]|0;if(!h)break;if((c[h+4>>2]&-8|0)==(W|0)){ga=h;break c}else{g=g<<1;i=h}}c[ha>>2]=n;c[n+24>>2]=i;c[n+12>>2]=n;c[n+8>>2]=n;break b}while(0);l=ga+8|0;e=c[l>>2]|0;c[e+12>>2]=n;c[l>>2]=n;c[n+8>>2]=e;c[n+12>>2]=ga;c[n+24>>2]=0}while(0);o=X+8|0;Cb=b;return o|0}else F=f}else F=f}else F=-1;while(0);X=c[2032]|0;if(X>>>0>=F>>>0){ga=X-F|0;ha=c[2035]|0;if(ga>>>0>15){W=ha+F|0;c[2035]=W;c[2032]=ga;c[W+4>>2]=ga|1;c[ha+X>>2]=ga;c[ha+4>>2]=F|3}else{c[2032]=0;c[2035]=0;c[ha+4>>2]=X|3;ga=ha+X+4|0;c[ga>>2]=c[ga>>2]|1}o=ha+8|0;Cb=b;return o|0}ha=c[2033]|0;if(ha>>>0>F>>>0){ga=ha-F|0;c[2033]=ga;X=c[2036]|0;W=X+F|0;c[2036]=W;c[W+4>>2]=ga|1;c[X+4>>2]=F|3;o=X+8|0;Cb=b;return o|0}if(!(c[2148]|0)){c[2150]=4096;c[2149]=4096;c[2151]=-1;c[2152]=-1;c[2153]=0;c[2141]=0;c[2148]=d&-16^1431655768;ia=4096}else ia=c[2150]|0;d=F+48|0;X=F+47|0;ga=ia+X|0;W=0-ia|0;ia=ga&W;if(ia>>>0<=F>>>0){o=0;Cb=b;return o|0}fa=c[2140]|0;if(fa|0?(ca=c[2138]|0,ea=ca+ia|0,ea>>>0<=ca>>>0|ea>>>0>fa>>>0):0){o=0;Cb=b;return o|0}d:do if(!(c[2141]&4)){fa=c[2036]|0;e:do if(fa){ea=8568;while(1){ca=c[ea>>2]|0;if(ca>>>0<=fa>>>0?(ca+(c[ea+4>>2]|0)|0)>>>0>fa>>>0:0)break;ca=c[ea+8>>2]|0;if(!ca){L=128;break e}else ea=ca}ca=ga-ha&W;if(ca>>>0<2147483647){da=Ng(ca)|0;if((da|0)==((c[ea>>2]|0)+(c[ea+4>>2]|0)|0))if((da|0)==(-1|0))ja=ca;else{ka=da;la=ca;L=145;break d}else{ma=da;na=ca;L=136}}else ja=0}else L=128;while(0);do if((L|0)==128){fa=Ng(0)|0;if((fa|0)!=(-1|0)?(f=fa,ca=c[2149]|0,da=ca+-1|0,Z=((da&f|0)==0?0:(da+f&0-ca)-f|0)+ia|0,f=c[2138]|0,ca=Z+f|0,Z>>>0>F>>>0&Z>>>0<2147483647):0){da=c[2140]|0;if(da|0?ca>>>0<=f>>>0|ca>>>0>da>>>0:0){ja=0;break}da=Ng(Z)|0;if((da|0)==(fa|0)){ka=fa;la=Z;L=145;break d}else{ma=da;na=Z;L=136}}else ja=0}while(0);do if((L|0)==136){Z=0-na|0;if(!(d>>>0>na>>>0&(na>>>0<2147483647&(ma|0)!=(-1|0))))if((ma|0)==(-1|0)){ja=0;break}else{ka=ma;la=na;L=145;break d}da=c[2150]|0;fa=X-na+da&0-da;if(fa>>>0>=2147483647){ka=ma;la=na;L=145;break d}if((Ng(fa)|0)==(-1|0)){Ng(Z)|0;ja=0;break}else{ka=ma;la=fa+na|0;L=145;break d}}while(0);c[2141]=c[2141]|4;oa=ja;L=143}else{oa=0;L=143}while(0);if(((L|0)==143?ia>>>0<2147483647:0)?(ja=Ng(ia)|0,ia=Ng(0)|0,na=ia-ja|0,ma=na>>>0>(F+40|0)>>>0,!((ja|0)==(-1|0)|ma^1|ja>>>0<ia>>>0&((ja|0)!=(-1|0)&(ia|0)!=(-1|0))^1)):0){ka=ja;la=ma?na:oa;L=145}if((L|0)==145){oa=(c[2138]|0)+la|0;c[2138]=oa;if(oa>>>0>(c[2139]|0)>>>0)c[2139]=oa;oa=c[2036]|0;f:do if(oa){na=8568;while(1){pa=c[na>>2]|0;qa=c[na+4>>2]|0;if((ka|0)==(pa+qa|0)){L=154;break}ma=c[na+8>>2]|0;if(!ma)break;else na=ma}if(((L|0)==154?(ma=na+4|0,(c[na+12>>2]&8|0)==0):0)?ka>>>0>oa>>>0&pa>>>0<=oa>>>0:0){c[ma>>2]=qa+la;ma=(c[2033]|0)+la|0;ja=oa+8|0;ia=(ja&7|0)==0?0:0-ja&7;ja=oa+ia|0;X=ma-ia|0;c[2036]=ja;c[2033]=X;c[ja+4>>2]=X|1;c[oa+ma+4>>2]=40;c[2037]=c[2152];break}if(ka>>>0<(c[2034]|0)>>>0)c[2034]=ka;ma=ka+la|0;X=8568;while(1){if((c[X>>2]|0)==(ma|0)){L=162;break}ja=c[X+8>>2]|0;if(!ja)break;else X=ja}if((L|0)==162?(c[X+12>>2]&8|0)==0:0){c[X>>2]=ka;na=X+4|0;c[na>>2]=(c[na>>2]|0)+la;na=ka+8|0;ja=ka+((na&7|0)==0?0:0-na&7)|0;na=ma+8|0;ia=ma+((na&7|0)==0?0:0-na&7)|0;na=ja+F|0;d=ia-ja-F|0;c[ja+4>>2]=F|3;g:do if((oa|0)==(ia|0)){W=(c[2033]|0)+d|0;c[2033]=W;c[2036]=na;c[na+4>>2]=W|1}else{if((c[2035]|0)==(ia|0)){W=(c[2032]|0)+d|0;c[2032]=W;c[2035]=na;c[na+4>>2]=W|1;c[na+W>>2]=W;break}W=c[ia+4>>2]|0;if((W&3|0)==1){ha=W&-8;ga=W>>>3;h:do if(W>>>0<256){fa=c[ia+8>>2]|0;Z=c[ia+12>>2]|0;if((Z|0)==(fa|0)){c[2030]=c[2030]&~(1<<ga);break}else{c[fa+12>>2]=Z;c[Z+8>>2]=fa;break}}else{fa=c[ia+24>>2]|0;Z=c[ia+12>>2]|0;do if((Z|0)==(ia|0)){da=ia+16|0;ca=da+4|0;f=c[ca>>2]|0;if(!f){ba=c[da>>2]|0;if(!ba){ra=0;break}else{sa=ba;ta=da}}else{sa=f;ta=ca}ca=sa;f=ta;while(1){da=ca+20|0;ba=c[da>>2]|0;if(!ba){aa=ca+16|0;$=c[aa>>2]|0;if(!$)break;else{ua=$;va=aa}}else{ua=ba;va=da}ca=ua;f=va}c[f>>2]=0;ra=ca}else{da=c[ia+8>>2]|0;c[da+12>>2]=Z;c[Z+8>>2]=da;ra=Z}while(0);if(!fa)break;Z=c[ia+28>>2]|0;i=8424+(Z<<2)|0;do if((c[i>>2]|0)!=(ia|0)){da=fa+16|0;c[((c[da>>2]|0)==(ia|0)?da:fa+20|0)>>2]=ra;if(!ra)break h}else{c[i>>2]=ra;if(ra|0)break;c[2031]=c[2031]&~(1<<Z);break h}while(0);c[ra+24>>2]=fa;Z=ia+16|0;i=c[Z>>2]|0;if(i|0){c[ra+16>>2]=i;c[i+24>>2]=ra}i=c[Z+4>>2]|0;if(!i)break;c[ra+20>>2]=i;c[i+24>>2]=ra}while(0);wa=ia+ha|0;xa=ha+d|0}else{wa=ia;xa=d}ga=wa+4|0;c[ga>>2]=c[ga>>2]&-2;c[na+4>>2]=xa|1;c[na+xa>>2]=xa;ga=xa>>>3;if(xa>>>0<256){W=8160+(ga<<1<<2)|0;ea=c[2030]|0;i=1<<ga;if(!(ea&i)){c[2030]=ea|i;ya=W+8|0;za=W}else{i=W+8|0;ya=i;za=c[i>>2]|0}c[ya>>2]=na;c[za+12>>2]=na;c[na+8>>2]=za;c[na+12>>2]=W;break}W=xa>>>8;do if(!W)Aa=0;else{if(xa>>>0>16777215){Aa=31;break}i=(W+1048320|0)>>>16&8;ea=W<<i;ga=(ea+520192|0)>>>16&4;Z=ea<<ga;ea=(Z+245760|0)>>>16&2;da=14-(ga|i|ea)+(Z<<ea>>>15)|0;Aa=xa>>>(da+7|0)&1|da<<1}while(0);W=8424+(Aa<<2)|0;c[na+28>>2]=Aa;ha=na+16|0;c[ha+4>>2]=0;c[ha>>2]=0;ha=c[2031]|0;da=1<<Aa;if(!(ha&da)){c[2031]=ha|da;c[W>>2]=na;c[na+24>>2]=W;c[na+12>>2]=na;c[na+8>>2]=na;break}da=c[W>>2]|0;i:do if((c[da+4>>2]&-8|0)==(xa|0))Ba=da;else{W=xa<<((Aa|0)==31?0:25-(Aa>>>1)|0);ha=da;while(1){Ca=ha+16+(W>>>31<<2)|0;ea=c[Ca>>2]|0;if(!ea)break;if((c[ea+4>>2]&-8|0)==(xa|0)){Ba=ea;break i}else{W=W<<1;ha=ea}}c[Ca>>2]=na;c[na+24>>2]=ha;c[na+12>>2]=na;c[na+8>>2]=na;break g}while(0);da=Ba+8|0;W=c[da>>2]|0;c[W+12>>2]=na;c[da>>2]=na;c[na+8>>2]=W;c[na+12>>2]=Ba;c[na+24>>2]=0}while(0);o=ja+8|0;Cb=b;return o|0}na=8568;while(1){d=c[na>>2]|0;if(d>>>0<=oa>>>0?(Da=d+(c[na+4>>2]|0)|0,Da>>>0>oa>>>0):0)break;na=c[na+8>>2]|0}na=Da+-47|0;ja=na+8|0;d=na+((ja&7|0)==0?0:0-ja&7)|0;ja=oa+16|0;na=d>>>0<ja>>>0?oa:d;d=na+8|0;ia=la+-40|0;ma=ka+8|0;X=(ma&7|0)==0?0:0-ma&7;ma=ka+X|0;W=ia-X|0;c[2036]=ma;c[2033]=W;c[ma+4>>2]=W|1;c[ka+ia+4>>2]=40;c[2037]=c[2152];ia=na+4|0;c[ia>>2]=27;c[d>>2]=c[2142];c[d+4>>2]=c[2143];c[d+8>>2]=c[2144];c[d+12>>2]=c[2145];c[2142]=ka;c[2143]=la;c[2145]=0;c[2144]=d;d=na+24|0;do{W=d;d=d+4|0;c[d>>2]=7}while((W+8|0)>>>0<Da>>>0);if((na|0)!=(oa|0)){d=na-oa|0;c[ia>>2]=c[ia>>2]&-2;c[oa+4>>2]=d|1;c[na>>2]=d;W=d>>>3;if(d>>>0<256){ma=8160+(W<<1<<2)|0;X=c[2030]|0;da=1<<W;if(!(X&da)){c[2030]=X|da;Ea=ma+8|0;Fa=ma}else{da=ma+8|0;Ea=da;Fa=c[da>>2]|0}c[Ea>>2]=oa;c[Fa+12>>2]=oa;c[oa+8>>2]=Fa;c[oa+12>>2]=ma;break}ma=d>>>8;if(ma)if(d>>>0>16777215)Ga=31;else{da=(ma+1048320|0)>>>16&8;X=ma<<da;ma=(X+520192|0)>>>16&4;W=X<<ma;X=(W+245760|0)>>>16&2;fa=14-(ma|da|X)+(W<<X>>>15)|0;Ga=d>>>(fa+7|0)&1|fa<<1}else Ga=0;fa=8424+(Ga<<2)|0;c[oa+28>>2]=Ga;c[oa+20>>2]=0;c[ja>>2]=0;X=c[2031]|0;W=1<<Ga;if(!(X&W)){c[2031]=X|W;c[fa>>2]=oa;c[oa+24>>2]=fa;c[oa+12>>2]=oa;c[oa+8>>2]=oa;break}W=c[fa>>2]|0;j:do if((c[W+4>>2]&-8|0)==(d|0))Ha=W;else{fa=d<<((Ga|0)==31?0:25-(Ga>>>1)|0);X=W;while(1){Ia=X+16+(fa>>>31<<2)|0;da=c[Ia>>2]|0;if(!da)break;if((c[da+4>>2]&-8|0)==(d|0)){Ha=da;break j}else{fa=fa<<1;X=da}}c[Ia>>2]=oa;c[oa+24>>2]=X;c[oa+12>>2]=oa;c[oa+8>>2]=oa;break f}while(0);d=Ha+8|0;W=c[d>>2]|0;c[W+12>>2]=oa;c[d>>2]=oa;c[oa+8>>2]=W;c[oa+12>>2]=Ha;c[oa+24>>2]=0}}else{W=c[2034]|0;if((W|0)==0|ka>>>0<W>>>0)c[2034]=ka;c[2142]=ka;c[2143]=la;c[2145]=0;c[2039]=c[2148];c[2038]=-1;c[2043]=8160;c[2042]=8160;c[2045]=8168;c[2044]=8168;c[2047]=8176;c[2046]=8176;c[2049]=8184;c[2048]=8184;c[2051]=8192;c[2050]=8192;c[2053]=8200;c[2052]=8200;c[2055]=8208;c[2054]=8208;c[2057]=8216;c[2056]=8216;c[2059]=8224;c[2058]=8224;c[2061]=8232;c[2060]=8232;c[2063]=8240;c[2062]=8240;c[2065]=8248;c[2064]=8248;c[2067]=8256;c[2066]=8256;c[2069]=8264;c[2068]=8264;c[2071]=8272;c[2070]=8272;c[2073]=8280;c[2072]=8280;c[2075]=8288;c[2074]=8288;c[2077]=8296;c[2076]=8296;c[2079]=8304;c[2078]=8304;c[2081]=8312;c[2080]=8312;c[2083]=8320;c[2082]=8320;c[2085]=8328;c[2084]=8328;c[2087]=8336;c[2086]=8336;c[2089]=8344;c[2088]=8344;c[2091]=8352;c[2090]=8352;c[2093]=8360;c[2092]=8360;c[2095]=8368;c[2094]=8368;c[2097]=8376;c[2096]=8376;c[2099]=8384;c[2098]=8384;c[2101]=8392;c[2100]=8392;c[2103]=8400;c[2102]=8400;c[2105]=8408;c[2104]=8408;W=la+-40|0;d=ka+8|0;ja=(d&7|0)==0?0:0-d&7;d=ka+ja|0;na=W-ja|0;c[2036]=d;c[2033]=na;c[d+4>>2]=na|1;c[ka+W+4>>2]=40;c[2037]=c[2152]}while(0);ka=c[2033]|0;if(ka>>>0>F>>>0){la=ka-F|0;c[2033]=la;ka=c[2036]|0;oa=ka+F|0;c[2036]=oa;c[oa+4>>2]=la|1;c[ka+4>>2]=F|3;o=ka+8|0;Cb=b;return o|0}}c[(bd()|0)>>2]=48;o=0;Cb=b;return o|0}function Mg(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0;if(!a)return;b=a+-8|0;d=c[2034]|0;e=c[a+-4>>2]|0;a=e&-8;f=b+a|0;do if(!(e&1)){g=c[b>>2]|0;if(!(e&3))return;h=b+(0-g)|0;i=g+a|0;if(h>>>0<d>>>0)return;if((c[2035]|0)==(h|0)){j=f+4|0;k=c[j>>2]|0;if((k&3|0)!=3){l=h;m=h;n=i;break}c[2032]=i;c[j>>2]=k&-2;c[h+4>>2]=i|1;c[h+i>>2]=i;return}k=g>>>3;if(g>>>0<256){g=c[h+8>>2]|0;j=c[h+12>>2]|0;if((j|0)==(g|0)){c[2030]=c[2030]&~(1<<k);l=h;m=h;n=i;break}else{c[g+12>>2]=j;c[j+8>>2]=g;l=h;m=h;n=i;break}}g=c[h+24>>2]|0;j=c[h+12>>2]|0;do if((j|0)==(h|0)){k=h+16|0;o=k+4|0;p=c[o>>2]|0;if(!p){q=c[k>>2]|0;if(!q){r=0;break}else{s=q;t=k}}else{s=p;t=o}o=s;p=t;while(1){k=o+20|0;q=c[k>>2]|0;if(!q){u=o+16|0;v=c[u>>2]|0;if(!v)break;else{w=v;x=u}}else{w=q;x=k}o=w;p=x}c[p>>2]=0;r=o}else{k=c[h+8>>2]|0;c[k+12>>2]=j;c[j+8>>2]=k;r=j}while(0);if(g){j=c[h+28>>2]|0;k=8424+(j<<2)|0;if((c[k>>2]|0)==(h|0)){c[k>>2]=r;if(!r){c[2031]=c[2031]&~(1<<j);l=h;m=h;n=i;break}}else{j=g+16|0;c[((c[j>>2]|0)==(h|0)?j:g+20|0)>>2]=r;if(!r){l=h;m=h;n=i;break}}c[r+24>>2]=g;j=h+16|0;k=c[j>>2]|0;if(k|0){c[r+16>>2]=k;c[k+24>>2]=r}k=c[j+4>>2]|0;if(k){c[r+20>>2]=k;c[k+24>>2]=r;l=h;m=h;n=i}else{l=h;m=h;n=i}}else{l=h;m=h;n=i}}else{l=b;m=b;n=a}while(0);if(l>>>0>=f>>>0)return;a=f+4|0;b=c[a>>2]|0;if(!(b&1))return;if(!(b&2)){if((c[2036]|0)==(f|0)){r=(c[2033]|0)+n|0;c[2033]=r;c[2036]=m;c[m+4>>2]=r|1;if((m|0)!=(c[2035]|0))return;c[2035]=0;c[2032]=0;return}if((c[2035]|0)==(f|0)){r=(c[2032]|0)+n|0;c[2032]=r;c[2035]=l;c[m+4>>2]=r|1;c[l+r>>2]=r;return}r=(b&-8)+n|0;x=b>>>3;do if(b>>>0<256){w=c[f+8>>2]|0;t=c[f+12>>2]|0;if((t|0)==(w|0)){c[2030]=c[2030]&~(1<<x);break}else{c[w+12>>2]=t;c[t+8>>2]=w;break}}else{w=c[f+24>>2]|0;t=c[f+12>>2]|0;do if((t|0)==(f|0)){s=f+16|0;d=s+4|0;e=c[d>>2]|0;if(!e){k=c[s>>2]|0;if(!k){y=0;break}else{z=k;A=s}}else{z=e;A=d}d=z;e=A;while(1){s=d+20|0;k=c[s>>2]|0;if(!k){j=d+16|0;q=c[j>>2]|0;if(!q)break;else{B=q;C=j}}else{B=k;C=s}d=B;e=C}c[e>>2]=0;y=d}else{o=c[f+8>>2]|0;c[o+12>>2]=t;c[t+8>>2]=o;y=t}while(0);if(w|0){t=c[f+28>>2]|0;i=8424+(t<<2)|0;if((c[i>>2]|0)==(f|0)){c[i>>2]=y;if(!y){c[2031]=c[2031]&~(1<<t);break}}else{t=w+16|0;c[((c[t>>2]|0)==(f|0)?t:w+20|0)>>2]=y;if(!y)break}c[y+24>>2]=w;t=f+16|0;i=c[t>>2]|0;if(i|0){c[y+16>>2]=i;c[i+24>>2]=y}i=c[t+4>>2]|0;if(i|0){c[y+20>>2]=i;c[i+24>>2]=y}}}while(0);c[m+4>>2]=r|1;c[l+r>>2]=r;if((m|0)==(c[2035]|0)){c[2032]=r;return}else D=r}else{c[a>>2]=b&-2;c[m+4>>2]=n|1;c[l+n>>2]=n;D=n}n=D>>>3;if(D>>>0<256){l=8160+(n<<1<<2)|0;b=c[2030]|0;a=1<<n;if(!(b&a)){c[2030]=b|a;E=l+8|0;F=l}else{a=l+8|0;E=a;F=c[a>>2]|0}c[E>>2]=m;c[F+12>>2]=m;c[m+8>>2]=F;c[m+12>>2]=l;return}l=D>>>8;if(l)if(D>>>0>16777215)G=31;else{F=(l+1048320|0)>>>16&8;E=l<<F;l=(E+520192|0)>>>16&4;a=E<<l;E=(a+245760|0)>>>16&2;b=14-(l|F|E)+(a<<E>>>15)|0;G=D>>>(b+7|0)&1|b<<1}else G=0;b=8424+(G<<2)|0;c[m+28>>2]=G;c[m+20>>2]=0;c[m+16>>2]=0;E=c[2031]|0;a=1<<G;a:do if(!(E&a)){c[2031]=E|a;c[b>>2]=m;c[m+24>>2]=b;c[m+12>>2]=m;c[m+8>>2]=m}else{F=c[b>>2]|0;b:do if((c[F+4>>2]&-8|0)==(D|0))H=F;else{l=D<<((G|0)==31?0:25-(G>>>1)|0);n=F;while(1){I=n+16+(l>>>31<<2)|0;r=c[I>>2]|0;if(!r)break;if((c[r+4>>2]&-8|0)==(D|0)){H=r;break b}else{l=l<<1;n=r}}c[I>>2]=m;c[m+24>>2]=n;c[m+12>>2]=m;c[m+8>>2]=m;break a}while(0);F=H+8|0;w=c[F>>2]|0;c[w+12>>2]=m;c[F>>2]=m;c[m+8>>2]=w;c[m+12>>2]=H;c[m+24>>2]=0}while(0);m=(c[2038]|0)+-1|0;c[2038]=m;if(m|0)return;m=8576;while(1){H=c[m>>2]|0;if(!H)break;else m=H+8|0}c[2038]=-1;return}function Ng(a){a=a|0;var b=0,d=0,e=0,f=0;b=Xg()|0;d=c[b>>2]|0;e=d+(a+3&-4)|0;if((e|0)<0){c[(bd()|0)>>2]=48;f=-1;return f|0}if(e>>>0>(ha()|0)>>>0?(ka(e|0)|0)==0:0){c[(bd()|0)>>2]=48;f=-1;return f|0}c[b>>2]=e;f=d;return f|0}function Og(a,b){a=a|0;b=b|0;var c=0,d=0,e=0,f=0;c=a&65535;d=b&65535;e=q(d,c)|0;f=a>>>16;a=(e>>>16)+(q(d,f)|0)|0;d=b>>>16;b=q(d,c)|0;return (t((a>>>16)+(q(d,f)|0)+(((a&65535)+b|0)>>>16)|0),a+b<<16|e&65535|0)|0}function Pg(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0;e=a;a=c;c=Og(e,a)|0;f=u()|0;return (t((q(b,a)|0)+(q(d,e)|0)+f|f&0|0),c|0|0)|0}function Qg(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0;e=a+c>>>0;return (t(b+d+(e>>>0<a>>>0|0)>>>0|0),e|0)|0}function Rg(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0;e=b-d>>>0;e=b-d-(c>>>0>a>>>0|0)>>>0;return (t(e|0),a-c>>>0|0)|0}function Sg(a){a=a|0;return (a?31-(r(a^a-1)|0)|0:32)|0}function Tg(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,s=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0;g=a;h=b;i=h;j=d;k=e;l=k;if(!i){m=(f|0)!=0;if(!l){if(m){c[f>>2]=(g>>>0)%(j>>>0);c[f+4>>2]=0}n=0;o=(g>>>0)/(j>>>0)>>>0;return (t(n|0),o)|0}else{if(!m){n=0;o=0;return (t(n|0),o)|0}c[f>>2]=a|0;c[f+4>>2]=b&0;n=0;o=0;return (t(n|0),o)|0}}m=(l|0)==0;do if(j){if(!m){p=(r(l|0)|0)-(r(i|0)|0)|0;if(p>>>0<=31){q=p+1|0;s=31-p|0;v=p-31>>31;w=q;x=g>>>(q>>>0)&v|i<<s;y=i>>>(q>>>0)&v;z=0;A=g<<s;break}if(!f){n=0;o=0;return (t(n|0),o)|0}c[f>>2]=a|0;c[f+4>>2]=h|b&0;n=0;o=0;return (t(n|0),o)|0}s=j-1|0;if(s&j|0){v=(r(j|0)|0)+33-(r(i|0)|0)|0;q=64-v|0;p=32-v|0;B=p>>31;C=v-32|0;D=C>>31;w=v;x=p-1>>31&i>>>(C>>>0)|(i<<p|g>>>(v>>>0))&D;y=D&i>>>(v>>>0);z=g<<q&B;A=(i<<q|g>>>(C>>>0))&B|g<<p&v-33>>31;break}if(f|0){c[f>>2]=s&g;c[f+4>>2]=0}if((j|0)==1){n=h|b&0;o=a|0|0;return (t(n|0),o)|0}else{s=Sg(j|0)|0;n=i>>>(s>>>0)|0;o=i<<32-s|g>>>(s>>>0)|0;return (t(n|0),o)|0}}else{if(m){if(f|0){c[f>>2]=(i>>>0)%(j>>>0);c[f+4>>2]=0}n=0;o=(i>>>0)/(j>>>0)>>>0;return (t(n|0),o)|0}if(!g){if(f|0){c[f>>2]=0;c[f+4>>2]=(i>>>0)%(l>>>0)}n=0;o=(i>>>0)/(l>>>0)>>>0;return (t(n|0),o)|0}s=l-1|0;if(!(s&l)){if(f|0){c[f>>2]=a|0;c[f+4>>2]=s&i|b&0}n=0;o=i>>>((Sg(l|0)|0)>>>0);return (t(n|0),o)|0}s=(r(l|0)|0)-(r(i|0)|0)|0;if(s>>>0<=30){v=s+1|0;p=31-s|0;w=v;x=i<<p|g>>>(v>>>0);y=i>>>(v>>>0);z=0;A=g<<p;break}if(!f){n=0;o=0;return (t(n|0),o)|0}c[f>>2]=a|0;c[f+4>>2]=h|b&0;n=0;o=0;return (t(n|0),o)|0}while(0);if(!w){E=A;F=z;G=y;H=x;I=0;J=0}else{b=d|0|0;d=k|e&0;e=Qg(b|0,d|0,-1,-1)|0;k=u()|0;h=A;A=z;z=y;y=x;x=w;w=0;do{a=h;h=A>>>31|h<<1;A=w|A<<1;g=y<<1|a>>>31|0;a=y>>>31|z<<1|0;Rg(e|0,k|0,g|0,a|0)|0;i=u()|0;l=i>>31|((i|0)<0?-1:0)<<1;w=l&1;y=Rg(g|0,a|0,l&b|0,(((i|0)<0?-1:0)>>31|((i|0)<0?-1:0)<<1)&d|0)|0;z=u()|0;x=x-1|0}while((x|0)!=0);E=h;F=A;G=z;H=y;I=0;J=w}w=F;F=0;if(f|0){c[f>>2]=H;c[f+4>>2]=G}n=(w|0)>>>31|(E|F)<<1|(F<<1|w>>>31)&0|I;o=(w<<1|0>>>31)&-2|J;return (t(n|0),o)|0}function Ug(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return Tg(a,b,c,d,0)|0}function Vg(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){t(b>>>c|0);return a>>>c|(b&(1<<c)-1)<<32-c}t(0);return b>>>c-32|0}function Wg(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){t(b<<c|(a&(1<<c)-1<<32-c)>>>32-c|0);return a<<c}t(a<<c-32|0);return 0}function Xg(){return 8640}function Yg(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;if((e|0)>=8192){ja(b|0,d|0,e|0)|0;return b|0}f=b|0;g=b+e|0;if((b&3)==(d&3)){while(b&3){if(!e)return f|0;a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}h=g&-4|0;e=h-64|0;while((b|0)<=(e|0)){c[b>>2]=c[d>>2];c[b+4>>2]=c[d+4>>2];c[b+8>>2]=c[d+8>>2];c[b+12>>2]=c[d+12>>2];c[b+16>>2]=c[d+16>>2];c[b+20>>2]=c[d+20>>2];c[b+24>>2]=c[d+24>>2];c[b+28>>2]=c[d+28>>2];c[b+32>>2]=c[d+32>>2];c[b+36>>2]=c[d+36>>2];c[b+40>>2]=c[d+40>>2];c[b+44>>2]=c[d+44>>2];c[b+48>>2]=c[d+48>>2];c[b+52>>2]=c[d+52>>2];c[b+56>>2]=c[d+56>>2];c[b+60>>2]=c[d+60>>2];b=b+64|0;d=d+64|0}while((b|0)<(h|0)){c[b>>2]=c[d>>2];b=b+4|0;d=d+4|0}}else{h=g-4|0;while((b|0)<(h|0)){a[b>>0]=a[d>>0]|0;a[b+1>>0]=a[d+1>>0]|0;a[b+2>>0]=a[d+2>>0]|0;a[b+3>>0]=a[d+3>>0]|0;b=b+4|0;d=d+4|0}}while((b|0)<(g|0)){a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0}return f|0}function Zg(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=b+e|0;d=d&255;if((e|0)>=67){while(b&3){a[b>>0]=d;b=b+1|0}g=f&-4|0;h=d|d<<8|d<<16|d<<24;i=g-64|0;while((b|0)<=(i|0)){c[b>>2]=h;c[b+4>>2]=h;c[b+8>>2]=h;c[b+12>>2]=h;c[b+16>>2]=h;c[b+20>>2]=h;c[b+24>>2]=h;c[b+28>>2]=h;c[b+32>>2]=h;c[b+36>>2]=h;c[b+40>>2]=h;c[b+44>>2]=h;c[b+48>>2]=h;c[b+52>>2]=h;c[b+56>>2]=h;c[b+60>>2]=h;b=b+64|0}while((b|0)<(g|0)){c[b>>2]=h;b=b+4|0}}while((b|0)<(f|0)){a[b>>0]=d;b=b+1|0}return f-e|0}function _g(a,b){a=a|0;b=b|0;return Fb[a&3](b|0)|0}function $g(a,b,c,d,e,f,g){a=a|0;b=b|0;c=+c;d=d|0;e=e|0;f=f|0;g=g|0;return Gb[a&1](b|0,+c,d|0,e|0,f|0,g|0)|0}function ah(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return Hb[a&7](b|0,c|0,d|0)|0}function bh(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return Ib[a&3](b|0,c|0,d|0,e|0)|0}function ch(a,b){a=a|0;b=b|0;Jb[a&7](b|0)}function dh(a,b,c){a=a|0;b=b|0;c=c|0;Kb[a&1](b|0,c|0)}function eh(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;Lb[a&3](b|0,c|0,d|0,e|0)}function fh(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;Mb[a&3](b|0,c|0,d|0,e|0,f|0)}function gh(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;Nb[a&3](b|0,c|0,d|0,e|0,f|0,g|0)}function hh(a){a=a|0;s(0);return 0}function ih(a,b,c,d,e,f){a=a|0;b=+b;c=c|0;d=d|0;e=e|0;f=f|0;s(1);return 0}function jh(a,b,c){a=a|0;b=b|0;c=c|0;s(2);return 0}function kh(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;s(3);return 0}function lh(a){a=a|0;s(4)}function mh(a,b){a=a|0;b=b|0;s(5)}function nh(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;s(6)}function oh(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;s(7)}function ph(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;s(8)}

// EMSCRIPTEN_END_FUNCS
var Fb=[hh,ed,Zc,hh];var Gb=[ih,od];var Hb=[jh,_c,Kd,ng,Dg,dd,jh,jh];var Ib=[kh,fd,$c,kh];var Jb=[lh,jg,kg,lg,mg,wg,Cg,Eg];var Kb=[mh,pd];var Lb=[nh,qg,zg,Hg];var Mb=[oh,pg,yg,Gg];var Nb=[ph,og,xg,Fg];return{__GLOBAL__sub_I_bind_cpp:oe,___embind_register_native_and_builtin_types:re,___errno_location:bd,___getTypeName:ig,___muldi3:Pg,___udivdi3:Ug,_bitshift64Lshr:Vg,_bitshift64Shl:Wg,_emscripten_get_sbrk_ptr:Xg,_free:Mg,_i64Add:Qg,_i64Subtract:Rg,_main:Sb,_malloc:Lg,_memcpy:Yg,_memset:Zg,dynCall_ii:_g,dynCall_iidiiii:$g,dynCall_iiii:ah,dynCall_iiiii:bh,dynCall_vi:ch,dynCall_vii:dh,dynCall_viiii:eh,dynCall_viiiii:fh,dynCall_viiiiii:gh,stackAlloc:Ob,stackRestore:Qb,stackSave:Pb}})


// EMSCRIPTEN_END_ASM
(asmGlobalArg,asmLibraryArg,buffer);var __GLOBAL__sub_I_bind_cpp=Module["__GLOBAL__sub_I_bind_cpp"]=asm["__GLOBAL__sub_I_bind_cpp"];var ___embind_register_native_and_builtin_types=Module["___embind_register_native_and_builtin_types"]=asm["___embind_register_native_and_builtin_types"];var ___errno_location=Module["___errno_location"]=asm["___errno_location"];var ___getTypeName=Module["___getTypeName"]=asm["___getTypeName"];var ___muldi3=Module["___muldi3"]=asm["___muldi3"];var ___udivdi3=Module["___udivdi3"]=asm["___udivdi3"];var _bitshift64Lshr=Module["_bitshift64Lshr"]=asm["_bitshift64Lshr"];var _bitshift64Shl=Module["_bitshift64Shl"]=asm["_bitshift64Shl"];var _emscripten_get_sbrk_ptr=Module["_emscripten_get_sbrk_ptr"]=asm["_emscripten_get_sbrk_ptr"];var _free=Module["_free"]=asm["_free"];var _i64Add=Module["_i64Add"]=asm["_i64Add"];var _i64Subtract=Module["_i64Subtract"]=asm["_i64Subtract"];var _main=Module["_main"]=asm["_main"];var _malloc=Module["_malloc"]=asm["_malloc"];var _memcpy=Module["_memcpy"]=asm["_memcpy"];var _memset=Module["_memset"]=asm["_memset"];var stackAlloc=Module["stackAlloc"]=asm["stackAlloc"];var stackRestore=Module["stackRestore"]=asm["stackRestore"];var stackSave=Module["stackSave"]=asm["stackSave"];var dynCall_ii=Module["dynCall_ii"]=asm["dynCall_ii"];var dynCall_iidiiii=Module["dynCall_iidiiii"]=asm["dynCall_iidiiii"];var dynCall_iiii=Module["dynCall_iiii"]=asm["dynCall_iiii"];var dynCall_iiiii=Module["dynCall_iiiii"]=asm["dynCall_iiiii"];var dynCall_vi=Module["dynCall_vi"]=asm["dynCall_vi"];var dynCall_vii=Module["dynCall_vii"]=asm["dynCall_vii"];var dynCall_viiii=Module["dynCall_viiii"]=asm["dynCall_viiii"];var dynCall_viiiii=Module["dynCall_viiiii"]=asm["dynCall_viiiii"];var dynCall_viiiiii=Module["dynCall_viiiiii"]=asm["dynCall_viiiiii"];Module["asm"]=asm;Module["getMemory"]=getMemory;Module["addRunDependency"]=addRunDependency;Module["removeRunDependency"]=removeRunDependency;Module["FS_createFolder"]=FS.createFolder;Module["FS_createPath"]=FS.createPath;Module["FS_createDataFile"]=FS.createDataFile;Module["FS_createPreloadedFile"]=FS.createPreloadedFile;Module["FS_createLazyFile"]=FS.createLazyFile;Module["FS_createLink"]=FS.createLink;Module["FS_createDevice"]=FS.createDevice;Module["FS_unlink"]=FS.unlink;Module["calledRun"]=calledRun;if(memoryInitializer){if(!isDataURI(memoryInitializer)){memoryInitializer=locateFile(memoryInitializer)}if(ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=readBinary(memoryInitializer);HEAPU8.set(data,GLOBAL_BASE)}else{addRunDependency("memory initializer");var applyMemoryInitializer=function(data){if(data.byteLength)data=new Uint8Array(data);HEAPU8.set(data,GLOBAL_BASE);if(Module["memoryInitializerRequest"])delete Module["memoryInitializerRequest"].response;removeRunDependency("memory initializer")};var doBrowserLoad=function(){readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};var memoryInitializerBytes=tryParseAsDataURI(memoryInitializer);if(memoryInitializerBytes){applyMemoryInitializer(memoryInitializerBytes.buffer)}else if(Module["memoryInitializerRequest"]){var useRequest=function(){var request=Module["memoryInitializerRequest"];var response=request.response;if(request.status!==200&&request.status!==0){var data=tryParseAsDataURI(Module["memoryInitializerRequestURL"]);if(data){response=data.buffer}else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+request.status+", retrying "+memoryInitializer);doBrowserLoad();return}}applyMemoryInitializer(response)};if(Module["memoryInitializerRequest"].response){setTimeout(useRequest,0)}else{Module["memoryInitializerRequest"].addEventListener("load",useRequest)}}else{doBrowserLoad()}}}var calledRun;function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}var calledMain=false;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function callMain(args){var entryFunction=Module["_main"];args=args||[];var argc=args.length+1;var argv=stackAlloc((argc+1)*4);HEAP32[argv>>2]=allocateUTF8OnStack(thisProgram);for(var i=1;i<argc;i++){HEAP32[(argv>>2)+i]=allocateUTF8OnStack(args[i-1])}HEAP32[(argv>>2)+argc]=0;try{var ret=entryFunction(argc,argv);exit(ret,true)}catch(e){if(e instanceof ExitStatus){return}else if(e=="unwind"){noExitRuntime=true;return}else{var toLog=e;if(e&&typeof e==="object"&&e.stack){toLog=[e,e.stack]}err("exception thrown: "+toLog);quit_(1,e)}}finally{calledMain=true}}function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0)return;function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();if(shouldRunNow)callMain(args);postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;function exit(status,implicit){if(implicit&&noExitRuntime&&status===0){return}if(noExitRuntime){}else{ABORT=true;EXITSTATUS=status;exitRuntime();if(Module["onExit"])Module["onExit"](status)}quit_(status,new ExitStatus(status))}if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}var shouldRunNow=true;if(Module["noInitialRun"])shouldRunNow=false;noExitRuntime=true;run();

